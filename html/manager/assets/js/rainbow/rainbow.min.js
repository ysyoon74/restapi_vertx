/*!
 * Copyright (c) 2017 Saltlux INC.
 * rainbow.js project is licensed under the MIT license
 * 
 * rainbow.js, JavaScript chart library
 * http://13.21.34.201/datamixi-dev/rainbow
 * 
 * @version 1.0.1-snapshot
 */
!function(t,e){if("object"==typeof exports&&"object"==typeof module)module.exports=e(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],e);else{var i=e("object"==typeof exports?require("d3"):t.d3);for(var n in i)("object"==typeof exports?exports:t)[n]=i[n]}}(this,function(t){return function(t){function __webpack_require__(i){if(e[i])return e[i].exports;var n=e[i]={i:i,l:!1,exports:{}};return t[i].call(n.exports,n,n.exports,__webpack_require__),n.l=!0,n.exports}var e={};return __webpack_require__.m=t,__webpack_require__.c=e,__webpack_require__.d=function(t,e,i){__webpack_require__.o(t,e)||Object.defineProperty(t,e,{configurable:!1,enumerable:!0,get:i})},__webpack_require__.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return __webpack_require__.d(e,"a",e),e},__webpack_require__.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},__webpack_require__.p="",__webpack_require__(__webpack_require__.s=10)}([function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function extend(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=void 0;for(i in e)t[i]=e[i];return t}function addEvent(t,e,i,n){if(B){var r=n||!1;"object"===(void 0===n?"undefined":(0,a.default)(n))&&(r=!!D&&n),t.addEventListener(e,i,r)}else t.attachEvent?t.attachEvent("on"+e,i):t["on"+e]=i}function removeEvent(t,e,i){t.removeEventListener?t.removeEventListener(e,i,!1):t.detachEvent?t.detachEvent("on"+e,i):t["on"+e]=null}e.__esModule=!0,e.objectEach=e.createElement=e.shapeSymbol=e.sanitise=e.removeEvent=e.pageSizes=e.notEmpty=e.merge=e.isValue=e.isURL=e.isUndefined=e.isString=e.isPercentage=e.isObjectType=e.isObject=e.isNumber=e.isFunction=e.isEmpty=e.isDefined=e.isBoolean=e.isArray=e.hasValue=e.getRectSegList=e.getPathBox=e.getOption=e.getColor=e.getBrushSelection=e.fileFormats=e.extend=e.diffDomain=e.datePart=e.dateDiff=e.dateAdd=e.convertPercentage=e.ceil10=e.brushEmpty=e.borderStyle=e.asHalfPixel=e.addEvent=void 0;var n=i(5),a=_interopRequireDefault(n),r=i(3),o=i(2),s=_interopRequireDefault(o),l=function(t){return t||0===t},u=function(t){return"function"==typeof t},c=function(t){return"string"==typeof t},d=function(t){return"number"==typeof t},h=function(t){return void 0===t},p=function(t){return void 0!==t},f=function(t){return"boolean"==typeof t},g=function(t){return 10*Math.ceil(t/10)},_=function(t){return Math.ceil(t)+.5},m=function(t){return t[1]-t[0]},y=function(t){return"object"===(void 0===t?"undefined":(0,a.default)(t))},v=function(t){return void 0===t||null===t||c(t)&&0===t.length||"object"===(void 0===t?"undefined":(0,a.default)(t))&&0===Object.keys(t).length},x=function(t){return!v(t)},b=function(t,e,i){return p(t[e])?t[e]:i},w=function(t){return t<=10?(0,r.scaleOrdinal)(r.schemeCategory10):(0,r.scaleOrdinal)(r.schemeCategory20)},L=function(t,e){var i=!1;return Object.keys(t).forEach(function(n){return t[n]===e&&(i=!0)}),i},T=function(t){return c(t)?t.replace(/</g,"&lt;").replace(/>/g,"&gt;"):t},k=function(t){var e=t.getBBox(),i=[];return i.push({x:e.x,y:e.y+e.height}),i.push({x:e.x,y:e.y}),i.push({x:e.x+e.width,y:e.y}),i.push({x:e.x+e.width,y:e.y+e.height}),i},C=function(t){if(v(t))return null;var e=t.replace(/^\s+|\s+$/g,"");return new RegExp("(https?|ftp)://(-.)?([^s/?.#-]+.?)+(/[^s]*)?").test(e)},A=function(t){return/^\d+(\.\d+)?%$/.test(t)},P=function(t){return parseFloat(t)/100},M=function(t){var e=t.getBoundingClientRect(),i=k(t);return{x:i[0].x,y:Math.min(i[0].y,i[1].y),width:e.width,height:e.height}},S=function(){var t=null,e=r.event;return e&&"BrushEvent"===e.constructor.name?t=e.selection:this.context&&(t=this.context.select("."+s.default.brush).node())&&(t=(0,r.brushSelection)(t)),t},E=function(){var t=this.getBrushSelection();return!t||t[0]===t[1]},B=!!("addEventListener"in document),D=function(){var t=!1;try{B&&Object.defineProperty&&document.addEventListener("test",null,Object.defineProperty({},"passive",{get:function(){t=!0}}))}catch(t){}return t}(),I=function(t){return t&&t.constructor===Array},z=function(t){return t&&!t.nodeType&&"object"===(void 0===t?"undefined":(0,a.default)(t))&&!I(t)},R=function(t){for(var e=arguments.length,i=Array(e>1?e-1:0),n=1;n<e;n++)i[n-1]=arguments[n];if(!i.length||1===i.length&&!i[0])return t;var a=i.shift();return z(t)&&z(a)&&Object.keys(a).forEach(function(e){var i=a[e];z(i)?(!t[e]&&(t[e]={}),t[e]=R(t[e],i)):t[e]=I(i)?i.concat():i}),extend.apply(void 0,[t].concat(i))},O=function(t){return"solid"===t?"none":"dashed"===t?"3, 2":"dotted"===t?"1":"none"},F=function(){var t={},e=Math.sqrt(3),i=Math.PI,n=2*i,a=function(t,e,i){return[Math.cos(i)*t+-Math.sin(i)*e,Math.sin(i)*t+Math.cos(i)*e]},r=function(t){var e=t||0;return function(t,i){var r=3*Math.sqrt(3),o=Math.sqrt(2*i/r),s=o;t.moveTo.apply(t,a(s,0,e));for(var l=0;l<6;++l){var u=n*l/6,c=Math.cos(u)*s,d=Math.sin(u)*s;t.lineTo.apply(t,a(c,d,e))}t.closePath()}},o=function(t){var e=t||0;return function(t,i){var r=.5*Math.sqrt(4+2*Math.sqrt(2)),o=i*(1-Math.sqrt(2)),s=Math.sqrt(-1*o/2),l=s*r;t.moveTo.apply(t,a(l,0,e));for(var u=0;u<8;++u){var c=n*u/8,d=Math.cos(c)*l,h=Math.sin(c)*l;t.lineTo.apply(t,a(d,h,e))}t.closePath()}};return t.pentagon={draw:function(t,e){var i=.1*Math.sqrt(50+10*Math.sqrt(5)),r=Math.sqrt(5*(5+2*Math.sqrt(5))),o=Math.sqrt(4*e/r),s=o*i,l=-n/4;t.moveTo.apply(t,a(s,0,l));for(var u=0;u<5;++u){var c=n*u/5,d=Math.cos(c)*s,h=Math.sin(c)*s;t.lineTo.apply(t,a(d,h,l))}t.closePath()}},t.diamondAlt={draw:function(t,e){var i=Math.sqrt(1/3),n=Math.sqrt(e/(2*i)),a=n*i;t.moveTo(0,-a),t.lineTo(n,0),t.lineTo(0,a),t.lineTo(-n,0),t.closePath()}},t.diamondSquare={draw:function(t,e){var i=Math.sqrt(e),n=i/2*Math.sqrt(2);t.moveTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.lineTo(-n,0),t.closePath()}},t.triangleDown={draw:function(t,i){var n=-Math.sqrt(i/(3*e));t.moveTo(0,2*-n),t.lineTo(-e*n,n),t.lineTo(e*n,n),t.closePath()}},t.triangleLeft={draw:function(t,i){var n=-Math.sqrt(i/(3*e));t.moveTo(2*n,0),t.lineTo(-n,-e*n),t.lineTo(-n,e*n),t.closePath()}},t.triangleRight={draw:function(t,i){var n=-Math.sqrt(i/(3*e));t.moveTo(2*-n,0),t.lineTo(n,-e*n),t.lineTo(n,e*n),t.closePath()}},t.crossAlt={draw:function(t,e){var i=Math.sqrt(e/5)/2,r=n/8,o=[a(-3*i,-i,r),a(-i,-i,r),a(-i,-3*i,r),a(i,-3*i,r),a(i,-i,r),a(3*i,-i,r),a(3*i,i,r),a(i,i,r),a(i,3*i,r),a(-i,3*i,r),a(-i,i,r),a(-3*i,i,r)];t.moveTo.apply(t,o.pop());for(var s=0;s<o.length;s++)t.lineTo.apply(t,o[s]);t.closePath()}},t.hexagon={draw:r(n/12)},t.hexagonAlt={draw:r()},t.octagon={draw:o()},t.octagonAlt={draw:o(n/16)},t},N=function(t){return{circle:(0,r.symbol)().type(r.symbolCircle).size(t),cross:(0,r.symbol)().type(r.symbolCross).size(t),diamond:(0,r.symbol)().type(r.symbolDiamond).size(t),square:(0,r.symbol)().type(r.symbolSquare).size(t),star:(0,r.symbol)().type(r.symbolStar).size(t),triangle:(0,r.symbol)().type(r.symbolTriangle).size(t),wye:(0,r.symbol)().type(r.symbolWye).size(t),triangleDown:(0,r.symbol)().type(F().triangleDown).size(t),triangleLeft:(0,r.symbol)().type(F().triangleLeft).size(t),triangleRight:(0,r.symbol)().type(F().triangleRight).size(t),hexagon:(0,r.symbol)().type(F().hexagon).size(t),hexagonAlt:(0,r.symbol)().type(F().hexagonAlt).size(t),pentagon:(0,r.symbol)().type(F().pentagon).size(t),octagon:(0,r.symbol)().type(F().octagon).size(t),octagonAlt:(0,r.symbol)().type(F().octagonAlt).size(t),crossAlt:(0,r.symbol)().type(F().crossAlt).size(t),diamondAlt:(0,r.symbol)().type(F().diamondAlt).size(t),diamondSquare:(0,r.symbol)().type(F().diamondSquare).size(t)}},Z=function(t){var e=Date.parse(t),i=new Date(e);if(isNaN(i)){var n=t.split("-");i=new Date(n[0],--n[1],n[2])}return i},X=function(t,e,i){return"s"===e?new Date(Date.parse(t)+1e3*i):"n"===e?new Date(Date.parse(t)+6e4*i):"h"===e?new Date(Date.parse(t)+36e5*i):"d"===e?new Date(Date.parse(t)+864e5*i):"w"===e?new Date(Date.parse(t)+6048e5*i):"q"===e?new Date(t.getFullYear(),t.getMonth()+3*i,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()):"m"===e?new Date(t.getFullYear(),t.getMonth()+i,t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()):"y"===e?new Date(t.getFullYear()+i,t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds()):null},q=function(t,e,i){var n=e;return c(n)&&(n=Z(n)),"s"===i?parseInt((n-t)/1e3,10):"n"===i?parseInt((n-t)/6e4,10):"h"===i?parseInt((n-t)/36e5,10):"d"===i?parseInt((n-t)/864e5,10):"w"===i?parseInt((n-t)/6048e5,10):"m"===i?n.getMonth()+1+12*(n.getFullYear()-t.getFullYear())-(t.getMonth()+1):"y"===i?n.getFullYear()-t.getFullYear():null},j=function(t,e){var i="";return"y"===e?i=t.getFullYear():"m"===e?i=t.getMonth()+1:"d"===e?i=t.getDate():"w"===e?i=["day","One","Two","Three","Four","Five","Six"][t.getDay()]:"ww"===e?i=t.WeekNumOfYear():"h"===e?i=t.getHours():"n"===e?i=t.getMinutes():"s"===e&&(i=t.getSeconds()),i},W=function(t,e,i,n,a){var r=document.createElement(t);return e&&this.extend(r,e),a&&this.extend(r.style,{padding:0,border:"none",margin:0}),i&&this.extend(r.style,i),n&&n.appendChild(r),r},Y=function(t,e,i){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.call(i,t[n],n,t)},G={JPG:{mimeType:"image/jpeg",extension:"jpg"},PNG:{mimeType:"image/png",extension:"png"},SVG:{mimeType:"text/xml",extension:"svg"},PDF:{mimeType:"application/pdf",extension:"pdf"},CSV:{mimeType:"text/plain",extension:"csv"},JSON:{mimeType:"text/plain",extension:"json"},XLSX:{mimeType:"application/octet-stream",extension:"xlsx"}},V={"4A0":[4767.87,6740.79],"2A0":[3370.39,4767.87],A0:[2383.94,3370.39],A1:[1683.78,2383.94],A2:[1190.55,1683.78],A3:[841.89,1190.55],A4:[595.28,841.89],A5:[419.53,595.28],A6:[297.64,419.53],A7:[209.76,297.64],A8:[147.4,209.76],A9:[104.88,147.4],A10:[73.7,104.88],B0:[2834.65,4008.19],B1:[2004.09,2834.65],B2:[1417.32,2004.09],B3:[1000.63,1417.32],B4:[708.66,1000.63],B5:[498.9,708.66],B6:[354.33,498.9],B7:[249.45,354.33],B8:[175.75,249.45],B9:[124.72,175.75],B10:[87.87,124.72],C0:[2599.37,3676.54],C1:[1836.85,2599.37],C2:[1298.27,1836.85],C3:[918.43,1298.27],C4:[649.13,918.43],C5:[459.21,649.13],C6:[323.15,459.21],C7:[229.61,323.15],C8:[161.57,229.61],C9:[113.39,161.57],C10:[79.37,113.39],RA0:[2437.8,3458.27],RA1:[1729.13,2437.8],RA2:[1218.9,1729.13],RA3:[864.57,1218.9],RA4:[609.45,864.57],SRA0:[2551.18,3628.35],SRA1:[1814.17,2551.18],SRA2:[1275.59,1814.17],SRA3:[907.09,1275.59],SRA4:[637.8,907.09],EXECUTIVE:[521.86,756],FOLIO:[612,936],LEGAL:[612,1008],LETTER:[612,792],TABLOID:[792,1224]};e.addEvent=addEvent,e.asHalfPixel=_,e.borderStyle=O,e.brushEmpty=E,e.ceil10=g,e.convertPercentage=P,e.dateAdd=X,e.dateDiff=q,e.datePart=j,e.diffDomain=m,e.extend=extend,e.fileFormats=G,e.getBrushSelection=S,e.getColor=w,e.getOption=b,e.getPathBox=M,e.getRectSegList=k,e.hasValue=L,e.isArray=I,e.isBoolean=f,e.isDefined=p,e.isEmpty=v,e.isFunction=u,e.isNumber=d,e.isObject=z,e.isObjectType=y,e.isPercentage=A,e.isString=c,e.isUndefined=h,e.isURL=C,e.isValue=l,e.merge=R,e.notEmpty=x,e.pageSizes=V,e.removeEvent=removeEvent,e.sanitise=T,e.shapeSymbol=N,e.createElement=W,e.objectEach=Y},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var n=i(6),a=_interopRequireDefault(n),r=i(3),o=i(7),s=_interopRequireDefault(o),l=i(2),u=_interopRequireDefault(l),c=i(0),d=function(){function ChartInternal(t){(0,a.default)(this,ChartInternal);var e=this;e.api=t,e.config=e.getOptions(),e.data={},e.cache={},e.axes={}}return ChartInternal.prototype.beforeInit=function(t){var e=this,i=e.config;e.config_origin=t,(0,c.isFunction)(i.onbeforeinit)&&i.onbeforeinit.call(e)},ChartInternal.prototype.afterInit=function(){var t=this,e=t.config;(0,c.isFunction)(e.onafterinit)&&e.onafterinit.call(t)},ChartInternal.prototype.init=function(){var t=this,e=t.config;if(t.initParams(),e.data_url)t.convertUrlToData(e.data_url,e.data_mimeType,e.data_headers,e.data_keys,t.initWithData);else if(e.data_json)t.initWithData(t.convertJsonToData(e.data_json,e.data_keys));else if(e.data_rows)t.initWithData(t.convertRowsToData(e.data_rows));else{if(!e.data_columns)throw Error("url or json or rows or columns is required.");t.initWithData(t.convertColumnsToData(e.data_columns))}},ChartInternal.prototype.initParams=function(){var t=this,e=t.config;t.initLegendAlign(),t.initLegendVAlign(),t.clipId="rb-"+ +new Date+"-clip",t.clipIdForXAxis=t.clipId+"-xaxis",t.clipIdForYAxis=t.clipId+"-yaxis",t.clipIdForGrid=t.clipId+"-grid",t.clipIdForSubchart=t.clipId+"-subchart",t.clipPath=t.getClipPath(t.clipId),t.clipPathForXAxis=t.getClipPath(t.clipIdForXAxis),t.clipPathForYAxis=t.getClipPath(t.clipIdForYAxis),t.clipPathForGrid=t.getClipPath(t.clipIdForGrid),t.clipPathForSubchart=t.getClipPath(t.clipIdForSubchart),t.dragStart=null,t.dragging=!1,t.flowing=!1,t.cancelClick=!1,t.mouseover=!1,t.transiting=!1,t.color=t.generateColor(),t.levelColor=t.generateLevelColor(),t.dataTimeFormat=e.data_xLocaltime?r.timeParse:r.utcParse,t.axisTimeFormat=e.axis_x_localtime?r.timeFormat:r.utcFormat,t.defaultAxisTimeFormat=function(e){var i=e.getMilliseconds()&&".%L"||e.getSeconds()&&".:%S"||e.getMinutes()&&"%I:%M"||e.getHours()&&"%I %p"||e.getDay()&&1!==e.getDate()&&"%-m/%-d"||1!==e.getDate()&&"%b %d"||e.getMonth()&&"%-m/%-d"||"%Y/%-m/%-d";return t.axisTimeFormat(i)(e)},t.hiddenTargetIds=[],t.hiddenLegendIds=[],t.focusedTargetIds=[],t.defocusedTargetIds=[],t.xOrient=e.axis_rotated?"left":"bottom",t.yOrient=e.axis_rotated?e.axis_y_inner?"top":"bottom":e.axis_y_inner?"right":"left",t.y2Orient=e.axis_rotated?e.axis_y2_inner?"bottom":"top":e.axis_y2_inner?"left":"right",t.subXOrient=e.axis_rotated?"left":"bottom",t.isLegendRight="right"===e.legend_position,t.isLegendInset="inset"===e.legend_position,t.isLegendTop="top-left"===e.legend_inset_anchor||"top-right"===e.legend_inset_anchor,t.isLegendLeft="top-left"===e.legend_inset_anchor||"bottom-left"===e.legend_inset_anchor,t.legendStep=0,t.legendItemWidth=0,t.legendItemHeight=0,t.currentMaxTickWidths={x:0,y:0,y2:0},t.rotated_padding_left=30,t.rotated_padding_right=e.axis_rotated&&!e.axis_x_show?0:30,t.rotated_padding_top=5,t.withoutFadeIn={},t.intervalForObserveInserted=void 0,t.inputType=t.convertInputType(),t.axes.subx=(0,r.selectAll)([])},ChartInternal.prototype.initWithData=function(t){var e=this,i=e.config,n=!0;if(e.axis=new s.default(e),e.initPie&&e.initPie(),e.initBrush&&e.initBrush(),e.initZoom&&e.initZoom(),e.selectChart=i.bindto?"function"==typeof i.bindto.node?i.bindto:(0,r.select)(i.bindto):(0,r.selectAll)([]),e.selectChart.empty()&&(e.selectChart=(0,r.select)(document.createElement("div")).style("opacity","0"),e.observeInserted(e.selectChart),n=!1),e.selectChart.html("").classed("rb",!0),e.data.xs={},e.isLogarithmicY()||e.isLogarithmicX()){var a=e.convertDataWithLogarithmic(t);e.data.targets=a.dataOutput,e.data.minMaxX={max:(0,r.max)(a.dataMinMaxX),min:(0,r.min)(a.dataMinMaxX)},e.data.minMaxY={max:(0,r.max)(a.dataMinMaxY),min:(0,r.min)(a.dataMinMaxY)}}else e.data.targets=e.convertDataToTargets(t);if(e.data_origin=t,i.data_filter&&(e.data.targets=e.data.targets.filter(i.data_filter)),i.data_hide&&e.addHiddenTargetIds(!0===i.data_hide?e.mapToIds(e.data.targets):i.data_hide),i.legend_hide&&e.addHiddenLegendIds(!0===i.legend_hide?e.mapToIds(e.data.targets):i.legend_hide),(e.hasType("gauge")||e.hasType("wordcloud")||e.hasType("network")||e.hasType("topicrank")||e.hasType("sunburst")||e.hasType("dendrogram")||e.hasType("pack")||e.hasType("treemap")||e.hasType("bubble-cluster")||e.hasType("chord")||e.hasType("map")||e.hasType("dendrogram"))&&(i.legend_show=!1),e.updateSizes(),e.updateScales(),e.x.domain((0,r.extent)(e.getXDomain(e.data.targets))),e.y.domain(e.getYDomain(e.data.targets,"y")),e.y2.domain(e.getYDomain(e.data.targets,"y2")),e.subX.domain(e.x.domain()),e.subY.domain(e.y.domain()),e.subY2.domain(e.y2.domain()),e.orgXDomain=e.x.domain(),e.svg=e.selectChart.append("svg").style("overflow","hidden").style("font-size","11px").style("font-family","sans-serif"),i.interaction_enabled&&e.inputType){var o="touch"===e.inputType;e.svg.on(o?"touchstart":"mouseenter",function(){return i.onover.call(e)}).on(o?"touchend":"mouseleave",function(){return i.onout.call(e)})}e.config.svg_classname&&e.svg.attr("class",e.config.svg_classname);var l=e.svg.append("defs");e.clipChart=e.appendClip(l,e.clipId),e.clipXAxis=e.appendClip(l,e.clipIdForXAxis),e.clipYAxis=e.appendClip(l,e.clipIdForYAxis),e.clipGrid=e.appendClip(l,e.clipIdForGrid),e.clipSubchart=e.appendClip(l,e.clipIdForSubchart),e.updateSvgSize();var d=e.svg.append("g").attr("transform",e.getTranslate("main")).attr("class",u.default.chartGroup);e.main=d,i.subchart_show&&e.initSubchart&&e.initSubchart(),e.initTooltip&&e.initTooltip(),e.initLegend&&e.initLegend(),e.initTitle&&e.initTitle(),d.append("text").attr("class",u.default.text+" "+u.default.empty).attr("text-anchor","middle").attr("dominant-baseline","middle"),e.initGrid(),e.initRegion(),i.clipPath||e.axis.init();var h=d.append("g").attr("class",u.default.chart);if(i.clipPath&&h.attr("clip-path",e.clipPath),i.grid_lines_front&&e.initGridLines(),e.initEventRect(),e.initChartElements(),e.initAnimation(),d.insert("rect",i.zoom_privileged?null:"g."+u.default.regions).attr("class",u.default.zoomRect).attr("width",e.width).attr("height",e.height).style("opacity","0").on("dblclick.zoom",null),i.axis_x_extent&&e.brush.scale(e.getDefaultExtent()),i.clipPath&&e.axis.init(),e.updateTargets(e.data.targets),n&&(e.updateDimension(),e.config.oninit.call(e),e.redraw({withTransition:!1,withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransitionForAxis:!1}),e.config.data_onmin||e.config.data_onmax)){var p=e.getMinMaxData();(0,c.isFunction)(e.config.data_onmin)&&e.config.data_onmin.call(e,p.min),(0,c.isFunction)(e.config.data_onmax)&&e.config.data_onmax.call(e,p.max)}e.bindResize(),e.updateStyleChart(),e.initRegression(),e.initExport&&e.initExport(),e.api.element=e.selectChart.node()},ChartInternal.prototype.initChartElements=function(){this.initBar&&this.initBar(),this.initLine&&this.initLine(),this.initArc&&this.initArc(),this.initGauge&&this.initGauge(),this.initText&&this.initText(),this.initWordCloud&&this.initWordCloud(),this.initBubble&&this.initBubble(),this.initTopicRank&&this.initTopicRank(),this.initNetwork&&this.initNetwork(),this.initRadar&&this.initRadar(),this.initChordDiagram&&this.initChordDiagram(),this.initDendrogram&&this.initDendrogram(),this.initSunburst&&this.initSunburst(),this.initPack&&this.initPack(),this.initTreemap&&this.initTreemap(),this.initBubbleCluster&&this.initBubbleCluster(),this.initMap&&this.initMap(),this.initBoxplot&&this.initBoxplot(),this.initCandlestick&&this.initCandlestick()},ChartInternal.prototype.smoothLines=function(t,e){"grid"===e&&t.each(function(){var t=(0,r.select)(this),e=t.attr("x1"),i=t.attr("x2"),n=t.attr("y1"),a=t.attr("y2");t.attr({x1:Math.ceil(e),x2:Math.ceil(i),y1:Math.ceil(n),y2:Math.ceil(a)})})},ChartInternal.prototype.updateSizes=function(){var t=this,e=t.config,i=t.legend?t.getLegendHeight():0,n=t.legend?t.getLegendWidth():0,a=t.isLegendRight||t.isLegendInset?0:i,r=t.hasArcType(),o=e.axis_rotated||r?0:t.getHorizontalAxisHeight("x"),s=e.subchart_show&&!r?e.subchart_size_height+o:0;t.currentWidth=t.getCurrentWidth(),t.currentHeight=t.getCurrentHeight(),t.margin=e.axis_rotated?{top:t.getHorizontalAxisHeight("y2")+t.getCurrentPaddingTop(),right:r?0:t.getCurrentPaddingRight(),bottom:t.getHorizontalAxisHeight("y")+a+t.getCurrentPaddingBottom(),left:s+(r?0:t.getCurrentPaddingLeft())}:{top:4+t.getCurrentPaddingTop(),right:r?0:t.getCurrentPaddingRight(),bottom:o+s+a+t.getCurrentPaddingBottom(),left:r?0:t.getCurrentPaddingLeft()},t.margin2=e.axis_rotated?{top:t.margin.top,right:NaN,bottom:20+a,left:t.rotated_padding_left}:{top:t.currentHeight-s-a,right:NaN,bottom:o+a,left:t.margin.left},t.margin3={top:0,right:NaN,bottom:0,left:0},t.updateSizeForLegend&&t.updateSizeForLegend(i,n),t.width=t.currentWidth-t.margin.left-t.margin.right,t.height=t.currentHeight-t.margin.top-t.margin.bottom,t.width<0&&(t.width=0),t.height<0&&(t.height=0),t.width2=e.axis_rotated?t.margin.left-t.rotated_padding_left-t.rotated_padding_right:t.width,t.height2=e.axis_rotated?t.height:t.currentHeight-t.margin2.top-t.margin2.bottom,t.width2<0&&(t.width2=0),t.height2<0&&(t.height2=0),t.arcWidth=t.width-(t.isLegendRight?n+10:0),t.arcHeight=t.height-(t.isLegendRight?0:10),t.hasType("gauge")&&!e.gauge_fullCircle&&(t.arcHeight+=t.height-t.getGaugeLabelHeight()),t.updateRadius&&t.updateRadius(),t.isLegendRight&&r&&(t.margin3.left=t.arcWidth/2+1.1*t.radiusExpanded)},ChartInternal.prototype.updateTargets=function(t){var e=this;e.updateTargetsForText(t),e.updateTargetsForBar(t),e.updateTargetsForLine(t),e.hasArcType()&&e.updateTargetsForArc&&e.updateTargetsForArc(t),e.hasWordCloud()&&e.updateTargetsForWordCloud&&e.updateTargetsForWordCloud(t),e.hasTopicRank()&&e.updateTargetsForTopicRank&&e.updateTargetsForTopicRank(t),e.hasNetwork()&&e.updateTargetsForNetwork&&e.updateTargetsForNetwork(t),e.hasRadar()&&e.updateTargetsForRadar&&e.updateTargetsForRadar(t),e.hasChord()&&e.updateTargetsForChordDiagram&&e.updateTargetsForChordDiagram(t),e.hasDendrogram()&&e.updateTargetsForDendrogram&&e.updateTargetsForDendrogram(t),e.hasSunburst()&&e.updateTargetsForSunburst&&e.updateTargetsForSunburst(t),e.hasPack()&&e.updateTargetsForPack&&e.updateTargetsForPack(t),e.hasTreemap()&&e.updateTargetsForTreemap&&e.updateTargetsForTreemap(t),e.hasBubbleCluster()&&e.updateTargetsForBubbleCluster&&e.updateTargetsForBubbleCluster(t),e.hasMap()&&e.updateTargetsForMap&&e.updateTargetsForMap(t),e.hasBoxplot()&&e.updateTargetsForBoxplot&&e.updateTargetsForBoxplot(t),e.hasCandlestick()&&e.updateTargetsForCandlestick&&e.updateTargetsForCandlestick(t),e.updateTargetsForSubchart&&e.updateTargetsForSubchart(t),e.showTargets()},ChartInternal.prototype.showTargets=function(){var t=this;t.svg.selectAll("."+u.default.target).filter(function(e){return t.isTargetToShow(e.id)}).transition().duration(t.config.transition_duration).style("opacity","1")},ChartInternal.prototype.redraw=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1],i=this,n=i.main,a=i.config,o=i.getShapeIndices(i.isAreaType),s=i.getShapeIndices(i.isBarType),l=i.getShapeIndices(i.isLineType),d=void 0,h=void 0,p=i.hasArcType()||i.hasWordCloud()||i.hasNetwork()||i.hasTopicRank()||i.hasRadar()||i.hasChord(),f=i.filterTargetsToShow(i.data.targets),g=i.xv.bind(i),_=void 0,m=void 0,y=void 0,v=(0,c.getOption)(t,"withY",!0),x=(0,c.getOption)(t,"withSubchart",!0),b=(0,c.getOption)(t,"withTransition",!0),w=(0,c.getOption)(t,"withTransform",!1),L=(0,c.getOption)(t,"withUpdateXDomain",!1),T=(0,c.getOption)(t,"withUpdateOrgXDomain",!1),k=(0,c.getOption)(t,"withTrimXDomain",!0),C=(0,c.getOption)(t,"withUpdateXAxis",L),A=(0,c.getOption)(t,"withLegend",!1),P=(0,c.getOption)(t,"withEventRect",!0),M=(0,c.getOption)(t,"withDimension",!0),S=(0,c.getOption)(t,"withTransitionForExit",b),E=(0,c.getOption)(t,"withTransitionForAxis",b),B=b?a.transition_duration:0,D=S?B:0,I=E?B:0,z=e||i.axis.generateTransitions(I);if("touch"===i.inputType&&i.hideTooltip(),A&&a.legend_show?i.updateLegend(i.mapToIds(i.data.targets),t,z):M&&i.updateDimension(!0),i.isCategorized()&&0===f.length&&i.x.domain([0,i.axes.x.selectAll(".tick").size()]),f.length?(i.updateXDomain(f,L,T,k),!a.axis_x_tick_values&&(_=i.axis.updateXAxisTickValues(f))):(i.xAxis.tickValues([]),i.subXAxis.tickValues([])),a.zoom_rescale&&!t.flow&&(y=i.x.originalDomain()),i.y.domain(i.getYDomain(f,"y",y)),i.y2.domain(i.getYDomain(f,"y2",y)),!a.axis_y_tick_values&&a.axis_y_tick_count&&i.yAxis.tickValues(i.axis.generateTickValues(i.y.domain(),a.axis_y_tick_count,i.isTimeSeriesY())),!a.axis_y2_tick_values&&a.axis_y2_tick_count&&i.y2Axis.tickValues(i.axis.generateTickValues(i.y2.domain(),a.axis_y2_tick_count)),i.axis.redraw(z,p),i.axis.updateLabels(b),(L||C)&&f.length)if(a.axis_x_tick_culling&&_){for(var R=1;R<_.length;R++)if(_.length/R<a.axis_x_tick_culling_max){m=R;break}i.svg.selectAll("."+u.default.axisX+" .tick text").each(function(t){var e=_.indexOf(t);e>=0&&(0,r.select)(this).style("display",e%m?"none":"block")})}else i.svg.selectAll("."+u.default.axisX+" .tick text").style("display","block");var O=i.generateDrawArea?i.generateDrawArea(o,!1):void 0,F=i.generateDrawBar?i.generateDrawBar(s):void 0,N=i.generateDrawLine?i.generateDrawLine(l,!1):void 0,Z=i.generateXYForText(o,s,l,!0),X=i.generateXYForText(o,s,l,!1);v&&(i.subY.domain(i.getYDomain(f,"y")),i.subY2.domain(i.getYDomain(f,"y2"))),i.updateXgridFocus(),n.select("text."+u.default.text+"."+u.default.empty).attr("x",i.width/2).attr("y",i.height/2).text(a.data_empty_label_text).transition().style("opacity",f.length?"0":"1"),i.updateGrid(B),i.updateRegion(B),i.updateBar(D),i.updateLine(D),i.updateArea(D),i.updateMarkerPoint(),i.hasWordCloud()&&i.updateWordCloud&&i.updateWordCloud(),i.hasRadar()&&i.updateRadar&&i.updateRadar(),i.hasChord()&&i.updateChordDiagram&&i.updateChordDiagram(),i.hasTopicRank()&&i.updateTopicRank&&i.updateTopicRank(),i.hasNetwork()&&i.updateNetwork&&i.updateNetwork(),i.hasDendrogram()&&i.updateDendrogram&&i.updateDendrogram(),i.hasSunburst()&&i.updateSunburst&&i.updateSunburst(),i.hasPack()&&i.updatePack&&i.updatePack(),i.hasTreemap()&&i.updateTreemap&&i.updateTreemap(),i.hasBubbleCluster()&&i.updateBubbleCluster&&i.updateBubbleCluster(),i.hasMap()&&i.updateMap&&i.updateMap(),i.hasBoxplot()&&i.updateBoxplot&&i.updateBoxplot(),i.hasCandlestick()&&i.updateCandlestick&&i.updateCandlestick(),i.hasDataLabel()&&i.updateText(D),i.updateTitle&&i.updateTitle(),i.redrawArc&&i.redrawArc(B,D,w),i.updateBackgroundSize&&i.updateBackgroundSize(),a.subchart_show&&i.redrawSubchart&&i.redrawSubchart(x,z,B,D,o,s,l),n.selectAll("."+u.default.selectedMarkerPoints).filter(i.isBarType.bind(i)).selectAll("circle").remove(),a.interaction_enabled&&!t.flow&&P&&(i.redrawEventRect(),i.updateZoom&&i.updateZoom()),i.updateCircleY();var q=(i.config.axis_rotated?i.circleY:i.circleX).bind(i),j=(i.config.axis_rotated?i.circleX:i.circleY).bind(i);t.flow&&(h=i.generateFlow({targets:f,flow:t.flow,duration:t.flow.duration,drawBar:F,drawLine:N,drawArea:O,cx:q,cy:j,xv:g,xForText:Z,yForText:X})),(B||h)&&i.isTabVisible()?(0,r.transition)().duration(B).each(function(){d=i.generateWait(),[i.redrawBar(F,!0),i.redrawLine(N,!0),i.redrawArea(O,!0),i.redrawMarkerPoint(q,j,!0,h),i.redrawText(Z,X,t.flow,!0),i.redrawRegion(!0),i.redrawGrid(!0)].reduce(function(t,e){return e.forEach(function(e){t.push(e)}),t},[]).forEach(function(t){d.add(t)})}).call(d,function(){h&&h(),a.onrendered&&a.onrendered.call(i)}):(i.redrawBar(F),i.redrawLine(N),i.redrawArea(O),i.redrawMarkerPoint(q,j),i.redrawText(Z,X,t.flow),i.redrawRegion(),i.redrawGrid(),i.redrawWordCloud(),i.redrawRadar(),i.redrawTopicRank(),i.redrawNetwork(),i.redrawChordDiagram(),i.redrawDendrogram(),i.redrawSunburst(),i.redrawPack(),i.redrawTreemap(),i.redrawBubbleCluster(),i.hasBoxplot()&&i.redrawBoxplot&&i.redrawBoxplot(),i.hasCandlestick()&&i.redrawCandlestick&&i.redrawCandlestick(),i.redrawTitle(),i.redrawMap(),a.onrendered&&a.onrendered.call(i)),i.mapToIds(i.data.targets).forEach(function(t){i.withoutFadeIn[t]=!0})},ChartInternal.prototype.updateAndRedraw=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this,i=e.config,n=void 0;t.withTransition=(0,c.getOption)(t,"withTransition",!0),t.withTransform=(0,c.getOption)(t,"withTransform",!1),t.withLegend=(0,c.getOption)(t,"withLegend",!1),t.withUpdateXDomain=!0,t.withUpdateOrgXDomain=!0,t.withTransitionForExit=!1,t.withTransitionForTransform=(0,c.getOption)(t,"withTransitionForTransform",t.withTransition),e.updateSizes(),t.withLegend&&i.legend_show||(n=e.axis.generateTransitions(t.withTransitionForAxis?i.transition_duration:0),e.updateScales(),e.updateSvgSize(),e.transformAll(t.withTransitionForTransform,n)),e.redraw(t,n)},ChartInternal.prototype.redrawWithoutRescale=function(){this.redraw({withY:!1,withSubchart:!1,withEventRect:!1,withTransitionForAxis:!1})},ChartInternal.prototype.isTimeSeries=function(){return"timeseries"===this.config.axis_x_type},ChartInternal.prototype.isCategorized=function(){return this.config.axis_x_type.indexOf("category")>=0},ChartInternal.prototype.isBoxplot=function(){return"boxplot"===this.config.data_type},ChartInternal.prototype.isCandlestick=function(){return"candlestick"===this.config.data_type},ChartInternal.prototype.isCustomX=function(){var t=this,e=t.config;return!t.isTimeSeries()&&(e.data_x||(0,c.notEmpty)(e.data_xs))},ChartInternal.prototype.isTimeSeriesY=function(){return"timeseries"===this.config.axis_y_type},ChartInternal.prototype.isLogarithmicY=function(){return"logarithmic"===this.config.axis_y_type},ChartInternal.prototype.isLogarithmicX=function(){return"logarithmic"===this.config.axis_x_type},ChartInternal.prototype.getTranslate=function(t){var e=this,i=e.config,n=void 0,a=void 0;return"main"===t?(n=(0,c.asHalfPixel)(e.margin.left),a=(0,c.asHalfPixel)(e.margin.top)):"context"===t?(n=(0,c.asHalfPixel)(e.margin2.left),a=(0,c.asHalfPixel)(e.margin2.top)):"legend"===t?(n=e.margin3.left,a=e.margin3.top):"x"===t?(n=0,a=i.axis_rotated?0:e.height):"y"===t?(n=0,a=i.axis_rotated?e.height:0):"y2"===t?(n=i.axis_rotated?0:e.width,a=i.axis_rotated?1:0):"subx"===t?(n=0,a=i.axis_rotated?0:e.height2):("arc"===t||"wordcloud"===t||"dendrogram"===t||"pack"===t||"chorddiagram"===t||"sunburst"===t)&&(n=e.arcWidth/2,a=e.arcHeight/2),"translate("+n+", "+a+")"},ChartInternal.prototype.initialOpacity=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?"1":"0"},ChartInternal.prototype.initialOpacityForMarkerPoint=function(t){return null!==t.value&&this.withoutFadeIn[t.id]?this.opacityForMarkerPoint(t):"0"},ChartInternal.prototype.opacityForMarkerPoint=function(t){var e=this.config.point_show?"1":"0";return(0,c.isValue)(t.value)?this.isBubbleType(t)||this.isScatterType(t)?"0.5":e:"0"},ChartInternal.prototype.opacityForText=function(){return this.hasDataLabel()?"1":"0"},ChartInternal.prototype.xx=function(t){return this.config.zoom_enabled&&this.zoomScale?t?this.zoomScale(t.x):null:t?this.x(t.x):null},ChartInternal.prototype.xv=function(t){var e=this,i=t.value;return e.isTimeSeries()?i=e.parseDate(t.value):e.isCategorized()&&(0,c.isString)(t.value)&&(i=e.config.axis_x_categories.indexOf(t.value)),Math.ceil(e.x(i))},ChartInternal.prototype.yv=function(t){var e=this,i=t.axis&&"y2"===t.axis?e.y2:e.y;return Math.ceil(i(t.value))},ChartInternal.prototype.subxx=function(t){return t?this.subX(t.x):null},ChartInternal.prototype.transformMain=function(t,e){var i=this,n=void 0,a=void 0,r=void 0;e&&e.axisX?n=e.axisX:(n=i.main.select("."+u.default.axisX),t&&(n=n.transition())),e&&e.axisY?a=e.axisY:(a=i.main.select("."+u.default.axisY),t&&(a=a.transition())),e&&e.axisY2?r=e.axisY2:(r=i.main.select("."+u.default.axisY2),t&&(r=r.transition())),(t?i.main.transition():i.main).attr("transform",i.getTranslate("main")),n.attr("transform",i.getTranslate("x")),a.attr("transform",i.getTranslate("y")),r.attr("transform",i.getTranslate("y2")),i.main.select("."+u.default.chartArcs).attr("transform",i.getTranslate("arc"))},ChartInternal.prototype.transformAll=function(t,e){var i=this;i.transformMain(t,e),i.config.subchart_show&&i.transformContext(t,e),i.legend&&i.transformLegend(t)},ChartInternal.prototype.updateSvgSize=function(){var t=this,e=t.svg.select("."+u.default.brush+" .overlay"),i=e.size()?e.attr("height"):0;t.svg.attr("width",t.currentWidth).attr("height",t.currentHeight),t.svg.selectAll(["#"+t.clipId,"#"+t.clipIdForGrid]).select("rect").attr("width",t.width).attr("height",t.height),t.svg.select("#"+t.clipIdForXAxis).select("rect").attr("x",t.getXAxisClipX.bind(t)).attr("y",t.getXAxisClipY.bind(t)).attr("width",t.getXAxisClipWidth.bind(t)).attr("height",t.getXAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForYAxis).select("rect").attr("x",t.getYAxisClipX.bind(t)).attr("y",t.getYAxisClipY.bind(t)).attr("width",t.getYAxisClipWidth.bind(t)).attr("height",t.getYAxisClipHeight.bind(t)),t.svg.select("#"+t.clipIdForSubchart).select("rect").attr("width",t.width).attr("height",i),t.svg.select("."+u.default.zoomRect).attr("width",t.width).attr("height",t.height),t.selectChart.style("max-height",t.currentHeight+"px"),t.brush&&t.brush.scale(t.subX,i)},ChartInternal.prototype.updateDimension=function(t){var e=this;t||(e.config.axis_rotated?(e.axes.x.call(e.xAxis),e.axes.subx.call(e.subXAxis)):(e.axes.y.call(e.yAxis),e.axes.y2.call(e.y2Axis))),e.updateSizes(),e.updateScales(t),e.updateSvgSize(),e.transformAll(!1)},ChartInternal.prototype.observeInserted=function(t){var e=this;if("undefined"==typeof MutationObserver)return void(console&&console.error&&console.error("MutationObserver not defined."));var i=new MutationObserver(function(n){n.forEach(function(n){"childList"===n.type&&n.previousSibling&&(i.disconnect(),e.intervalForObserveInserted=window.setInterval(function(){t.node().parentNode&&(window.clearInterval(e.intervalForObserveInserted),e.updateDimension(),e.brush&&e.brush.update(),e.config.oninit.call(e),e.redraw({withTransform:!0,withUpdateXDomain:!0,withUpdateOrgXDomain:!0,withTransition:!1,withTransitionForTransform:!1,withLegend:!0}),t.transition().style("opacity","1"))},10))})});i.observe(t.node(),{attributes:!0,childList:!0,characterData:!0})},ChartInternal.prototype.bindResize=function(){var t=this,e=t.config;t.resizeFunction=t.generateResize(),t.resizeFunction.add(function(){e.onresize.call(t)}),e.resize_auto&&t.resizeFunction.add(function(){void 0!==t.resizeTimeout&&window.clearTimeout(t.resizeTimeout),t.resizeTimeout=window.setTimeout(function(){delete t.resizeTimeout,t.api.flush()},100)}),t.resizeFunction.add(function(){e.onresized.call(t)}),(0,c.addEvent)(window,"resize",t.resizeFunction)},ChartInternal.prototype.generateResize=function(){function callResizeFunctions(){t.forEach(function(t){return t()})}var t=[];return callResizeFunctions.add=function(e){t.push(e)},callResizeFunctions.remove=function(e){for(var i=0;i<t.length;i++)if(t[i]===e){t.splice(i,1);break}},callResizeFunctions},ChartInternal.prototype.endall=function(t,e){var i=0;t.each(function(){return++i}).on("end",function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];--i||e.apply.apply(e,[this].concat(n))})},ChartInternal.prototype.generateWait=function(){var t=[],e=function(e,i){function loop(){var e=0;t.forEach(function(t){if(t.empty())return void(e+=1);try{t.transition()}catch(t){e+=1}}),e===t.length?(clearTimeout(n),i&&i()):n=setTimeout(loop,20)}var n=void 0;loop()};return e.add=function(e){Array.isArray(e)?t=[].concat(t,e):t.push(e)},e},ChartInternal.prototype.parseDate=function(t){var e=this,i=void 0;return t instanceof Date?i=t:(0,c.isString)(t)?i=e.dataTimeFormat(e.config.data_xFormat)(t):"number"==typeof t&&!isNaN(t)&&(i=new Date(+t)),(!i||isNaN(+i))&&console&&console.error&&console.error("Failed to parse x '"+t+"' to Date object"),i},ChartInternal.prototype.isTabVisible=function(){var t=void 0;return void 0===document.hidden?void 0===document.mozHidden?void 0===document.msHidden?void 0!==document.webkitHidden&&(t="webkitHidden"):t="msHidden":t="mozHidden":t="hidden",!document[t]},ChartInternal.prototype.convertInputType=function(){var t=this,e=t.config,i=!!e.interaction_inputType_mouse&&"onmouseover"in window,n=!1;return e.interaction_inputType_touch&&(n="ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),n&&"touch"||i&&"mouse"||null},ChartInternal.prototype.initLegendAlign=function(){var t=this,e=t.config;(0,c.notEmpty)(e.legend_align)&&(e.legend_position="bottom")},ChartInternal.prototype.initLegendVAlign=function(){var t=this,e=t.config;(0,c.notEmpty)(e.legend_valign)&&(e.legend_position="right")},ChartInternal}();e.default=d,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n={target:"rb-target",chart:"rb-chart",chartGroup:"rb-chart-group",chartLine:"rb-chart-line",chartLines:"rb-chart-lines",chartBar:"rb-chart-bar",chartBars:"rb-chart-bars",chartText:"rb-chart-text",chartTexts:"rb-chart-texts",chartWordClouds:"rb-chart-word-clouds",chartBoxplot:{chart:"rb-chart-box-plot",IRQ:"boxplot-IRQ",lines:"boxplot-lines",outliers:"boxplot-outliers",texts:"boxplot-texts",text:{line:"text-line",outlier:"text-outlier",quartile:"text-quartile"}},chartCandlestick:{chart:"rb-chart-candlestick",increasing:"candlestick-increasing",decreasing:"candelstick-decreasing"},chartRadar:{chart:"rb-chart-radar",text:"rb-chart-radar-text",levels:"rb-chart-radar-levels",level:"rb-chart-radar-level",polygons:"rb-chart-radar-polygon",dots:{dots:"rb-chart-radar-dots",tooltip:"rb-chart-radar-dots-tooltip",data:"rb-chart-raddar-dots-data"},axes:"rb-chart-radar-axes",legend:"rb-chart-radar-legend",series:"rb-chart-radar-series"},chartPack:{chart:"rb-chart-pack",nodes:"pack-nodes",node:"pack-node",root:"node--root",leaf:"node--leaf",labels:"pack-labels",label:"pack-label"},chartTreemap:{chart:"rb-chart-treemap",cells:"treemap-cells",cell:"treemap-cell",labels:"treemap-labels",label:"treemap-label"},diagramChord:{chord:"rb-diagram-chord",tooltip:"rb-diagram-chord-tooltip",ribbons:"rb-diagram-chord-ribbons",ribbon:"chord-ribbon",groups:"rb-diagram-chord-groups",group:"chord-group",ticks:"rb-diagram-chord-ticks",tick:"rb-diagram-chord-tick",chordText:"chord-text"},chartAnimation:"rb-animation",chartArc:"rb-chart-arc",chartArcs:"rb-chart-arcs",chartArcsTitle:"rb-chart-arcs-title",chartArcsBackground:"rb-chart-arcs-background",chartArcsGaugeUnit:"rb-chart-arcs-gauge-unit",chartArcsGaugeMax:"rb-chart-arcs-gauge-max",chartArcsGaugeMin:"rb-chart-arcs-gauge-min",chartBackground:"rb-chart-background",chartPlotBackground:"rb-chart-plot-background",chartBackgroundImage:"rb-chart-background-image",chartPlotBackgroundImage:"rb-chart-plot-background-image",chartTopicRank:"rb-chart-topic-rank",chartDendrogram:"rb-chart-dendrogram",chartBubbleCluster:"rb-chart-bubble-cluster",chartMap:"rb-chart-map",chartNetwork:"rb-chart-network",chartSunburst:"rb-chart-sunburst",selectedMarkerPoint:"rb-selected-marker-point",selectedMarkerPoints:"rb-selected-marker-points",eventRect:"rb-event-rect",eventRects:"rb-event-rects",eventRectsSingle:"rb-event-rects-single",eventRectsMultiple:"rb-event-rects-multiple",zoomRect:"rb-zoom-rect",brush:"rb-brush",focused:"rb-focused",defocused:"rb-defocused",region:"rb-region",regions:"rb-regions",regionsRect:"rb-regions-rect",regionsImage:"rb-regions-image",regionsRectClipPath:"rb-regions-rect-clip-path",title:"rb-title",subTitle:"rb-sub-title",tooltipContainer:"rb-tooltip-container",tooltip:{grouped:"rb-tooltip",single:"rb-tooltip-single"},tooltipName:"rb-tooltip-name",shape:"rb-shape",shapes:"rb-shapes",line:"rb-line",lines:"rb-lines",bar:"rb-bar",bars:"rb-bars",markerPoint:"rb-marker-point",markerPoints:"rb-marker-points",highlightMarkerPoint:"rb-highlight-marker-point",arc:"rb-arc",arcs:"rb-arcs",area:"rb-area",areas:"rb-areas",empty:"rb-empty",labelGroup:"rb-label-group",labelRect:"rb-label-rect",text:"rb-text",texts:"rb-texts",gaugeValue:"rb-gauge-value",grid:"rb-grid",gridLines:"rb-grid-lines",xgrid:"rb-xgrid",xgrids:"rb-xgrids",xgridLine:"rb-xgrid-line",xgridLines:"rb-xgrid-lines",xgridFocus:"rb-xgrid-focus",ygrid:"rb-ygrid",ygrids:"rb-ygrids",ygridLine:"rb-ygrid-line",ygridLines:"rb-ygrid-lines",ygridFocus:"rb-ygrid-focus",axis:"rb-axis",axisX:"rb-axis-x",axisXLabel:"rb-axis-x-label",axisXLabelBackground:"rb-axis-x-label-background",axisXLabelGroup:"rb-axis-x-label-group",axisY:"rb-axis-y",axisYLabel:"rb-axis-y-label",axisYLabelBackground:"rb-axis-y-label-background",axisYLabelGroup:"rb-axis-y-label-group",axisY2:"rb-axis-y2",axisY2Label:"rb-axis-y2-label",axisY2LabelBackground:"rb-axis-y2-label-background",axisY2LabelGroup:"rb-axis-y2-label-group",legendBackground:"rb-legend-background",legendItem:"rb-legend-item",legendItems:"rb-legend-items",legendItemEvent:"rb-legend-item-event",legendItemTile:"rb-legend-item-tile",legendItemImage:"rb-legend-item-image",legendItemHidden:"rb-legend-item-hidden",legendItemFocused:"rb-legend-item-focused",drillDownButton:"rb-drilldown-button",exportMain:"rb-export-main",exportDropdown:"rb-export-dropdown",exportIcon:"rb-export-icon",exportPrint:"rb-export-print",exportMenu:"rb-export-menu",exportItem:"rb-export-item",exportBackground:"rb-bgcolor-export",dragarea:"rb-dragarea",EXPANDED:"_expanded_",SELECTED:"_selected_",INCLUDED:"_included_"};e.default=n,t.exports=e.default},function(e,i){e.exports=t},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var n=i(6),a=_interopRequireDefault(n),r=i(1),o=_interopRequireDefault(r),s=function Chart(t){(0,a.default)(this,Chart);var e=new o.default(this);this.internal=e,e.loadConfig(t),e.beforeInit(t),e.init(),e.afterInit(t),function bindThis(t,e,i){Object.keys(t).forEach(function(n){e[n]=t[n].bind(i),Object.keys(t[n]).length&&bindThis(t[n],e[n],i)})}(Chart.prototype,this,this)};e.default=s,t.exports=e.default},function(t,e,i){"use strict";function _typeof(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":typeof t}e.__esModule=!0,e.default=function(t){return t&&"undefined"!=typeof Symbol&&t.constructor===Symbol?"symbol":void 0===t?"undefined":_typeof(t)}},function(t,e,i){"use strict";e.__esModule=!0,e.default=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}e.__esModule=!0;var n=i(5),a=_interopRequireDefault(n),r=i(6),o=_interopRequireDefault(r),s=i(3),l=i(0),u=i(8),c=_interopRequireDefault(u),d=i(2),h=_interopRequireDefault(d),p=function(){function Axis(t){(0,o.default)(this,Axis),this.owner=t}return Axis.prototype.init=function(){var t=this.owner,e=t.config,i=t.main;t.axes.x=i.append("g").attr("class",h.default.axis+" "+h.default.axisX).attr("clip-path",t.clipPathForXAxis).attr("transform",t.getTranslate("x")).style("visibility",e.axis_x_show?"visible":"hidden");var n=t.axes.x.append("g").attr("class",h.default.axisXLabelGroup);n.append("rect").attr("class",h.default.axisXLabelBackground).style("fill","none"),n.append("text").attr("class",h.default.axisXLabel).attr("transform",e.axis_rotated?"rotate(-90)":"").style("text-anchor",this.textAnchorForXAxisLabel.bind(this)),t.axes.y=i.append("g").attr("class",h.default.axis+" "+h.default.axisY).attr("clip-path",e.axis_y_inner?"":t.clipPathForYAxis).attr("transform",t.getTranslate("y")).style("visibility",e.axis_y_show?"visible":"hidden");var a=t.axes.y.append("g").attr("class",h.default.axisYLabelGroup);a.append("rect").attr("class",h.default.axisYLabelBackground).style("fill","none"),a.append("text").attr("class",h.default.axisYLabel).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForYAxisLabel.bind(this)),t.axes.y2=i.append("g").attr("class",h.default.axis+" "+h.default.axisY2).attr("transform",t.getTranslate("y2")).style("visibility",e.axis_y2_show?"visible":"hidden");var r=t.axes.y2.append("g").attr("class",h.default.axisY2LabelGroup);r.append("rect").attr("class",h.default.axisY2LabelBackground).style("fill","none"),r.append("text").attr("class",h.default.axisY2Label).attr("transform",e.axis_rotated?"":"rotate(-90)").style("text-anchor",this.textAnchorForY2AxisLabel.bind(this))},Axis.prototype.getXAxis=function(t,e,i,n,a,r,o){var u=this.owner,d=u.config,h={isCategory:u.isCategorized(),withOuterTick:a,withoutTransition:r,tickMultiline:d.axis_x_tick_multiline,tickWidth:d.axis_x_tick_width,tickTextRotate:o?0:d.axis_x_tick_rotate,lineColor:d.axis_x_line_color,lineWidthSize:d.axis_x_line_size,lineStyle:d.axis_x_line_style,tickColor:d.axis_x_tick_color,tickWidthSize:d.axis_x_tick_size,tickLabelColor:d.axis_x_tick_labels_color,tickLabelFontSize:d.axis_x_tick_labels_font_size,tickLabelFontWeight:d.axis_x_tick_labels_font_weight,tickLabelFontFamily:d.axis_x_tick_labels_font_family,tickLabelAlign:d.axis_x_tick_labels_align,tickLabelStyle:d.axis_x_tick_labels_style,tickLabelImage:d.axis_x_tick_labels_image,tickLabelImages:d.axis_x_tick_labels_images,tickLabelStaggerLines:d.axis_x_tick_labels_staggerLines},p=(0,c.default)(h).scale(t).orient(e),f=n;if(u.isTimeSeries()&&n&&"function"!=typeof n&&(f=n.map(function(t){return u.parseDate(t)})),u.isLogarithmicX()&&(0,l.isUndefined)(n)){var g=u.data.minMaxX.max+1,_=u.data.minMaxX.min-1;f=(0,s.range)(_,g,2).map(function(t){return Math.round(t)})}return p.tickFormat(i).tickValues(f),u.isCategorized()&&(p.tickCentered(d.axis_x_tick_centered),(0,l.isEmpty)(d.axis_x_tick_culling)&&(d.axis_x_tick_culling=!1)),(0,l.notEmpty)(d.axis_x_tick_labels_staggerLines)&&(0,l.isEmpty)(d.padding_bottom)&&(d.padding_bottom=10*d.axis_x_tick_labels_staggerLines),d.padding_bottom=(0,l.notEmpty)(d.axis_x_label)&&(0,l.notEmpty)(d.axis_x_label.font)&&(0,l.notEmpty)(d.axis_x_label.font.size)?d.axis_x_label.font.size+5:15,p},Axis.prototype.updateXAxisTickValues=function(t,e){var i=this.owner,n=i.config,a=void 0;if(i.isLogarithmicX()){var r=i.data.minMaxX.max+1,o=i.data.minMaxX.min-1;a=(0,s.range)(o,r,2).map(function(t){return Math.round(t)})}return(n.axis_x_tick_fit||n.axis_x_tick_count)&&(a=this.generateTickValues(i.mapTargetsToUniqueXs(t),n.axis_x_tick_count,i.isTimeSeries())),e?e.tickValues(a):(i.xAxis.tickValues(a),i.subXAxis.tickValues(a)),a},Axis.prototype.getYAxis=function(t,e,i,n,a,r,o){var u=this.owner,d=u.config,h={withOuterTick:a,withoutTransition:r,tickTextRotate:o?0:d.axis_y_tick_rotate,lineColor:d.axis_y_line_color,lineWidthSize:d.axis_y_line_size,lineStyle:d.axis_y_line_style,tickColor:d.axis_y_tick_color,tickWidthSize:d.axis_y_tick_size,tickLabelColor:d.axis_y_tick_labels_color,tickLabelFontSize:d.axis_y_tick_labels_font_size,tickLabelFontWeight:d.axis_y_tick_labels_font_weight,tickLabelFontFamily:d.axis_y_tick_labels_font_family,tickLabelAlign:d.axis_y_tick_labels_align,tickLabelStyle:d.axis_y_tick_labels_style},p=i;u.isLogarithmicY()&&(0,l.isUndefined)(i)&&(p=function(t){return function(t){return+t===t&&t%1!=0}(Math.pow(10,t))?Math.pow(10,t).toFixed(d.axis_y_tick_numberFixed):Math.pow(10,t)});var f=(0,c.default)(h).scale(t).orient(e).tickFormat(p);if(u.isTimeSeriesY())f.ticks(d.axis_y_tick_time_value);else if(u.isLogarithmicY()&&(0,l.isUndefined)(n)){var g=u.data.minMaxY.max+1,_=u.data.minMaxY.min-1,m=(0,s.range)(_,g,2).map(function(t){return Math.round(t)});f.tickValues(m)}else f.tickValues(n);return f},Axis.prototype.getY2Axis=function(t,e,i,n,a,r,o){var s=this.owner,l=s.config,u={withOuterTick:a,withoutTransition:r,tickTextRotate:o?0:l.axis_y_tick_rotate,lineColor:l.axis_y2_line_color,lineWidthSize:l.axis_y2_line_size,lineStyle:l.axis_y2_line_style,tickColor:l.axis_y2_tick_color,tickWidthSize:l.axis_y2_tick_size,tickLabelColor:l.axis_y2_tick_labels_color,tickLabelFontSize:l.axis_y2_tick_labels_font_size,tickLabelFontWeight:l.axis_y2_tick_labels_font_weight,tickLabelFontFamily:l.axis_y2_tick_labels_font_family,tickLabelAlign:l.axis_y2_tick_labels_align,tickLabelStyle:l.axis_y2_tick_labels_style},d=(0,c.default)(u).scale(t).orient(e).tickFormat(i);return s.isTimeSeriesY()?d.ticks(l.axis_y_tick_time_value):d.tickValues(n),d},Axis.prototype.getId=function(t){var e=this.owner.config;return t in e.data_axes?e.data_axes[t]:"y"},Axis.prototype.getXAxisTickFormat=function(){var t=this.owner,e=t.config,i=void 0;return i=t.isTimeSeries()?t.defaultAxisTimeFormat:t.isBoxplot()?t.boxplotCategoryName:t.isLogarithmicX()?function(t){return function(t){return+t===t&&t%1!=0}(Math.pow(10,t))?Math.pow(10,t).toFixed(e.axis_x_tick_numberFixed):Math.pow(10,t)}:t.isCategorized()?t.categoryName:function(t){return t<0?t.toFixed(0):t},e.axis_x_tick_format&&((0,l.isFunction)(e.axis_x_tick_format)?i=e.axis_x_tick_format:t.isTimeSeries()&&(i=function(i){return i?t.axisTimeFormat(e.axis_x_tick_format)(i):""})),(0,l.isFunction)(i)?function(e){return i.call(t,e)}:i},Axis.prototype.getTickValues=function(t,e){return t||(e?e.tickValues():void 0)},Axis.prototype.getXAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_x_tick_values,this.owner.xAxis)},Axis.prototype.getYAxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y_tick_values,this.owner.yAxis)},Axis.prototype.getY2AxisTickValues=function(){return this.getTickValues(this.owner.config.axis_y2_tick_values,this.owner.y2Axis)},Axis.prototype.getLabelOptionByAxisId=function(t){var e=this.owner,i=e.config,n=void 0;return"y"===t?n=i.axis_y_label:"y2"===t?n=i.axis_y2_label:"x"===t&&(n=i.axis_x_label),n},Axis.prototype.getLabelText=function(t){var e=this.getLabelOptionByAxisId(t);return(0,l.isString)(e)?e:e?e.text:null},Axis.prototype.setLabelText=function(t,e){var i=this.owner,n=i.config,a=this.getLabelOptionByAxisId(t);(0,l.isString)(a)?"y"===t?n.axis_y_label=e:"y2"===t?n.axis_y2_label=e:"x"===t&&(n.axis_x_label=e):a&&(a.text=e)},Axis.prototype.getLabelPosition=function(t,e){var i=this.getLabelOptionByAxisId(t),n="object"===(void 0===i?"undefined":(0,a.default)(i))&&i.position?i.position:e;return{isInner:!!~n.indexOf("inner"),isOuter:!!~n.indexOf("outer"),isLeft:!!~n.indexOf("left"),isCenter:!!~n.indexOf("center"),isRight:!!~n.indexOf("right"),isTop:!!~n.indexOf("top"),isMiddle:!!~n.indexOf("middle"),isBottom:!!~n.indexOf("bottom")}},Axis.prototype.getXAxisLabelPosition=function(){return this.getLabelPosition("x",this.owner.config.axis_rotated?"inner-top":"inner-right")},Axis.prototype.getYAxisLabelPosition=function(){return this.getLabelPosition("y",this.owner.config.axis_rotated?"inner-right":"inner-top")},Axis.prototype.getY2AxisLabelPosition=function(){return this.getLabelPosition("y2",this.owner.config.axis_rotated?"inner-right":"inner-top")},Axis.prototype.getLabelPositionById=function(t){return"y2"===t?this.getY2AxisLabelPosition():"y"===t?this.getYAxisLabelPosition():this.getXAxisLabelPosition()},Axis.prototype.textForXAxisLabel=function(){return this.getLabelText("x")},Axis.prototype.textForYAxisLabel=function(){return this.getLabelText("y")},Axis.prototype.textForY2AxisLabel=function(){return this.getLabelText("y2")},Axis.prototype.xForAxisLabel=function(t,e){var i=this.owner;return t?e.isLeft?0:e.isCenter?i.width/2:i.width:e.isBottom?-i.height:e.isMiddle?-i.height/2:0},Axis.prototype.dxForAxisLabel=function(t,e){return t?e.isLeft?"0.5em":e.isRight?"-0.5em":"0":e.isTop?"-0.5em":e.isBottom?"0.5em":"0"},Axis.prototype.textAnchorForAxisLabel=function(t,e){return t?e.isLeft?"start":e.isCenter?"middle":"end":e.isBottom?"start":e.isMiddle?"middle":"end"},Axis.prototype.xForXAxisLabel=function(){return this.xForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.xForYAxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.xForY2AxisLabel=function(){return this.xForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.dxForXAxisLabel=function(){return this.dxForAxisLabel(!this.owner.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.dxForYAxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.dxForY2AxisLabel=function(){return this.dxForAxisLabel(this.owner.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.dyForXAxisLabel=function(){var t=this.owner,e=t.config,i=this.getXAxisLabelPosition();return e.axis_rotated?i.isInner?"1.2em":-25-this.getMaxTickWidth("x"):i.isInner?"-0.5em":e.axis_x_height?e.axis_x_height-10:(0,l.notEmpty)(e.axis_x_label.font)&&(0,l.notEmpty)(e.axis_x_label.font.size)?""+(e.axis_x_label.font.size+25):"3.5em"},Axis.prototype.dyForYAxisLabel=function(){var t=this.owner,e=this.getYAxisLabelPosition();return t.config.axis_rotated?e.isInner?"-0.5em":"4em":e.isInner?"1.2em":-10-(t.config.axis_y_inner?0:this.getMaxTickWidth("y")+10)},Axis.prototype.dyForY2AxisLabel=function(){var t=this.owner,e=this.getY2AxisLabelPosition();return t.config.axis_rotated?e.isInner?"1.2em":"-2.2em":e.isInner?"-0.5em":15+(t.config.axis_y2_inner?0:this.getMaxTickWidth("y2")+15)},Axis.prototype.textAnchorForXAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(!t.config.axis_rotated,this.getXAxisLabelPosition())},Axis.prototype.textAnchorForYAxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getYAxisLabelPosition())},Axis.prototype.textAnchorForY2AxisLabel=function(){var t=this.owner;return this.textAnchorForAxisLabel(t.config.axis_rotated,this.getY2AxisLabelPosition())},Axis.prototype.getMaxTickWidth=function(t,e){var i=this.owner,n=i.config,a=0,r=void 0,o=void 0;if(e&&i.currentMaxTickWidths[t])return i.currentMaxTickWidths[t];if(i.svg){var l=i.filterTargetsToShow(i.data.targets),u=void 0,c=void 0;"y"===t?(u=i.y.copy().domain(i.getYDomain(l,"y")),c=this.getYAxis(u,i.yOrient,n.axis_y_tick_format,i.yAxisTickValues,!1,!0,!0)):"y2"===t?(u=i.y2.copy().domain(i.getYDomain(l,"y2")),c=this.getYAxis(u,i.y2Orient,n.axis_y2_tick_format,i.y2AxisTickValues,!1,!0,!0)):(u=i.x.copy().domain(i.getXDomain(l)),c=this.getXAxis(u,i.xOrient,i.xAxisTickFormat,i.xAxisTickValues,!1,!0,!0),this.updateXAxisTickValues(l,c)),r=(0,s.select)("body").append("div").classed("rb",!0),o=r.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px"),o.append("g").call(c).each(function(){(0,s.select)(this).selectAll("text").each(function(){var t=this.getBoundingClientRect();a<t.width&&(a=t.width)}),r.remove()})}return i.currentMaxTickWidths[t]=a<=0?i.currentMaxTickWidths[t]:a,i.currentMaxTickWidths[t]},Axis.prototype.updateLabels=function(t){var e=this.owner,i=e.main.select("."+h.default.axisX+" ."+h.default.axisXLabel),n=e.main.select("."+h.default.axisY+" ."+h.default.axisYLabel),a=e.main.select("."+h.default.axisY2+"  ."+h.default.axisY2Label);this.setAxisLabelColor("x",i),this.setAxisLabelColor("y",n),this.setAxisLabelColor("y2",a),this.setAxisLabelFont("x",i),this.setAxisLabelFont("y",n),this.setAxisLabelFont("y2",a),(t?i.transition():i).attr("x",this.xForXAxisLabel.bind(this)).attr("dx",this.dxForXAxisLabel.bind(this)).attr("dy",this.dyForXAxisLabel.bind(this)).text(this.textForXAxisLabel.bind(this)),(t?n.transition():n).attr("x",this.xForYAxisLabel.bind(this)).attr("dx",this.dxForYAxisLabel.bind(this)).attr("dy",this.dyForYAxisLabel.bind(this)).text(this.textForYAxisLabel.bind(this)),(t?a.transition():a).attr("x",this.xForY2AxisLabel.bind(this)).attr("dx",this.dxForY2AxisLabel.bind(this)).attr("dy",this.dyForY2AxisLabel.bind(this)).text(this.textForY2AxisLabel.bind(this)),this.updatePositionBackgroundRect(i,n,a)},Axis.prototype.getPadding=function(t,e,i,n){var a="number"==typeof t?t:t[e];return(0,l.isValue)(a)?"ratio"===t.unit?t[e]*n:this.convertPixelsToAxisPadding(a,n):i},Axis.prototype.convertPixelsToAxisPadding=function(t,e){var i=this.owner;return e*(t/(i.config.axis_rotated?i.width:i.height))},Axis.prototype.generateTickValues=function(t,e,i){var n=t,a=void 0,r=void 0,o=void 0,s=void 0,u=void 0,c=void 0;if(e){var d=(0,l.isFunction)(e)?e():e;if(1===d)n=[t[0]];else if(2===d)n=[t[0],t[t.length-1]];else if(d>2){for(o=d-2,a=t[0],r=t[t.length-1],s=(r-a)/(o+1),n=[a],u=0;u<o;u++)c=+a+s*(u+1),n.push(i?new Date(c):c);n.push(r)}}return i||(n=n.sort(function(t,e){return t-e})),n},Axis.prototype.generateTransitions=function(t){var e=this.owner,i=e.axes;return{axisX:t?i.x.transition().duration(t):i.x,axisY:t?i.y.transition().duration(t):i.y,axisY2:t?i.y2.transition().duration(t):i.y2,axisSubX:t?i.subx.transition().duration(t):i.subx}},Axis.prototype.updatePositionBackgroundRect=function(t,e,i){var n=this.owner,a=t.node().getBBox(),r=e.node().getBBox(),o=i.node().getBBox(),s=n.main.select("."+h.default.axisXLabelBackground),l=n.main.select("."+h.default.axisYLabelBackground),u=n.main.select("."+h.default.axisY2LabelBackground);this.setAxisLabelBackground("x",s),this.setAxisLabelBackground("y",l),this.setAxisLabelBackground("y2",u),this.setAxisLabelBorder("x",s),this.setAxisLabelBorder("y",l),this.setAxisLabelBorder("y2",u),s.attr("width",a.width+5).attr("height",a.height+5).attr("x",a.x-2).attr("y",a.y-3),l.attr("width",r.width+5).attr("height",r.height+5).attr("x",r.x-2).attr("y",r.y-3).attr("transform",e.attr("transform")),u.attr("width",o.width+5).attr("height",o.height+5).attr("x",o.x-2).attr("y",o.y-3).attr("transform",i.attr("transform"))},Axis.prototype.setAxisLabelColor=function(t,e){var i=this.getLabelOptionByAxisId(t);(0,l.isObject)(i)&&(0,l.notEmpty)(i.color)&&e.style("fill",i.color)},Axis.prototype.setAxisLabelBackground=function(t,e){var i=this.getLabelOptionByAxisId(t);(0,l.isObject)(i)&&(0,l.notEmpty)(i.background)&&((0,l.notEmpty)(i.background.color)&&e.style("fill",i.background.color),(0,l.notEmpty)(i.background.opacity)&&e.style("fill-opacity",i.background.opacity.toString()))},Axis.prototype.setAxisLabelBorder=function(t,e){var i=this.getLabelOptionByAxisId(t);(0,l.isObject)(i)&&(0,l.notEmpty)(i.border)&&((0,l.notEmpty)(i.border.color)&&(0,l.notEmpty)(i.border.width)&&e.style("stroke",i.border.color),(0,l.notEmpty)(i.border.radius)&&e.attr("rx",i.border.radius).attr("ry",i.border.radius),(0,l.notEmpty)(i.border.width)&&e.style("stroke-width",i.border.width+"px"),(0,l.notEmpty)(i.border.type)&&(0,l.notEmpty)(i.border.width)&&e.style("stroke-dasharray",(0,l.borderStyle)(i.border.type)),(0,l.notEmpty)(i.border.types)&&(0,l.notEmpty)(i.border.width)&&e.style("stroke-dasharray",i.border.types))},Axis.prototype.setAxisLabelFont=function(t,e){var i=this.getLabelOptionByAxisId(t);(0,l.isObject)(i)&&(0,l.notEmpty)(i.font)&&((0,l.notEmpty)(i.font.size)&&e.style("font-size",i.font.size+"px"),(0,l.notEmpty)(i.font.weight)&&e.style("font-weight",i.font.weight))},Axis.prototype.redraw=function(t,e){var i=this.owner;i.axes.x.style("opacity",e?"0":"1"),i.axes.y.style("opacity",e?"0":"1"),i.axes.y2.style("opacity",e?"0":"1"),i.axes.subx.style("opacity",e?"0":"1"),t.axisX.call(i.xAxis),t.axisY.call(i.yAxis),t.axisY2.call(i.y2Axis),t.axisSubX.call(i.subXAxis)},Axis}();e.default=p,t.exports=e.default},function(t,e,i){"use strict";e.__esModule=!0;var n=i(5),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);e.default=function(){function axisX(t,e){t.attr("transform",function(t){return"translate("+Math.ceil(e(t)+p)+", 0)"})}function axisY(t,e){t.attr("transform",function(t){return"translate(0,"+Math.ceil(e(t))+")"})}function scaleExtent(t){var e=t[0],i=t[t.length-1];return e<i?[e,i]:[i,e]}function generateTicks(t){var e=[];if(t.ticks)return t.ticks.apply(t,h?Array.prototype.slice.call(h):[]).map(function(t){return/(string|number)/.test(void 0===t?"undefined":(0,a.default)(t))&&!isNaN(t)?Math.round(10*t)/10:t});for(var i=t.domain(),n=Math.ceil(i[0]);n<i[1];n++)e.push(n);return e.length>0&&e[0]>0&&e.unshift(e[0]-(e[1]-e[0])),e}function copyScale(){var i=e.copy();if(t.isCategory||!i.domain().length){var n=e.domain();i.domain([n[0],n[1]-1])}return i}function textFormatted(t){var e=d?d(t):t;return void 0===e?"":e}function getSizeFor1Char(t){if(s)return s;var e={h:11.5,w:5.5};return t.select("text").text(textFormatted).each(function(t){var i=this.getBoundingClientRect(),n=textFormatted(t),a=i.height,r=n?i.width/n.length:void 0;a&&r&&(e.h=a,e.w=r)}).text(""),s=e,e}function transitionise(e){return t.withoutTransition?e:e.transition(_)}function setFontLabels(e){(0,o.notEmpty)(t.tickLabelFontSize)&&e.style("font-size",t.tickLabelFontSize+"px"),(0,o.notEmpty)(t.tickLabelFontWeight)&&e.style("font-weight",t.tickLabelFontWeight),(0,o.notEmpty)(t.tickLabelFontFamily)&&e.style("font-family",t.tickLabelFontFamily)}function setColorLabels(e){(0,o.notEmpty)(t.tickLabelColor)&&e.style("fill",t.tickLabelColor)}function setAlignLabels(e){(0,o.notEmpty)(t.tickLabelAlign)&&("left"===t.tickLabelAlign?e.style("text-anchor","end"):"right"===t.tickLabelAlign?e.style("text-anchor","start"):e.style("text-anchor","middle"))}function setStyleLabels(e){if((0,o.notEmpty)(t.tickLabelStyle))for(var i in t.tickLabelStyle)e.style(i,t.tickLabelStyle[i])}function setStaggerLinesLabels(e){if((0,o.notEmpty)(t.tickLabelStaggerLines)){var i=1;e.each(function(){i===t.tickLabelStaggerLines+1&&(i=1);var e=(0,r.select)(this);e.transition().duration(300).attr("y",e.attr("y")*i),i++})}}function axis(a){a.each(function(){function splitTickText(e,i){function split(t,e){o=void 0;for(var i=1;i<e.length;i++)if(" "===e.charAt(i)&&(o=i),r=e.substr(0,i+1),s=B.w*r.length,a<s)return split(t.concat(e.substr(0,o||i)),e.slice(o?o+1:i));return t.concat(e)}var n=textFormatted(e),a=i,r=void 0,o=void 0,s=void 0;return"[object Array]"===Object.prototype.toString.call(n)?n:((!a||a<=0)&&(a=z?95:t.isCategory?Math.ceil(d(h[1])-d(h[0]))-12:110),split([],n+""))}function tspanDy(t,e){var n=B.h;return 0===e&&(n="left"===i||"right"===i?-((D[t.index]-1)*(B.h/2)-3):".71em"),n}var a=(0,r.select)(this);axis.g=a;var s=this.__chart__||e,d=copyScale();this.__chart__=d;var h=c||generateTicks(d),f=a.selectAll(".tick").data(h,d),_=f.enter().insert("g",".domain").attr("class","tick").style("opacity","1"),m=f.exit().remove();f=_.merge(f);var y=transitionise(f).style("opacity","1"),v=void 0,x=void 0,b=void 0,w=e.rangeExtent?e.rangeExtent():scaleExtent(e.range()),L=a.selectAll(".domain").data([0]),T=L.enter().append("path").attr("class","domain").style("fill","none").merge(transitionise(L));if((0,o.notEmpty)(t.lineColor)&&T.style("stroke",t.lineColor),(0,o.notEmpty)(t.lineColor)&&T.style("stroke-width",t.lineWidthSize+"px"),(0,o.notEmpty)(t.lineStyle))for(var k in t.lineStyle)T.style(k,t.lineStyle[k]);_.append("line"),_.append("text");var C=_.select("line"),A=y.select("line").style("stroke",t.tickColor).style("stroke-width",t.tickWidthSize+"px"),P=_.select("text"),M=y.select("text"),S=void 0;((0,o.notEmpty)(t.tickLabelImage)||(0,o.notEmpty)(t.tickLabelImages))&&(_.append("image").style("pointer-events","none").attr("width","15px").attr("height","20px").attr("xmlns:xlink","http://www.w3.org/1999/xlink"),S=y.select("image")),(0,o.notEmpty)(t.tickLabelImage)&&((0,o.notEmpty)(t.tickLabelImage.width)&&S.attr("width",t.tickLabelImage.width+"px"),(0,o.notEmpty)(t.tickLabelImage.height)&&S.attr("height",t.tickLabelImage.height+"px"),S.attr("xlink:href",t.tickLabelImage.url)),(0,o.notEmpty)(t.tickLabelImages)&&S.attr("xlink:href",function(e,i){return(0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])&&(0,o.notEmpty)(t.tickLabelImages[i].url)?t.tickLabelImages[i].url:""}).attr("visibility",function(e,i){return(0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])&&(0,o.notEmpty)(t.tickLabelImages[i].url)?"visible":"hidden"}).attr("width",function(e,i){return(0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])&&(0,o.notEmpty)(t.tickLabelImages[i].width)?t.tickLabelImages[i].width:"15px"}).attr("height",function(e,i){return(0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])&&(0,o.notEmpty)(t.tickLabelImages[i].height)?t.tickLabelImages[i].height:"20px"}),t.isCategory?(p=Math.ceil((d(1)-d(0))/2),x=g?0:p,b=g?p:0):(x=0,p=x);var E=void 0,B=getSizeFor1Char(a.select(".tick")),D=[],I=Math.max(n,0)+u,z="left"===i||"right"===i,R=f.select("text");E=R.selectAll("tspan").data(function(e,i){var n=void 0;return n=t.tickMultiline?splitTickText(e,t.tickWidth):(0,o.isArray)(textFormatted(e))?textFormatted(e).concat():[textFormatted(e)],D[i]=n.length,n.map(function(t){return{index:i,splitted:t}})}),E.exit().remove(),E=E.enter().append("tspan").merge(E).text(function(t){return t.splitted});var O=t.tickTextRotate;if("bottom"===i?(v=axisX,C.attr("y2",n),P.attr("y",I),A.attr("x1",x).attr("x2",x).attr("y2",function(t){var i=e(t)+(g?0:p);return w[0]<i&&i<w[1]?n:0}),M.attr("x",0).attr("y",function(t){return t?11.5-t/15*2.5*(t>0?1:-1):I}(O)).style("text-anchor",function(t){return t?t>0?"start":"end":"middle"}(O)).attr("transform",function(t){return t?"rotate("+t+")":""}(O)),E.attr("x",0).attr("dy",tspanDy).attr("dx",function(t){return t?8*Math.sin(Math.PI*(t/180)):0}(O)),(0,o.notEmpty)(S)&&(S.attr("x",-7.5).attr("y",6),(0,o.notEmpty)(t.tickLabelImage)&&(M.style("fill-opacity","0","important"),(0,o.notEmpty)(t.tickLabelImage.text)&&"visibled"===t.tickLabelImage.text&&M.style("fill-opacity","1","important"),(0,o.notEmpty)(t.tickLabelImage.width)&&S.attr("x",-t.tickLabelImage.width/2),(0,o.notEmpty)(t.tickLabelImage.height)&&S.attr("y",t.tickLabelImage.height/2-4),(0,o.notEmpty)(t.tickLabelImage.position)&&((0,o.notEmpty)(t.tickLabelImage.position.x)&&S.attr("x",t.tickLabelImage.position.x),(0,o.notEmpty)(t.tickLabelImage.position.y)&&S.attr("y",t.tickLabelImage.position.y))),(0,o.notEmpty)(t.tickLabelImages)&&(M.style("fill-opacity",function(e,i){return(0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])?(0,o.notEmpty)(t.tickLabelImages[i].text)&&"visibled"===t.tickLabelImages[i].text?"1":"0":"1"}),S.attr("x",function(e,i){if((0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])){if((0,o.notEmpty)(t.tickLabelImages[i].position)&&(0,o.notEmpty)(t.tickLabelImages[i].position.x))return t.tickLabelImages[i].position.x;if((0,o.notEmpty)(t.tickLabelImages[i].width))return-t.tickLabelImages[i].width/2}return-7.5}).attr("y",function(e,i){if((0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])){if((0,o.notEmpty)(t.tickLabelImages[i].position)&&(0,o.notEmpty)(t.tickLabelImages[i].position.y))return t.tickLabelImages[i].position.y;if((0,o.notEmpty)(t.tickLabelImages[i].height))return t.tickLabelImages[i].height/2-4}return 6}))),T.attr("d","M"+w[0]+","+l+"V0H"+w[1]+"V"+l)):"top"===i?(v=axisX,C.attr("y2",-n),P.attr("y",-I),A.attr("x2",0).attr("y2",-n),M.attr("x",0).attr("y",-I),R.style("text-anchor","middle"),E.attr("x",0).attr("dy","0em"),T.attr("d","M"+w[0]+","+-l+"V0H"+w[1]+"V"+-l)):"left"===i?(v=axisY,C.attr("x2",-n),P.attr("x",-I),A.attr("x2",-n).attr("y1",b).attr("y2",b),M.attr("x",-I).attr("y",p),R.style("text-anchor","end"),E.attr("x",-I).attr("dy",tspanDy),(0,o.notEmpty)(S)&&(S.attr("x",-7.5).attr("y",6),(0,o.notEmpty)(t.tickLabelImage)&&(M.style("fill-opacity","0","important"),(0,o.notEmpty)(t.tickLabelImage.width)&&S.attr("y",-t.tickLabelImage.width/2),(0,o.notEmpty)(t.tickLabelImage.height)&&S.attr("x",-(t.tickLabelImage.height+t.tickLabelImage.width/4)),(0,o.notEmpty)(t.tickLabelImage.position)&&((0,o.notEmpty)(t.tickLabelImage.position.x)&&S.attr("x",t.tickLabelImage.position.x),(0,o.notEmpty)(t.tickLabelImage.position.y)&&S.attr("y",t.tickLabelImage.position.y))),(0,o.notEmpty)(t.tickLabelImages)&&(M.style("fill-opacity",function(e,i){return(0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])?(0,o.notEmpty)(t.tickLabelImages[i].text)&&"visibled"===t.tickLabelImages[i].text?"1":"0":"1"}),S.attr("x",function(e,i){if((0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])){if((0,o.notEmpty)(t.tickLabelImages[i].position)&&(0,o.notEmpty)(t.tickLabelImages[i].position.x))return t.tickLabelImages[i].position.x;if((0,o.notEmpty)(t.tickLabelImages[i].width))return-(t.tickLabelImages[i].height+t.tickLabelImages[i].width/4)}return-7.5}).attr("y",function(e,i){if((0,o.notEmpty)(t.tickLabelImages)&&(0,o.notEmpty)(t.tickLabelImages[i])){if((0,o.notEmpty)(t.tickLabelImages[i].position)&&(0,o.notEmpty)(t.tickLabelImages[i].position.y))return t.tickLabelImages[i].position.y;if((0,o.notEmpty)(t.tickLabelImages[i].height))return-t.tickLabelImages[i].width/2}return 6}))),T.attr("d","M"+-l+","+w[0]+"H0V"+w[1]+"H"+-l)):"right"===i&&(v=axisY,C.attr("x2",n),P.attr("x",I),A.attr("x2",n).attr("y2",0),M.attr("x",I).attr("y",0),R.style("text-anchor","start"),E.attr("x",I).attr("dy",tspanDy),T.attr("d","M"+l+","+w[0]+"H0V"+w[1]+"H"+l)),d.bandwidth){var F=d,N=F.bandwidth()/2;s=function(t){return F(t)+N},d=s}else s.bandwidth?s=d:m.call(v,d);setFontLabels(M),setColorLabels(M),setAlignLabels(M),setStyleLabels(M),setStaggerLinesLabels(M),_.call(v,s),y.call(v,d)})}var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=(0,r.scaleLinear)(),i="bottom",n=6,l=t.withOuterTick?6:0,u=3,c=null,d=void 0,h=void 0,p=0,f=!0,g=void 0,_=void 0;return axis.scale=function(t){return arguments.length?(e=t,axis):e},axis.orient=function(t){return arguments.length?(i=t in{top:1,right:1,bottom:1,left:1}?t+"":"bottom",axis):i},axis.tickFormat=function(t){return arguments.length?(d=t,axis):d},axis.tickCentered=function(t){return arguments.length?(g=t,axis):g},axis.tickOffset=function(){return p},axis.tickInterval=function(){var e=void 0;if(t.isCategory)e=2*p;else{e=(axis.g.select("path.domain").node().getTotalLength()-2*l)/axis.g.selectAll("line").size()}return e===1/0?0:e},axis.ticks=function(){for(var t=arguments.length,e=Array(t),i=0;i<t;i++)e[i]=arguments[i];return e.length?(h=Array.prototype.slice.call(e),axis):h},axis.tickCulling=function(t){return arguments.length?(f=t,axis):f},axis.tickValues=function(t){if("function"==typeof t)c=function(){return t(e.domain())};else{if(!arguments.length)return c;c=t}return this},axis.setTransition=function(t){return _=t,this},axis};var r=i(3),o=i(0),s=void 0;t.exports=e.default},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(1),a=_interopRequireDefault(n),r=i(2),o=_interopRequireDefault(r),s=i(0);(0,s.extend)(a.default.prototype,{initExport:function(){var t=this,e=this,i=void 0,n=e.merge(this.getOptions().exporting,e.config.exporting);if((0,s.isFunction)(this.chartExport)&&n.enabled){var a=function(){e.svg.insert("rect","defs").attr("class",e.CLASS.exportBackground).attr("x","0").attr("y","0").attr("width",e.getCurrentWidth()).attr("height",e.getCurrentHeight()).style("fill","#fff")};e.exporting=e.selectChart.style("position","relative").append("div").attr("class",o.default.exportMain);var r=e.exporting.append("ul").append("li").attr("class",o.default.exportDropdown);r.append("a").attr("class",o.default.exportIcon).on("click",function(){i.style("display","block")}),i=r.append("ul").attr("class",o.default.exportMenu).on("mouseleave",function(){i.style("display","none")}),i.append("li").attr("class",o.default.exportItem+" "+o.default.exportPrint).append("a").text("Print Chart").on("click",function(){i.style("display","none"),window.print()}),i.append("li").attr("class",o.default.exportItem).append("a").text("Download PNG image").on("click",function(){i.style("display","none"),n.mimeType=s.fileFormats.PNG.mimeType,t.chartExport(n)}),i.append("li").attr("class",o.default.exportItem).append("a").text("Download JPG image").on("click",function(){i.style("display","none"),n.mimeType=s.fileFormats.JPG.mimeType,a(),t.chartExport(n)}),i.append("li").attr("class",o.default.exportItem).append("a").text("Download PDF").on("click",function(){i.style("display","none"),n.mimeType=s.fileFormats.PDF.mimeType,a(),t.chartExport(n)})}}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}function _interopRequireWildcard(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}e.__esModule=!0,e.d3=e.rb=void 0;var n=i(3),a=_interopRequireWildcard(n),r=i(4),o=_interopRequireDefault(r),s=i(1),l=_interopRequireDefault(s),u=i(7),c=_interopRequireDefault(u),d=i(0),h=_interopRequireWildcard(d);i(11);var p={version:"1.0.1-snapshot",generate:function(t){return new o.default(t)},chart:{fn:o.default.prototype,internal:{fn:l.default.prototype,axis:{fn:c.default.prototype}}}};for(var f in h)/^__/.test(f)||(l.default.prototype[f]=h[f]);i(12),i(14),i(15),i(16),i(17),i(18),i(19),i(20),i(21),i(22),i(23),i(24),i(25),i(28),i(29),i(30),i(31),i(35),i(36),i(37),i(38),i(39),i(40),i(41),i(42),i(45),i(49),i(50),i(51),i(52),i(53),i(54),i(55),i(56),i(57),i(58),i(59),i(60),i(61),i(62),i(63),i(64),i(65),i(66),i(67),i(9),i(68),i(70),i(71),i(72),i(73),i(74),i(75),i(76),i(77),i(78),i(79),i(80),i(81),i(82),i(83),i(84),i(85),i(86),i(88),i(8),i(89),i(90),i(91),e.rb=p,e.d3=a},function(t,e){},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(5),a=_interopRequireDefault(n),r=i(13),o=_interopRequireDefault(r),s=i(1),l=_interopRequireDefault(s),u=i(0);(0,u.extend)(l.default.prototype,{getOptions:function(){var t=new o.default;return(0,u.merge)(t.value,this.additionalConfig)},additionalConfig:{},loadConfig:function(t){function find(){var t=n.shift();return t&&i&&"object"===(void 0===i?"undefined":(0,a.default)(i))&&t in i?(i=i[t],find()):t?void 0:i}var e=this.config,i=void 0,n=void 0,r=void 0;Object.keys(e).forEach(function(a){i=t,n=a.split("_"),r=find(),(0,u.isDefined)(r)&&(e[a]=r)})}})},function(t,e,i){"use strict";e.__esModule=!0;var n=i(6),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=function Options(){(0,a.default)(this,Options),this.value={bindto:"#chart",clipPath:!0,svg_classname:void 0,size_width:void 0,size_height:void 0,padding_left:void 0,padding_right:void 0,padding_top:void 0,padding_bottom:void 0,resize_auto:!0,zoom_enabled:!1,zoom_extent:void 0,zoom_privileged:!1,zoom_rescale:!1,zoom_onzoom:function(){},zoom_onzoomstart:function(){},zoom_onzoomend:function(){},zoom_x_min:void 0,zoom_x_max:void 0,interaction_enabled:!0,interaction_brighten:!0,interaction_inputType_mouse:!0,interaction_inputType_touch:{},animation_enable:!1,animation_duration:void 0,animation_direction:"right",onover:function(){},onout:function(){},onresize:function(){},onresized:function(){},onbeforeinit:void 0,oninit:function(){},onafterinit:void 0,onrendered:function(){},transition_duration:350,data_x:void 0,data_xs:{},data_xFormat:"%Y-%m-%d",data_xLocaltime:!0,data_xSort:!0,data_idConverter:function(t){return t},data_names:{},data_classes:{},data_groups:[],data_axes:{},data_logarithmic_min:void 0,data_logarithmic_max:void 0,data_type:void 0,data_types:{},data_labels:{},data_labels_position:{},data_labels_color:void 0,data_labels_colors:{},data_labels_background_color:void 0,data_labels_background_opacity:.7,data_labels_backgrounds:{},data_labels_font_size:11,data_labels_font_family:"sans-serif",data_labels_font_weight:void 0,data_labels_padding:5,data_labels_visibled:{},data_labels_border_color:"#000000",data_labels_border_width:void 0,data_labels_border_radius:void 0,data_labels_border_type:"solid",data_labels_border_types:[],data_labels_dataLabels:{},data_labels_style:{},data_order:"desc",data_regions:{},data_color:void 0,data_colors:{},data_hide:!1,data_filter:void 0,data_selection_enabled:!1,data_selection_grouped:!1,data_selection_isselectable:function(){return!0},data_selection_multiple:!0,data_selection_draggable:!1,data_onclick:function(){},data_onover:function(){},data_onout:function(){},data_onselected:function(){},data_onunselected:function(){},data_onmin:void 0,data_onmax:void 0,data_url:void 0,data_headers:void 0,data_json:void 0,data_rows:void 0,data_columns:void 0,data_mimeType:void 0,data_keys:void 0,data_empty_label_text:"",data_drilldown:[],charts_background_color:void 0,charts_border_color:"#000",charts_border_width:void 0,charts_border_radius:void 0,charts_border_type:"solid",charts_border_types:[],charts_border_style:{},charts_background_image:void 0,charts_plotBackground_color:void 0,charts_plotBorder_color:"#000000",charts_plotBorder_width:void 0,charts_plotBorder_radius:void 0,charts_plotBorder_type:"solid",charts_plotBorder_types:[],charts_plotBorder_style:{},charts_plotBackground_image:void 0,subchart_show:!1,subchart_size_height:60,subchart_axis_x_show:!0,subchart_onbrush:function(){},color_pattern:[],color_threshold:{},legend_show:!0,legend_hide:!1,legend_position:"bottom",legend_inset_anchor:"top-left",legend_inset_x:10,legend_inset_y:0,legend_inset_step:void 0,legend_item_onclick:void 0,legend_item_onover:void 0,legend_item_onout:void 0,legend_equally:!1,legend_padding:0,legend_item_tile_size:60,legend_style:void 0,legend_background_color:void 0,legend_background_opacity:.7,legend_border_color:"#000000",legend_border_width:void 0,legend_border_radius:void 0,legend_border_type:"solid",legend_border_types:[],legend_align:void 0,legend_valign:void 0,legend_images:{},axis_rotated:!1,axis_x_show:!0,axis_x_type:"indexed",axis_x_localtime:!0,axis_x_categories:[],axis_x_tick_centered:!1,axis_x_tick_format:void 0,axis_x_tick_numberFixed:4,axis_x_line_color:"#ccd6eb",axis_x_line_size:1,axis_x_line_style:{},axis_x_tick_color:"#ccd6eb",axis_x_tick_size:1,axis_x_tick_culling:{},axis_x_tick_culling_max:10,axis_x_tick_count:void 0,axis_x_tick_fit:!0,axis_x_tick_values:null,axis_x_tick_rotate:0,axis_x_tick_outer:!0,axis_x_tick_multiline:!0,axis_x_tick_width:null,axis_x_tick_labels_color:void 0,axis_x_tick_labels_font_size:void 0,axis_x_tick_labels_font_weight:void 0,axis_x_tick_labels_font_family:void 0,axis_x_tick_labels_style:{},axis_x_tick_labels_align:void 0,axis_x_tick_labels_images:[],axis_x_tick_labels_image:{},axis_x_tick_labels_staggerLines:void 0,axis_x_max:void 0,axis_x_min:void 0,axis_x_padding:{},axis_x_height:void 0,axis_x_extent:void 0,axis_x_label:{},axis_y_show:!0,axis_y_type:void 0,axis_y_max:void 0,axis_y_min:void 0,axis_y_inverted:!1,axis_y_center:void 0,axis_y_inner:!1,axis_y_line_color:"#ccd6eb",axis_y_line_size:0,axis_y_line_style:{},axis_y_tick_color:"#ccd6eb",axis_y_tick_size:0,axis_y_label:{},axis_y_tick_format:void 0,axis_y_tick_numberFixed:4,axis_y_tick_outer:!0,axis_y_tick_values:null,axis_y_tick_rotate:0,axis_y_tick_count:void 0,axis_y_tick_time_value:void 0,axis_y_tick_labels_color:void 0,axis_y_tick_labels_font_size:void 0,axis_y_tick_labels_font_weight:void 0,axis_y_tick_labels_font_family:void 0,axis_y_tick_labels_style:{},axis_y_tick_labels_align:void 0,axis_y_padding:{},axis_y_default:void 0,axis_y2_show:!1,axis_y2_max:void 0,axis_y2_min:void 0,axis_y2_inverted:!1,axis_y2_center:void 0,axis_y2_inner:!1,axis_y2_line_color:"#ccd6eb",axis_y2_line_size:1,axis_y2_line_style:{},axis_y2_tick_color:"#ccd6eb",axis_y2_tick_size:1,axis_y2_label:{},axis_y2_tick_format:void 0,axis_y2_tick_outer:!0,axis_y2_tick_values:null,axis_y2_tick_count:void 0,axis_y2_tick_labels_color:void 0,axis_y2_tick_labels_font_size:void 0,axis_y2_tick_labels_font_weight:void 0,axis_y2_tick_labels_font_family:void 0,axis_y2_tick_labels_style:{},axis_y2_tick_labels_align:void 0,axis_y2_padding:{},axis_y2_default:void 0,grid_x_show:!1,grid_x_type:"tick",grid_x_lines:[],grid_y_show:!0,grid_y_lines:[],grid_y_ticks:5,grid_focus_show:!0,grid_lines_front:!0,point_show:!0,point_r:3.5,point_sensitivity:10,point_focus_expand_enabled:!0,point_focus_expand_r:void 0,point_select_r:void 0,point_type:"circle",point_img_url:void 0,point_img_width:20,point_img_height:20,point_imgs:[],point_fill_color:void 0,point_stroke_width:1,point_series:{},point_cursor:{},line_connectNull:!1,line_step_type:"step",lineTrackerSensitivty:20,bar_width:void 0,bar_width_ratio:.6,bar_width_max:void 0,bar_zerobased:!0,bubble_maxR:120,radar_dot_radius:3,radar_polygon_strokeWidth:"1px",radar_polygon_strokeStyle:"solid",radar_polygon_opacity:.3,radar_polygon_color:!0,radar_level_count:3,radar_level_lineColor:"grey",radar_level_lineWidth:"1px",radar_level_lineOpacity:1,radar_level_textColor:"#737373",radar_level_textSize:"10px",radar_label_size:"11px",radar_label_color:"black",radar_growing_duration:0,boxplot_colorized:!1,boxplot_outliers_radius:"10px",boxplot_box_width:50,boxplot_text_color:"black",boxplot_text_show_IQR:!0,boxplot_text_show_outliers:!0,boxplot_text_show_median:!0,boxplot_text_show_minmax:!0,candlestick_color_stroke:"black",candlestick_color_increasing:"none",candlestick_color_decreasing:"orange",chord:{groups:{thickness:20,opacity:"0.8",padAngle:.05},text:{fontSize:"18px",distance:50},ribbons:{opacity:"0.8"},tick:{line:{enabled:!1,length:6,color:"#000"},text:{enabled:!0,fontColor:"black",fontSize:"10px",distance:14,leftRightCalibration:12}}},pack:{circle:{fill:"#2483B2",border:{color:"blue",width:"0px"}},leaf:{fill:"white",border:{color:"blue",width:"0px"}}},area_zerobased:!0,area_above:!1,area_backgrounds:{},pie_label_show:!0,pie_label_format:void 0,pie_label_threshold:.05,pie_label_ratio:void 0,pie_label_rotate:void 0,pie_expand:{},pie_expand_duration:50,pie_padAngle:0,pie_sliced:!1,pie_series:{},pie_startAngle:0,pie_endAngle:360,pie_cornerRadius:0,gauge_fullCircle:!1,gauge_label_show:!0,gauge_label_format:void 0,gauge_min:0,gauge_max:100,gauge_startingAngle:-1*Math.PI/2,gauge_label_extents:void 0,gauge_units:void 0,gauge_width:void 0,gauge_expand:{},gauge_expand_duration:50,gauge_startAngle:0,gauge_endAngle:180,gauge_outerRadius:void 0,gauge_innerRadius:void 0,gauge_cornerRadius:0,donut_label_show:!0,donut_label_format:void 0,donut_label_threshold:.05,donut_label_ratio:void 0,donut_width:void 0,donut_title:"",donut_expand:{},donut_expand_duration:50,donut_padAngle:0,donut_startAngle:0,donut_endAngle:360,donut_outerRadius:void 0,donut_innerRadius:void 0,donut_cornerRadius:0,spline_interpolation_type:"cardinal",regions:[],tooltip_show:!0,tooltip_grouped:!0,tooltip_format_title:void 0,tooltip_format_name:void 0,tooltip_format_value:void 0,tooltip_position:void 0,tooltip_contents:function(t,e,i,n){return this.getTooltipContent?this.getTooltipContent(t,e,i,n):""},tooltip_init_show:!1,tooltip_init_x:0,tooltip_init_position:{},tooltip_onshow:function(){},tooltip_onhide:function(){},tooltip_order:null,tooltip_background_color:"",tooltip_value_prefix:"",tooltip_value_suffix:"",tooltip_value_format:"",tooltip_header_display:!0,tooltip_header_color:"",tooltip_border_width:"",tooltip_border_color:"",tooltip_border_style:"",tooltip_data_color:"",tooltip_data_format:"",title_text:void 0,title_padding:{top:0,right:0,bottom:0,left:0},title_position:"top-center",title_color:"#000000",title_font_size:11,title_font_family:"sans-serif",title_font_weight:void 0,subtitle_text:void 0,subtitle_padding:{top:0,right:0,bottom:0,left:0},subtitle_position:"top-center",subtitle_color:"#000000",subtitle_font_size:11,subtitle_font_family:"sans-serif",subtitle_font_weight:void 0,data_regressions:{},exporting:{enabled:!0,fileName:"chart",mimeType:"image/png",scale:1,fallbackToExportServer:!1,url:"http://118.70.182.157:8080/rainbow-export/",pdf:{pageOrientation:"portrait",pageMargins:40,pageOrigin:!0,pageSize:"A4"}},drilldown_series:[],network_line_color:"#000000",network_line_type:"solid",network_line_arrow:!1,network_line_distance:50,network_node_type:"circle",network_node_color:void 0,network_node_radius:50,network_onselected:function(){},network_onclicked:function(){},dendrogram_type:"radial-tree",dendrogram_depth:void 0,dendrogram_collapse:!0,dendrogram_line_color:"#000000",dendrogram_line_type:"solid",dendrogram_node_type:"circle",dendrogram_node_color:void 0,dendrogram_node_radius:4.5,map_type:"marker",map_zoom:10,map_zoom_scroll:!0,wordcloud_onclicked:function(){},topicrank_onclicked:function(){}}};e.default=r,t.exports=e.default},function(t,e,i){"use strict";var n=i(3),a=i(1),r=function(t){return t&&t.__esModule?t:{"default":t}}(a);(0,i(0).extend)(r.default.prototype,{getScale:function(t,e,i){return(i?(0,n.scaleTime)():(0,n.scaleLinear)()).range([t,e])},getX:function(t,e,i,n){var a=this,r=a.getScale(t,e,a.isTimeSeries()),o=i?r.domain(i):r,s=void 0,l=void 0;for(s in a.isCategorized()?(l=n||function(){return 0},r=function(t,e){var i=o(t)+l(t);return e?i:Math.ceil(i)}):r=function(t,e){var i=o(t);return e?i:Math.ceil(i)},o)r[s]=o[s];return r.originalDomain=function(){return o.domain()},a.isCategorized()&&(r.domain=function(t){var e=t;return arguments.length?(o.domain(e),r):(e=this.originalDomain(),[e[0],e[1]+1])}),r},getY:function(t,e,i){var n=this.getScale(t,e,this.isTimeSeriesY());return i&&n.domain(i),n},getYScale:function(t){return"y2"===this.axis.getId(t)?this.y2:this.y},getSubYScale:function(t){return"y2"===this.axis.getId(t)?this.subY2:this.subY},updateScales:function(t){var e=this,i=e.config,n=!e.x;e.xMin=i.axis_rotated?1:0,e.xMax=i.axis_rotated?e.height:e.width,e.yMin=i.axis_rotated?0:e.height,e.yMax=i.axis_rotated?e.width:1,e.subXMin=e.xMin,e.subXMax=e.xMax,e.subYMin=i.axis_rotated?0:e.height2,e.subYMax=i.axis_rotated?e.width2:1,e.x=e.getX(e.xMin,e.xMax,n?void 0:e.x.originalDomain(),function(){return e.xAxis.tickOffset()}),e.y=e.getY(e.yMin,e.yMax,n?i.axis_y_default:e.y.domain()),e.y2=e.getY(e.yMin,e.yMax,n?i.axis_y2_default:e.y2.domain()),e.subX=e.getX(e.xMin,e.xMax,e.orgXDomain,function(t){return t%1?0:e.subXAxis.tickOffset()}),e.subY=e.getY(e.subYMin,e.subYMax,n?i.axis_y_default:e.subY.domain()),e.subY2=e.getY(e.subYMin,e.subYMax,n?i.axis_y2_default:e.subY2.domain()),e.xAxisTickFormat=e.axis.getXAxisTickFormat(),e.xAxisTickValues=e.axis.getXAxisTickValues(),e.yAxisTickValues=e.axis.getYAxisTickValues(),e.y2AxisTickValues=e.axis.getY2AxisTickValues(),e.xAxis=e.axis.getXAxis(e.x,e.xOrient,e.xAxisTickFormat,e.xAxisTickValues,i.axis_x_tick_outer,t),e.subXAxis=e.axis.getXAxis(e.subX,e.subXOrient,e.xAxisTickFormat,e.xAxisTickValues,i.axis_x_tick_outer),e.yAxis=e.axis.getYAxis(e.y,e.yOrient,i.axis_y_tick_format,e.yAxisTickValues,i.axis_y_tick_outer),e.y2Axis=e.axis.getY2Axis(e.y2,e.y2Orient,i.axis_y2_tick_format,e.y2AxisTickValues,i.axis_y2_tick_outer),e.updateArc&&e.updateArc()}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(5),a=_interopRequireDefault(n),r=i(3),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{getYDomainMin:function(t){var e=this,i=e.config,n=e.mapToIds(t),a=e.getValuesAsIdKeyed(t),o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if(i.data_groups.length>0)for(d=e.hasNegativeValueInTargets(t),o=0;o<i.data_groups.length;o++)if(u=i.data_groups[o].filter(function(t){return n.indexOf(t)>=0}),0!==u.length)for(l=u[0],d&&a[l]&&a[l].forEach(function(t,e){a[l][e]=t<0?t:0}),s=1;s<u.length;s++)c=u[s],!!a[c]&&a[c].forEach(function(t,i){e.axis.getId(c)===e.axis.getId(l)&&a[l]&&!(d&&+t>0)&&(a[l][i]+=+t)});return(0,r.min)(Object.keys(a).map(function(t){return(0,r.min)(a[t])}))},getYDomainMax:function(t){var e=this,i=e.config,n=e.mapToIds(t),a=e.getValuesAsIdKeyed(t),o=void 0,s=void 0,l=void 0,u=void 0,c=void 0,d=void 0;if(i.data_groups.length>0)for(d=e.hasPositiveValueInTargets(t),o=0;o<i.data_groups.length;o++)if(u=i.data_groups[o].filter(function(t){return n.indexOf(t)>=0}),0!==u.length)for(l=u[0],d&&a[l]&&a[l].forEach(function(t,e){a[l][e]=t>0?t:0}),s=1;s<u.length;s++)c=u[s],!!a[c]&&a[c].forEach(function(t,i){e.axis.getId(c)===e.axis.getId(l)&&a[l]&&!(d&&+t<0)&&(a[l][i]+=+t)});return(0,r.max)(Object.keys(a).map(function(t){return(0,r.max)(a[t])}))},getYDomain:function(t,e,i){var n=this,a=n.config,r=t.filter(function(t){return n.axis.getId(t.id)===e}),o=i?n.filterByXDomain(r,i):r,s="y2"===e?a.axis_y2_min:a.axis_y_min,u="y2"===e?a.axis_y2_max:a.axis_y_max,c=n.getYDomainMin(o),d=n.getYDomainMax(o),h="y2"===e?a.axis_y2_center:a.axis_y_center,p=n.hasType("bar",o)&&a.bar_zerobased||n.hasType("area",o)&&a.area_zerobased,f="y2"===e?a.axis_y2_inverted:a.axis_y_inverted,g=n.hasDataLabel()&&a.axis_rotated,_=n.hasDataLabel()&&!a.axis_rotated,m=void 0;if(c=(0,l.isValue)(s)?s:(0,l.isValue)(u)?c<u?c:u-10:c,d=(0,l.isValue)(u)?u:(0,l.isValue)(s)?s<d?d:s+10:d,0===o.length)return"y2"===e?n.y2.domain():n.y.domain();isNaN(c)&&(c=0),isNaN(d)&&(d=c),c===d&&(c<0?d=0:c=0);var y=c>=0&&d>=0,v=c<=0&&d<=0;((0,l.isValue)(s)&&y||(0,l.isValue)(u)&&v)&&(p=!1),p&&(y&&(c=0),v&&(d=0));var x=Math.abs(d-c),b=.1*x,w=.1*x;if(void 0!==h){var L=Math.max(Math.abs(c),Math.abs(d));d=h+L,c=h-L}if(g){m=n.getDataLabelLength(c,d,"width");var T=(0,l.diffDomain)(n.y.range()),k=[m[0]/T,m[1]/T];b+=x*(k[1]/(1-k[0]-k[1])),w+=x*(k[0]/(1-k[0]-k[1]))}else _&&(m=n.getDataLabelLength(c,d,"height"),b+=n.axis.convertPixelsToAxisPadding(m[1],x),w+=n.axis.convertPixelsToAxisPadding(m[0],x));"y"===e&&(0,l.notEmpty)(a.axis_y_padding)&&(b=n.axis.getPadding(a.axis_y_padding,"top",b,x),w=n.axis.getPadding(a.axis_y_padding,"bottom",w,x)),"y2"===e&&(0,l.notEmpty)(a.axis_y2_padding)&&(b=n.axis.getPadding(a.axis_y2_padding,"top",b,x),w=n.axis.getPadding(a.axis_y2_padding,"bottom",w,x)),p&&(y&&(w=c),v&&(b=-d));var C=[c-w,d+b];return f?C.reverse():C},getXDomainMin:function(t){var e=this,i=e.config;return(0,l.isDefined)(i.axis_x_min)?e.isTimeSeries()?this.parseDate(i.axis_x_min):i.axis_x_min:(0,r.min)(t,function(t){return(0,r.min)(t.values,function(t){return t.x})})},getXDomainMax:function(t){var e=this,i=e.config;return(0,l.isDefined)(i.axis_x_max)?e.isTimeSeries()?this.parseDate(i.axis_x_max):i.axis_x_max:(0,r.max)(t,function(t){return(0,r.max)(t.values,function(t){return t.x})})},getXDomainPadding:function(t){var e=this,i=e.config,n=t[1]-t[0],r=void 0,o=void 0,s=void 0,u=void 0;return e.isCategorized()?o=0:e.hasType("bar")?(r=e.getMaxDataCount(),o=r>1?n/(r-1)/2:.5):o=.01*n,"object"===(0,a.default)(i.axis_x_padding)&&(0,l.notEmpty)(i.axis_x_padding)?(s=(0,l.isValue)(i.axis_x_padding.left)?i.axis_x_padding.left:o,u=(0,l.isValue)(i.axis_x_padding.right)?i.axis_x_padding.right:o):"number"==typeof i.axis_x_padding?(s=i.axis_x_padding,u=i.axis_x_padding):(s=o,u=o),{left:s,right:u}},getXDomain:function(t){var e=this,i=e.config,n="boxplot"===i.data_type,a=[e.getXDomainMin(t),e.getXDomainMax(t)],o=a[0],s=a[1],l=e.getXDomainPadding(a),u=0,c=0;if(o-s!=0||e.isCategorized()||(e.isTimeSeries()?(o=new Date(.5*o.getTime()),s=new Date(1.5*s.getTime())):(o=0===o?1:.5*o,s=0===s?-1:1.5*s)),(o||0===o)&&(u=e.isTimeSeries()?new Date(o.getTime()-l.left):o-l.left),(s||0===s)&&(c=e.isTimeSeries()?new Date(s.getTime()+l.right):s+l.right),n){for(var d=[],h=0;h<t.length;h++)d.push(h);u=(0,r.min)(d)-.5,c=(0,r.max)(d)+.5}return[u,c]},updateXDomain:function(t,e,i,n,a){var o=this,s=o.config;if(i&&(o.x.domain(a||(0,r.extent)(o.getXDomain(t))),o.orgXDomain=o.x.domain(),s.zoom_enabled&&o.zoom.updateScaleExtent(),o.subX.domain(o.x.domain()),o.brush&&o.brush.scale(o.subX)),e){var l=a||!o.brush||o.brushEmpty()?o.orgXDomain:o.getBrushSelection().map(function(t){return o.subX.invert(t)});o.x.domain(l),s.zoom_enabled&&o.zoom.updateScaleExtent()}return n&&o.x.domain(o.trimXDomain(o.x.originalDomain())),o.x.domain()},trimXDomain:function(t){var e=this.getZoomDomain(),i=e[0],n=e[1];return t[0]<=i&&(t[1]=+t[1]+(i-t[0]),t[0]=i),n<=t[1]&&(t[0]=+t[0]-(t[1]-n),t[1]=n),t}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(5),a=_interopRequireDefault(n),r=i(3),o=i(2),s=_interopRequireDefault(o),l=i(1),u=_interopRequireDefault(l),c=i(0);(0,c.extend)(u.default.prototype,{isX:function(t){var e=this,i=e.config,n=i.data_x&&t===i.data_x,a=(0,c.notEmpty)(i.data_xs)&&(0,c.hasValue)(i.data_xs,t);return n||a},isNotX:function(t){return!this.isX(t)},getXKey:function(t){var e=this,i=e.config;return i.data_x?i.data_x:(0,c.notEmpty)(i.data_xs)?i.data_xs[t]:null},getXValuesOfXKey:function(t,e){var i=this,n=e&&(0,c.notEmpty)(e)?i.mapToIds(e):[],a=void 0;return n.forEach(function(e){i.getXKey(e)===t&&(a=i.data.xs[e])}),a},getIndexByX:function(t){var e=this,i=e.filterByX(e.data.targets,t);return i.length?i[0].index:null},getXValue:function(t,e){var i=this;return t in i.data.xs&&i.data.xs[t]&&(0,c.isValue)(i.data.xs[t][e])?i.data.xs[t][e]:e},getOtherTargetXs:function(){var t=this,e=Object.keys(t.data.xs);return e.length?t.data.xs[e[0]]:null},getOtherTargetX:function(t){var e=this.getOtherTargetXs();return e&&t<e.length?e[t]:null},addXs:function(t){var e=this;Object.keys(t).forEach(function(i){e.config.data_xs[i]=t[i]})},hasMultipleX:function(t){return(0,r.set)(Object.keys(t).map(function(e){return t[e]})).size()>1},isMultipleX:function(){return(0,c.notEmpty)(this.config.data_xs)||!this.config.data_xSort||this.hasType("scatter")||this.hasType("bubble")||this.hasType("wordcloud")||this.hasType("network")||this.hasType("topicrank")||this.hasType("sunburst")||this.hasType("bubble-cluster")||this.hasType("chord")||this.hasType("dendrogram")||this.hasType("map")||this.hasType("radar")},addName:function(t){var e=this,i=void 0;return t&&(i=e.config.data_names[t.id],t.name=void 0===i?t.id:i),t},getValueOnIndex:function(t,e){var i=t.filter(function(t){return t.index===e});return i.length?i[0]:null},updateTargetX:function(t,e){var i=this;t.forEach(function(t){t.values.forEach(function(n,a){n.x=i.generateTargetX(e[a],t.id,a)}),i.data.xs[t.id]=e})},updateTargetXs:function(t,e){var i=this;t.forEach(function(t){e[t.id]&&i.updateTargetX([t],e[t.id])})},generateTargetX:function(t,e,i){var n=this;return n.isTimeSeries()?t?n.parseDate(t):n.parseDate(n.getXValue(e,i)):n.isCustomX()&&!n.isCategorized()?(0,c.isValue)(t)?+t:n.getXValue(e,i):i},cloneTarget:function(t){return{id:t.id,id_org:t.id_org,values:t.values.map(function(t){return{x:t.x,value:t.value,id:t.id}})}},updateXs:function(){var t=this;if(t.data.targets.length){var e=t.getMaxDataCountTarget(t.data.targets);t.xs=[],e.values.forEach(function(e){t.xs[e.index]=e.x})}},getPrevX:function(t){var e=this.xs[t-1];return void 0===e?null:e},getNextX:function(t){var e=this.xs[t+1];return void 0===e?null:e},getMinMaxValue:function(t){var e=void 0,i=void 0;return(t||this.data.targets.map(function(t){return t.values})).forEach(function(t){e=(0,r.min)([e,(0,r.min)(t,function(t){return t.value})]),i=(0,r.max)([i,(0,r.max)(t,function(t){return t.value})])}),{min:e,max:i}},getMinMaxData:function(){var t=this;if(!t.cache.$minMaxData){var e=t.data.targets.map(function(t){return t.values}),i=t.getMinMaxValue(e),n=[],a=[];e.forEach(function(e){var r=t.getFilteredDataByValue(e,i.min),o=t.getFilteredDataByValue(e,i.max);r.length&&(n=n.concat(r)),o.length&&(a=a.concat(o))}),t.cache.$minMaxData={min:n,max:a}}return t.cache.$minMaxData},getFilteredDataByValue:function(t,e){var i=this;return t.filter(function(t){return!(t.value!==e||(setTimeout(function(){return t.element=i.getElementByDataIndex(t)},0),0))})},getElementByDataIndex:function(t){var e=this.isTypeOf(t.id,["pie","gauge","donut"]),i="."+s.default.target+"-"+t.id+" ."+(e?s.default.arc:s.default.shape)+"-"+(e?t.id:t.index),n=(0,r.select)(i);return n.empty()?null:n.node()},getMaxDataCount:function(){return(0,r.max)(this.data.targets,function(t){return t.values.length})},getMaxDataCountTarget:function(t){var e=t.length,i=0,n=void 0;return e>1?t.forEach(function(t){t.values.length>i&&(n=t,i=t.values.length)}):n=e?t[0]:null,n},mapToIds:function(t){return t.map(function(t){return t.id})},mapToTargetIds:function(t){var e=this;return t?(0,c.isArray)(t)?t.concat():[t]:e.mapToIds(e.data.targets)},hasTarget:function(t,e){var i=this.mapToIds(t),n=void 0;for(n=0;n<i.length;n++)if(i[n]===e)return!0;return!1},isTargetToShow:function(t){return this.hiddenTargetIds.indexOf(t)<0},isLegendToShow:function(t){return this.hiddenLegendIds.indexOf(t)<0},filterTargetsToShow:function(t){var e=this;return t.filter(function(t){return e.isTargetToShow(t.id)})},mapTargetsToUniqueXs:function(t){var e=this,i=(0,r.set)((0,r.merge)(t.map(function(t){return t.values.map(function(t){return+t.x})}))).values();return i=e.isTimeSeries()?i.map(function(t){return new Date(+t)}):i.map(function(t){return+t}),i=i.sort(function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}),"boxplot"===e.config.data_type&&(i=i.slice(0,t.length)),i},addHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.concat(t)},removeHiddenTargetIds:function(t){this.hiddenTargetIds=this.hiddenTargetIds.filter(function(e){return t.indexOf(e)<0})},addHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.concat(t)},removeHiddenLegendIds:function(t){this.hiddenLegendIds=this.hiddenLegendIds.filter(function(e){return t.indexOf(e)<0})},getValuesAsIdKeyed:function(t){var e={};return t.forEach(function(t){e[t.id]=[],t.values.forEach(function(i){e[t.id].push(i.value)})}),e},getArrayAsIdKeyed:function(t){var e={};return t.forEach(function(t){e[t.id]=[],t.values.forEach(function(i,n){var a=[];a.push(n,i.value),e[t.id].push(a)})}),e},checkValueInTargets:function(t,e){var i=Object.keys(t),n=void 0,a=void 0,r=void 0;for(n=0;n<i.length;n++)for(r=t[i[n]].values,a=0;a<r.length;a++)if(e(r[a].value))return!0;return!1},hasNegativeValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t<0})},hasPositiveValueInTargets:function(t){return this.checkValueInTargets(t,function(t){return t>0})},_checkOrder:function(t){var e=this.config;return this.isString(e.data_order)&&e.data_order.toLowerCase()===t},isOrderDesc:function(){return this._checkOrder("desc")},isOrderAsc:function(){return this._checkOrder("asc")},orderTargets:function(t){var e=this,i=e.config,n=e.isOrderAsc(),a=e.isOrderDesc();return n||a?t.sort(function(t,e){var i=function(t,e){return t+Math.abs(e.value)},a=t.values.reduce(i,0),r=e.values.reduce(i,0);return n?r-a:a-r}):(0,c.isFunction)(i.data_order)&&t.sort(i.data_order),t},filterByX:function(t,e){return(0,r.merge)(t.map(function(t){return t.values})).filter(function(t){return t.x-e==0})},filterRemoveNull:function(t){return t.filter(function(t){return(0,c.isValue)(t.value)})},filterByXDomain:function(t,e){return t.map(function(t){return{id:t.id,id_org:t.id_org,values:t.values.filter(function(t){return e[0]<=t.x&&t.x<=e[1]})}})},hasDataLabel:function(){var t=this.config.data_labels,e=void 0===t?"undefined":(0,a.default)(t);return"boolean"===e&&t||"object"===e&&(0,c.notEmpty)(t)},getDataLabelLength:function(t,e,i){var n=this,a=[0,0];return n.selectChart.select("svg").selectAll(".dummy").data([t,e]).enter().append("text").text(function(t){return n.dataLabelFormat(t.id)(t)}).each(function(t,e){a[e]=1.3*this.getBoundingClientRect()[i]}).remove(),a},isNoneArc:function(t){return this.hasTarget(this.data.targets,t.id)},isArc:function(t){return"data"in t&&this.hasTarget(this.data.targets,t.data.id)},findSameXOfValues:function(t,e){var i=t[e].x,n=[],a=void 0;for(a=e-1;a>=0&&i===t[a].x;a--)n.push(t[a]);for(a=e;a<t.length&&i===t[a].x;a++)n.push(t[a]);return n},findClosestFromTargets:function(t,e){var i=this,n=t.map(function(t){return i.findClosest(t.values,e)});return i.findClosest(n,e)},findClosest:function(t,e){var i=this,n=i.config.point_sensitivity,a=void 0;return t.filter(function(t){return t&&i.isBarType(t.id)}).forEach(function(t){var e=i.main.select().node("."+s.default.bars+i.getTargetSelectorSuffix(t.id)+"."+s.default.bar+"-"+t.index);!a&&i.isWithinBar(e)&&(a=t)}),t.filter(function(t){return t&&!i.isBarType(t.id)}).forEach(function(t){var r=i.dist(t,e);r<n&&(n=r,a=t)}),a},dist:function(t,e){var i=this,n=i.config,a=n.axis_rotated?1:0,r=n.axis_rotated?0:1,o=i.circleY(t,t.index),s=i.x(t.x);return Math.sqrt(Math.pow(s-e[a],2)+Math.pow(o-e[r],2))},convertValuesToStep:function(t){var e=(0,c.isArray)(t)?t.concat():[t],i=void 0;if(!this.isCategorized())return t;for(i=t.length+1;i>0;i--)e[i]=e[i-1];return e[0]={x:e[0].x-1,value:e[0].value,id:e[0].id},e[t.length+1]={x:e[t.length].x+1,value:e[t.length].value,id:e[t.length].id},e},updateDataAttributes:function(t,e){var i=this,n=i.config,a=n["data_"+t];return void 0===e?a:(Object.keys(e).forEach(function(t){a[t]=e[t]}),i.redraw({withLegend:!0}),a)}})},function(t,e,i){"use strict";var n=i(3),a=i(1),r=function(t){return t&&t.__esModule?t:{"default":t}}(a),o=i(0);(0,o.extend)(r.default.prototype,{convertUrlToData:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"csv",a=arguments[2],r=arguments[3],o=arguments[4],s=i,l=(0,n.request)(t);if(a)for(var u=Object.keys(a),c=Array.isArray(u),d=0,u=c?u:u[Symbol.iterator]();;){var h;if(c){if(d>=u.length)break;h=u[d++]}else{if(d=u.next(),d.done)break;h=d.value}var p=h;l.header(p,a[p])}l.get(function(t,i){var n=void 0;if(!i)throw new Error(t.responseURL+" "+t.status+" ("+t.statusText+")");var a=i.response||i.responseText;n="json"===s?e.convertJsonToData(JSON.parse(a),r):"tsv"===s?e.convertTsvToData(a):e.convertCsvToData(a),o.call(e,n)})},_convertCsvTsvToData:function(t,e){var i=t.rows(e),n=void 0;return 1===i.length?(n=[{}],i[0].forEach(function(t){n[0][t]=null})):n=t.parse(e),n},convertCsvToData:function(t){return this._convertCsvTsvToData({rows:n.csvParseRows,parse:n.csvParse},t)},convertTsvToData:function(t){return this._convertCsvTsvToData({rows:n.tsvParseRows,parse:n.tsvParse},t)},convertJsonToData:function(t,e){var i=this,n=[],a=void 0,r=void 0;return e?(e.x?(a=e.value.concat(e.x),this.config.data_x=e.x):a=e.value,n.push(a),t.forEach(function(t){for(var e=[],r=void 0,s=a,l=Array.isArray(s),u=0,s=l?s:s[Symbol.iterator]();;){var c;if(l){if(u>=s.length)break;c=s[u++]}else{if(u=s.next(),u.done)break;c=u.value}var d=c;r=i.findValueInJson(t,d),(0,o.isUndefined)(r)&&(r=null),e.push(r)}n.push(e)}),r=this.convertRowsToData(n)):(Object.keys(t).forEach(function(e){var i=t[e].concat();i.unshift(e),n.push(i)}),r=this.convertColumnsToData(n)),r},findValueInJson:function(t,e){if(void 0!==t[e])return t[e];for(var i=e.replace(/\[(\w+)\]/g,".$1"),n=i.replace(/^\./,"").split("."),a=t,r=n,o=Array.isArray(r),s=0,r=o?r:r[Symbol.iterator]();;){var l;if(o){if(s>=r.length)break;l=r[s++]}else{if(s=r.next(),s.done)break;l=s.value}var u=l;if(!(u in a)){a=void 0;break}a=a[u]}return a},convertRowsToData:function(t){var e=t[0],i=[],n={},a=void 0,r=void 0;for(a=1;a<t.length;a++){for(n={},r=0;r<t[a].length;r++){if((0,o.isUndefined)(t[a][r]))throw new Error("Source data is missing a component at ("+a+", "+r+")!");n[e[r]]=t[a][r]}i.push(n)}return i},convertColumnsToData:function(t){var e=[],i=void 0,n=void 0,a=void 0;for(i=0;i<t.length;i++)for(a=t[i][0],n=1;n<t[i].length;n++){if((0,o.isUndefined)(e[n-1])&&(e[n-1]={}),(0,o.isUndefined)(t[i][n]))throw new Error("Source data is missing a component at ("+i+", "+n+")!");e[n-1][a]=t[i][n]}return e},convertDataToTargets:function(t,e){var i=this,a=this,r=a.config,s=(0,n.keys)(t[0]).filter(a.isNotX,a),l=(0,n.keys)(t[0]).filter(a.isX,a);s.forEach(function(n){var s=i.getXKey(n);i.isCustomX()||i.isTimeSeries()?l.indexOf(s)>=0?i.data.xs[n]=(e&&a.data.xs[n]?a.data.xs[n]:[]).concat(t.map(function(t){return t[s]}).filter(o.isValue).map(function(t,e){return a.generateTargetX(t,n,e)})):r.data_x?i.data.xs[n]=i.getOtherTargetXs():(0,o.notEmpty)(r.data_xs)&&(a.data.xs[n]=a.getXValuesOfXKey(s,a.data.targets)):a.data.xs[n]=t.map(function(t,e){return e})}),s.forEach(function(t){if(!a.data.xs[t])throw new Error('x is not defined for id = "'+t+'".')});var u=s.map(function(e,i){var n=r.data_idConverter(e);return{id:n,id_org:e,values:t.map(function(t,s){var l=a.getXKey(e),u=t[l],c=null===t[e]||isNaN(t[e])?t[e]:+t[e],d=void 0;return a.isCustomX()&&a.isCategorized()&&0===i&&!(0,o.isUndefined)(u)?(0===i&&0===s&&(r.axis_x_categories=[]),-1===(d=r.axis_x_categories.indexOf(u))&&(d=r.axis_x_categories.length,r.axis_x_categories.push(u))):d=a.generateTargetX(u,e,s),((0,o.isUndefined)(t[e])||a.data.xs[e].length<=s)&&(d=void 0),(a.isLogarithmicY()||a.isLogarithmicX())&&(0,o.isUndefined)(r.data_columns)&&!(0,o.isUndefined)(c)?{x:parseFloat(c.x),value:parseFloat(c.y),data:c,id:n,type:"temp"}:{x:d,value:c,id:n,type:"temp"}}).filter(function(t){return(0,o.isDefined)(t.x)})}});return u.forEach(function(t){var e=void 0;r.data_xSort&&(t.values=t.values.sort(function(t,e){return(t.x||0===t.x?t.x:1/0)-(e.x||0===e.x?e.x:1/0)})),e=0,t.values.forEach(function(t){t.index=e++}),a.data.xs[t.id].sort(function(t,e){return t-e})}),a.hasNegativeValue=a.hasNegativeValueInTargets(u),a.hasPositiveValue=a.hasPositiveValueInTargets(u),r.data_type&&a.setTargetType(a.mapToIds(u).filter(function(t){return!(t in r.data_types)}),r.data_type),u.forEach(function(t){a.addCache(t.id_org,t)}),u},convertDataWithLogarithmic:function(t){var e=this,i=e.config,n=e.convertDataToTargets(t),a=[],r=[];return n.forEach(function(t){for(var n=t.values.filter(function(t){var n=!1;return(0,o.notEmpty)(i.data_logarithmic_min)&&(0,o.notEmpty)(i.data_logarithmic_max)?(e.isLogarithmicY()&&(n=t.x<=i.data_logarithmic_max&&t.x>=i.data_logarithmic_min),e.isLogarithmicX()&&(n=t.value<=i.data_logarithmic_max&&t.value>=i.data_logarithmic_min)):(n=!0,(0,o.notEmpty)(i.data_logarithmic_min)&&(e.isLogarithmicY()&&(n=t.x>=i.data_logarithmic_min),e.isLogarithmicX()&&(n=t.value>=i.data_logarithmic_min)),(0,o.notEmpty)(i.data_logarithmic_max)&&(e.isLogarithmicY()&&(n=t.x<=i.data_logarithmic_max),e.isLogarithmicX()&&(n=t.value<=i.data_logarithmic_max))),n}),s=0;s<n.length;s++)e.isLogarithmicY()&&e.isLogarithmicX()?(n[s].value=n[s].value?1===n[s].value?.1:Math.log(n[s].value)/Math.LN10:0,n[s].x=n[s].x?1===n[s].x?.1:Math.log(n[s].x)/Math.LN10:0):(e.isLogarithmicY()&&(n[s].value?1===n[s].value?n[s].value=.1:n[s].value=Math.log(n[s].value)/Math.LN10:n[s].value=0),e.isLogarithmicX()&&(n[s].x?1===n[s].x?n[s].x=.1:n[s].x=Math.log(n[s].x)/Math.LN10:n[s].x=0)),a.push(n[s].x),r.push(n[s].value);t.values=n}),{dataOutput:n,dataMinMaxX:a,dataMinMaxY:r}}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(2),a=_interopRequireDefault(n),r=i(1),o=_interopRequireDefault(r);(0,i(0).extend)(o.default.prototype,{load:function(t,e){var i=this,n=t;n&&(e.filter&&(n=n.filter(e.filter)),(e.type||e.types)&&n.forEach(function(t){var n=e.types&&e.types[t.id]?e.types[t.id]:e.type;i.setTargetType(t.id,n)}),i.data.targets.forEach(function(t){for(var e=0;e<n.length;e++)if(t.id===n[e].id){t.values=n[e].values,n.splice(e,1);break}}),i.data.targets=i.data.targets.concat(n)),i.updateTargets(i.data.targets),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),e.done&&e.done()},loadFromArgs:function(t){var e=this;t.data?e.load(e.convertDataToTargets(t.data),t):t.url?e.convertUrlToData(t.url,t.mimeType,t.headers,t.keys,function(i){e.load(e.convertDataToTargets(i),t)}):t.json?e.load(e.convertDataToTargets(e.convertJsonToData(t.json,t.keys)),t):t.rows?e.load(e.convertDataToTargets(e.convertRowsToData(t.rows)),t):t.columns?e.load(e.convertDataToTargets(e.convertColumnsToData(t.columns)),t):e.load(null,t)},unload:function(t,e){var i=this,n=e,r=t;return i.resetCache(),n||(n=function(){}),r=r.filter(function(t){return i.hasTarget(i.data.targets,t)}),r&&0!==r.length?(i.svg.selectAll(r.map(function(t){return i.selectorTarget(t)})).transition().style("opacity","0").remove().call(i.endall,n),void r.forEach(function(t){i.withoutFadeIn[t]=!1,i.legend&&i.legend.selectAll("."+a.default.legendItem+i.getTargetSelectorSuffix(t)).remove(),i.data.targets=i.data.targets.filter(function(e){return e.id!==t})})):void n()}})},function(t,e,i){"use strict";var n=i(1),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{categoryName:function(t){var e=this.config;return t<e.axis_x_categories.length?e.axis_x_categories[t]:t},boxplotCategoryName:function(t){var e=this,i=e.data.targets,n=i.map(function(t){return t.id});return t<n.length?n[t]:t}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initEventRect:function(){this.main.select("."+s.default.chart).append("g").attr("class",s.default.eventRects).style("fill-opacity","0")},redrawEventRect:function(){var t=this,e=t.config,i=t.isMultipleX(),a=t.main.select("."+s.default.eventRects).style("cursor",e.zoom_enabled?e.axis_rotated?"ns-resize":"ew-resize":null).classed(s.default.eventRectsMultiple,i).classed(s.default.eventRectsSingle,!i),r=void 0,o=void 0;if(a.selectAll("."+s.default.eventRect).remove(),t.eventRect=a.selectAll("."+s.default.eventRect),i?(r=t.eventRect.data([0]),r=t.generateEventRectsForMultipleXs(r.enter()).merge(r),t.updateEventRect(r)):(o=t.getMaxDataCountTarget(t.data.targets),a.datum(o?o.values:[]),t.eventRect=a.selectAll("."+s.default.eventRect),r=t.eventRect.data(function(t){return t}),r.exit().remove(),r=t.generateEventRectsForSingleX(r.enter()).merge(r),t.updateEventRect(r)),"touch"===t.inputType&&!t.hasArcType()){var u=function(){var t=n.event.changedTouches[0];return(0,n.select)(document.elementFromPoint(t.clientX,t.clientY))},c=function(t){var e=t&&t.attr("class")&&1*t.attr("class").replace(new RegExp("("+s.default.eventRect+"-?|s)","g"),"");return(isNaN(e)||null===e)&&(e=-1),e},d=function(e){if(i)t.selectRectForMultipleXs(e);else{var n=u(),a=c(n);-1===a?t.unselectRect():t.selectRectForSingle(e,n,a)}},h=e.interaction_inputType_touch.preventDefault,p=(0,l.isBoolean)(h)&&h||!1,f=!isNaN(h)&&h||null,g=void 0,_=function(t){var i=t.type,n=t.changedTouches[0],a=n["client"+(e.axis_rotated?"Y":"X")];"touchstart"===i?p?t.preventDefault():null!==f&&(g=a):"touchmove"===i&&(p||!0===g||null!==f&&Math.abs(g-a)>=f)&&(g=!0,t.preventDefault())};t.svg.on("touchstart touchmove",function(){var e=u();if(!e.empty()&&e.classed(s.default.eventRect)){if(t.dragging||t.flowing||t.hasArcType())return;_(n.event),d(this)}else t.unselectRect()}).on("touchend",function(){var n=u();if(!n.empty()&&n.classed(s.default.eventRect)){if(t.hasArcType()||!t.toggleShape||t.cancelClick)return void(t.cancelClick&&(t.cancelClick=!1));var a=c(n);i||-1===a||t.main.selectAll("."+s.default.shape+"-"+a).each(function(i){return e.data_onout.call(t.api,i)})}})}},updateEventRect:function(t){var e=this,i=e.config,n=e.zoomScale||e.x,a=t||e.eventRect.data(),r=void 0,o=void 0,s=void 0,l=void 0;if(e.isMultipleX())r=0,o=0,s=e.width,l=e.height;else{var u=void 0,c=void 0;!e.isCustomX()&&!e.isTimeSeries()||e.isCategorized()?(u=e.getEventRectWidth(),c=function(t){return n(t.x)-u/2}):(e.updateXs(),u=function(t){var a=e.getPrevX(t.index),r=e.getNextX(t.index);return null===a&&null===r?i.axis_rotated?e.height:e.width:(null===a&&(a=n.domain()[0]),null===r&&(r=n.domain()[1]),Math.max(0,(n(r)-n(a))/2))},c=function(t){var i=e.getNextX(t.index),a=e.data.xs[t.id][t.index],r=e.getPrevX(t.index);return null===r&&null===i?0:(null===r&&(r=n.domain()[0]),(n(a)+n(r))/2)}),r=i.axis_rotated?0:c,o=i.axis_rotated?c:0,s=i.axis_rotated?e.width:u,l=i.axis_rotated?u:e.height}a.attr("class",e.classEvent.bind(e)).attr("x",r).attr("y",o).attr("width",s).attr("height",l)},selectRectForSingle:function(t,e,i){var a=this,r=a.config,o=(0,n.mouse)(t),u=a.filterTargetsToShow(a.data.targets).map(function(t){return a.addName(a.getValueOnIndex(t.values,i))});r.tooltip_grouped&&(a.showTooltip(u,t),a.showXGridFocus(u),!r.data_selection_enabled||r.data_selection_grouped)||a.main.selectAll("."+s.default.shape+"-"+i).each(function(){function isNotNull(t){return null!==t.value}if((0,n.select)(this).classed(s.default.EXPANDED,!0),r.data_selection_enabled&&e.style("cursor",r.data_selection_grouped?"pointer":null),!r.tooltip_grouped){var t=u.filter(isNotNull).map(function(t){var e={};return Object.keys(t).forEach(function(i){e[i]=t[i]}),e.distance=r.axis_rotated?Math.abs(a.y.invert(o[0])-t.value):Math.abs(a.y.invert(o[1])-t.value),e});t.sort(function(t,e){return t.distance-e.distance}),a.showTooltip([t[0]],this),a.showXGridFocus([t[0]]),a.showYGridFocus([t[0]]),a.showXDataFocus([t[0]]),a.showYDataFocus([t[0]]),r.data_selection_grouped||(a.unexpandMarkerPoint(i),a.unexpandBars(i))}}).filter(function(t){return a.isWithinShape(this,t)}).each(function(t){if(r.data_selection_enabled&&(r.data_selection_grouped||r.data_selection_isselectable(t))){var n=r.point_series,o=r.point_cursor,s=(0,l.notEmpty)(o)?o:"default";if((0,l.notEmpty)(n[t.id])){var u=(0,l.isURL)(n[t.id].cursor),c="url("+n[t.id].cursor+"), auto";s=u?c:n[t.id].cursor}e.style("cursor",s)}r.tooltip_grouped||(a.showTooltip([t],this),a.showXGridFocus([t]),r.point_focus_expand_enabled&&a.expandMarkerPoint(i,t.id,!0),a.expandBars(i,t.id,!0))})},selectRectForMultipleXs:function(t){var e=this,i=e.config,a=e.filterTargetsToShow(e.data.targets);if(!e.dragging&&!e.hasArcType(a)){var r=(0,n.mouse)(e.main.select("."+s.default.eventRects+" ."+s.default.eventRect).node()),o=e.findClosestFromTargets(a,r),l=void 0;if(e.mouseover&&(!o||o.id!==e.mouseover.id)&&(i.data_onout.call(e.api,e.mouseover),e.mouseover=void 0),!o)return void e.unselectRect();l=e.isBubbleType(o)||e.isScatterType(o)||!i.tooltip_grouped?[o]:e.filterByX(a,o.x);var u=l.map(function(t){return e.addName(t)});e.showTooltip(u,t),i.point_focus_expand_enabled&&e.expandMarkerPoint(o.index,o.id,!0),e.expandBars(o.index,o.id,!0),e.showXGridFocus(u),(e.isBarType(o.id)||e.dist(o,r)<i.point_sensitivity)&&(e.svg.select(""+s.default.eventRect).style("cursor","pointer"),!e.mouseover&&(i.data_onover.call(e.api,o),e.mouseover=o))}},unselectRect:function(){var t=this;t.svg.select("."+s.default.eventRect).style("cursor",null),t.hideXGridFocus(),t.hideTooltip(),t.unexpandMarkerPoint(),t.unexpandBars()},generateEventRectsForSingleX:function(t){var e=this,i=e.config,a=t.append("rect").attr("class",e.classEvent.bind(e)).style("cursor",i.data_selection_enabled&&i.data_selection_grouped?"pointer":null).text(function(t){return t.value}).on("click",function(t){if(e.hasArcType()||!e.toggleShape||e.cancelClick)return void(e.cancelClick&&(e.cancelClick=!1));var n=t.index,a=void 0;e.main.selectAll("."+s.default.shape+"-"+n).each(function(t){(i.data_selection_grouped||e.isWithinShape(this,t))&&(e.toggleShape(this,t,n),e.config.data_onclick.call(e.api,t,this),a=t)}),e.drillDownDraw(a)}).call(i.data_selection_draggable&&e.drag?(0,n.drag)().origin(Object).on("drag",function(){e.drag((0,n.mouse)(this))}).on("dragstart",function(){e.dragstart((0,n.mouse)(this))}).on("dragend",function(){e.dragend()}):function(){});return"mouse"===e.inputType&&a.on("mouseover",function(t){if(!(e.dragging||e.flowing||e.hasArcType())){var n=t.index;i.point_focus_expand_enabled&&e.expandMarkerPoint(n,null,!0),e.expandBars(n,null,!0),-1!==n&&e.main.selectAll("."+s.default.shape+"-"+n).each(function(t){return i.data_onover.call(e.api,t)})}}).on("mousemove",function(t){if(!(e.dragging||e.flowing||e.hasArcType())){var i=t.index,a=e.svg.select("."+s.default.eventRect+"-"+i);e.isStepType(t)&&"step-after"===e.config.line_step_type&&(0,n.mouse)(this)[0]<e.x(e.getXValue(t.id,i))&&(i-=1),-1===i?e.unselectRect():e.selectRectForSingle(this,a,i)}}).on("mouseout",function(t){if(e.config&&!e.hasArcType()){var n=t.index;e.unselectRect(),e.main.selectAll("."+s.default.shape+"-"+n).each(function(t){return i.data_onout.call(e.api,t)})}}),a},drillDownDraw:function(t){if((0,l.notEmpty)(t)){var e=this,i=e.config,a=[],r=i.drilldown_series;if(a.push.apply(a,i.data_drilldown),(0,l.notEmpty)(r)&&r.forEach(function(t){(0,l.notEmpty)(t.data.drilldown)&&a.push.apply(a,t.data.drilldown)}),(0,l.notEmpty)(a)&&(0,l.notEmpty)(r)){var o=void 0;r.forEach(function(e){e.id===t.id&&(0,l.notEmpty)(e.value)&&e.value===t.value&&a.indexOf(e.id)>=0&&(o=e),e.id===t.id&&a.indexOf(e.id)>=0&&!(0,l.notEmpty)(e.value)&&(o=e)}),(0,l.notEmpty)(o)&&(e.selectChart.select("."+s.default.drillDownButton).remove(),e.selectChart.append("div").attr("class",s.default.drillDownButton).style("position","absolute").style("display","block").append("button").datum(o).attr("class","btn btn-default rb-button-box").text(function(t){return" Back to "+((0,l.notEmpty)(t.name)?t.name:t.id)}).on("click",function(t){var i=void 0;if((0,l.notEmpty)(a)&&(0,l.notEmpty)(r)&&r.forEach(function(e){(0,l.notEmpty)(e.data.drilldown)&&e.data.drilldown.indexOf(t.id)>=0&&(i=e)}),(0,l.notEmpty)(i)){(0,n.select)(this).datum(i).text(function(t){return" Back to "+((0,l.notEmpty)(t.name)?t.name:t.id)}),e.drillDownData(i.data)}else e.selectChart.select("."+s.default.drillDownButton).remove(),e.drillDownData(e.config_origin.data)}),e.selectChart.select("."+s.default.drillDownButton).style("top","0px").style("right",e.config.exporting.enabled?"40px":"0px"),e.drillDownData(o.data))}}},drillDownData:function(t){var e=this;e.api.unload(),setTimeout(function(){e.api.load(t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!1})},350)},generateEventRectsForMultipleXs:function(t){var e=this,i=e.config,a=t.append("rect").attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("class",s.default.eventRect).on("click",function(){var t=this,a=e.filterTargetsToShow(e.data.targets);if(!e.hasArcType(a)){var r=(0,n.mouse)(this),o=e.findClosestFromTargets(a,r);!o||(e.isBarType(o.id)||e.dist(o,r)<i.point_sensitivity)&&e.main.selectAll("."+s.default.shapes+e.getTargetSelectorSuffix(o.id)).selectAll("."+s.default.shape+"-"+o.index).each(function(){(i.data_selection_grouped||e.isWithinShape(t,o))&&(e.toggleShape(t,o,o.index),e.config.data_onclick.call(e.api,o,t))})}}).call(i.data_selection_draggable&&e.drag?(0,n.drag)().origin(Object).on("drag",function(){e.drag((0,n.mouse)(this))}).on("dragstart",function(){e.dragstart((0,n.mouse)(this))}).on("dragend",function(){e.dragend()}):function(){});return"mouse"===e.inputType&&a.on("mouseover",function(){e.selectRectForMultipleXs(this)}).on("mouseout",function(){!e.config||e.hasArcType()||e.unselectRect()}).on("mousemove",function(){e.selectRectForMultipleXs(this)}),a},dispatchEvent:function(t,e,i){var n=this,a=n.isMultipleX()?"."+s.default.eventRect:s.default.eventRect+"-"+e,r=n.main.select(a).node(),o=r.getBoundingClientRect(),l=o.left+(i?i[0]:0),u=o.top+(i?i[1]:0),c=document.createEvent("MouseEvents").initMouseEvent(t,!0,!0,window,0,l,u,l,u,!1,!1,!1,!1,0,null);r.dispatchEvent(c)}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(1),a=_interopRequireDefault(n),r=i(2),o=_interopRequireDefault(r),s=i(0);(0,s.extend)(a.default.prototype,{getCurrentWidth:function(){var t=this,e=t.config;return e.size_width?e.size_width:t.getParentWidth()},getCurrentHeight:function(){var t=this,e=t.config,i=e.size_height?e.size_height:t.getParentHeight();return i>0?i:320/(t.hasType("gauge")&&!e.gauge_fullCircle?2:1)},getCurrentPaddingTop:function(){var t=this,e=t.config,i=(0,s.isValue)(e.padding_top)?e.padding_top:0;return t.title&&t.title.node()&&(i+=t.getTitlePadding()),t.subTitle&&t.subTitle.node()&&(i+=t.getSubTitlePadding()),i},getCurrentPaddingBottom:function(){var t=this.config;return(0,s.isValue)(t.padding_bottom)?t.padding_bottom:0},getCurrentPaddingLeft:function(t){var e=this,i=e.config;return(0,s.isValue)(i.padding_left)?i.padding_left:i.axis_rotated?i.axis_x_show?Math.max((0,s.ceil10)(e.getAxisWidthByAxisId("x",t)),40):1:!i.axis_y_show||i.axis_y_inner?e.axis.getYAxisLabelPosition().isOuter?30:1:(0,s.ceil10)(e.getAxisWidthByAxisId("y",t))},getCurrentPaddingRight:function(){var t=this,e=t.config,i=t.isLegendRight?t.getLegendWidth()+20:0;return(0,s.isValue)(e.padding_right)?e.padding_right+1:e.axis_rotated?10+i:!e.axis_y2_show||e.axis_y2_inner?2+i+(t.axis.getY2AxisLabelPosition().isOuter?20:0):(0,s.ceil10)(t.getAxisWidthByAxisId("y2"))+i},getParentRectValue:function(t){for(var e=this.selectChart.node(),i=void 0;e&&"BODY"!==e.tagName;){try{i=e.getBoundingClientRect()[t]}catch(n){"width"===t&&(i=e.offsetWidth)}if(i)break;e=e.parentNode}return i},getParentWidth:function(){return this.getParentRectValue("width")},getParentHeight:function(){var t=this.selectChart.style("height");return t.indexOf("px")>0?+t.replace("px",""):0},getSvgLeft:function(t){var e=this,i=e.config,n=i.axis_rotated||!i.axis_rotated&&!i.axis_y_inner,a=i.axis_rotated?o.default.axisX:o.default.axisY,r=e.main.select("."+a).node(),s=r&&n?r.getBoundingClientRect():{right:0},l=e.selectChart.node().getBoundingClientRect(),u=e.hasArcType(),c=s.right-l.left-(u?0:e.getCurrentPaddingLeft(t));return c>0?c:0},getAxisWidthByAxisId:function(t,e){var i=this,n=i.axis.getLabelPositionById(t);return i.axis.getMaxTickWidth(t,e)+(n.isInner?20:40)},getHorizontalAxisHeight:function(t){var e=this,i=e.config,n=30;return"x"!==t||i.axis_x_show?"x"===t&&i.axis_x_height?i.axis_x_height:"y"!==t||i.axis_y_show?"y2"!==t||i.axis_y2_show?("x"===t&&!i.axis_rotated&&i.axis_x_tick_rotate&&(n=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-i.axis_x_tick_rotate)/180)),"y"===t&&i.axis_rotated&&i.axis_y_tick_rotate&&(n=30+e.axis.getMaxTickWidth(t)*Math.cos(Math.PI*(90-i.axis_y_tick_rotate)/180)),n+(e.axis.getLabelPositionById(t).isInner?0:10)+("y2"===t?-10:0)):e.rotated_padding_top:!i.legend_show||e.isLegendRight||e.isLegendInset?1:10:8},getEventRectWidth:function(){return Math.max(0,this.xAxis.tickInterval())}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{getShapeIndices:function(t){var e=this,i=e.config,n={},a=0,r=void 0,o=void 0;return e.filterTargetsToShow(e.data.targets.filter(t,e)).forEach(function(t){for(r=0;r<i.data_groups.length;r++)if(!(i.data_groups[r].indexOf(t.id)<0))for(o=0;o<i.data_groups[r].length;o++)if(i.data_groups[r][o]in n){n[t.id]=n[i.data_groups[r][o]];break}(0,l.isUndefined)(n[t.id])&&(n[t.id]=a++)}),n.__max__=a-1,n},getShapeX:function(t,e,i,n){var a=this,r=n?a.subX:a.zoomScale?a.zoomScale:a.x;return function(n){var a=n.id in i?i[n.id]:0;return n.x||0===n.x?r(n.x)-t*(e/2-a):0}},getShapeY:function(t){var e=this;return function(i){return(t?e.getSubYScale(i.id):e.getYScale(i.id))(i.value)}},getShapeOffset:function(t,e,i){var n=this,a=n.orderTargets(n.filterTargetsToShow(n.data.targets.filter(t,n))),r=a.map(function(t){return t.id});return function(t,o){var s=i?n.getSubYScale(t.id):n.getYScale(t.id),l=s(0),u=l,c=o;return a.forEach(function(i){var a=n.isStepType(t)?n.convertValuesToStep(i.values):i.values;i.id===t.id||e[i.id]!==e[t.id]||r.indexOf(i.id)<r.indexOf(t.id)&&((void 0===a[c]||+a[c].x!=+t.x)&&(c=-1,a.forEach(function(e,i){(e.x.constructor===Date?+e.x:e.x)===(t.x.constructor===Date?+t.x:t.x)&&(c=i)})),c in a&&a[c].value*t.value>=0&&(u+=s(a[c].value)-l))}),u}},isWithinShape:function(t,e){var i=this,a=(0,n.select)(t),o=void 0;return i.isTargetToShow(e.id)?t.getAttribute("data-type")?o=i.isStepType(e)?i.isWithinStep(t,i.getYScale(e.id)(e.value)):i.isWithinMarkerPoint(t,1.5*i.pointSelectR(e)):"path"===t.nodeName&&(o=!a.classed(r.default.bar)||i.isWithinBar(t)):o=!1,o},getInterpolate:function(t){var e=this,i=e.getInterpolateType(t);return{basis:n.curveBasis,"basis-closed":n.curveBasisClosed,"basis-open":n.curveBasisOpen,bundle:n.curveBundle,cardinal:n.curveCardinal,"cardinal-closed":n.curveCardinalClosed,"cardinal-open":n.curveCardinalOpen,"catmull-rom":n.curveCatmullRom,"catmull-rom-closed":n.curveCatmullRomClosed,"catmull-rom-open":n.curveCatmullRomOpen,"monotone-x":n.curveMonotoneX,"monotone-y":n.curveMonotoneY,natural:n.curveNatural,"linear-closed":n.curveLinearClosed,linear:n.curveLinear,step:n.curveStep,"step-after":n.curveStepAfter,"step-before":n.curveStepBefore}[i]},getInterpolateType:function(t){var e=this,i=e.isInterpolationType(e.config.spline_interpolation_type)?e.config.spline_interpolation_type:"cardinal";return e.isSplineType(t)?i:e.isStepType(t)?e.config.line_step_type:"linear"}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initLine:function(){this.main.select("."+r.default.chart).append("g").attr("class",r.default.chartLines)},updateTargetsForLine:function(t){var e=this,i=e.config,n=e.classChartLine.bind(e),a=e.classLines.bind(e),o=e.classAreas.bind(e),s=e.classMarkerPoints.bind(e),l=e.classFocus.bind(e),u=e.main.select("."+r.default.chartLines).selectAll("."+r.default.chartLine).data(t).attr("class",function(t){return n(t)+l(t)}),c=u.enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none");c.append("g").attr("class",a),c.append("g").attr("class",o),i.data_selection_enabled&&c.append("g").attr("class",function(t){return e.generateClass(r.default.selectedMarkerPoints,t.id)}),c.append("g").attr("class",s).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null}),t.forEach(function(t){e.main.selectAll("."+r.default.selectedMarkerPoints+e.getTargetSelectorSuffix(t.id)).selectAll("."+r.default.selectedMarkerPoint).each(function(e){e.value=t.values[e.index].value})})},updateLine:function(t){var e=this;e.mainLine=e.main.selectAll("."+r.default.lines).selectAll("."+r.default.line).data(e.lineData.bind(e)),e.mainLine.exit().transition().duration(t).style("opacity","0").remove(),e.mainLine=e.mainLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.mainLine).style("opacity",e.initialOpacity.bind(e)).style("fill","none").style("shape-rendering",function(t){return e.isStepType(t)?"crispEdges":""}).attr("transform",null)},redrawLine:function(t,e){return[(e?this.mainLine.transition(Math.random().toString()):this.mainLine).attr("d",t).style("stroke",this.color).style("opacity","1")]},generateDrawLine:function(t,e){var i=this,a=i.config,r=a.line_connectNull,o=a.axis_rotated,s=i.generateGetLinePoints(t,e),l=e?i.getSubYScale:i.getYScale,u=function(t){return(e?i.subxx:i.xx).call(i,t)},c=function(t,e){return a.data_groups.length>0?s(t,e)[0][1]:l.call(i,t.id)(t.value)},d=(0,n.line)();return d=o?d.x(c).y(u):d.x(u).y(c),r||(d=d.defined(function(t){return null!==t.value})),function(t){var n=e?i.x:i.subX,s=l.call(i,t.id),u=r?i.filterRemoveNull(t.values):t.values,c=0,h=0,p=void 0;return i.isLineType(t)?a.data_regions[t.id]?p=i.lineWithRegions(u,n,s,a.data_regions[t.id]):(i.isStepType(t)&&(u=i.convertValuesToStep(u)),p=d.curve(i.getInterpolate(t))(u)):(u[0]&&(c=n(u[0].x),h=s(u[0].value)),p=o?"M "+h+" "+c:"M "+c+" "+h),p||"M 0 0"}},generateGetLinePoints:function(t,e){var i=this,n=i.config,a=t.__max__+1,r=!!e,o=i.getShapeX(0,a,t,r),s=i.getShapeY(r),l=i.getShapeOffset(i.isLineType,t,r),u=r?i.getSubYScale:i.getYScale;return function(t,e){var a=u.call(i,t.id)(0),r=l(t,e)||a,c=o(t),d=s(t);n.axis_rotated&&(t.value>0&&d<a||t.value<0&&a<d)&&(d=a);var h=[c,d-(a-r)];return[h,h,h,h]}},lineWithRegions:function(t,e,i,n){function generateM(t){return"M"+t[0][0]+" "+t[0][1]+" "+t[1][0]+" "+t[1][1]}var a=this,r=a.config,o=a.isCategorized()?.5:0,s=[],u=void 0,c=void 0,d="M",h=void 0,p=void 0,f=void 0,g=void 0,_=void 0,m=void 0,y=void 0,v=void 0;if((0,l.isDefined)(n))for(u=0;u<n.length;u++)s[u]={},s[u].start=(0,l.isUndefined)(n[u].start)?t[0].x:a.isTimeSeries()?a.parseDate(n[u].start):n[u].start,s[u].end=(0,l.isUndefined)(n[u].end)?t[t.length-1].x:a.isTimeSeries()?a.parseDate(n[u].end):n[u].end;var x=r.axis_rotated?function(t){return i(t.value)}:function(t){return e(t.x)},b=r.axis_rotated?function(t){return e(t.x)}:function(t){return i(t.value)};for(h=a.isTimeSeries()?function(t,n,a,o){var s=t.x.getTime(),l=n.x-t.x,u=new Date(s+l*a),c=new Date(s+l*(a+o)),d=void 0;return d=r.axis_rotated?[[i(f(a)),e(u)],[i(f(a+y)),e(c)]]:[[e(u),i(f(a))],[e(c),i(f(a+y))]],generateM(d)}:function(t,n,a,o){var s=void 0;return s=r.axis_rotated?[[i(f(a),!0),e(p(a))],[i(f(a+o),!0),e(p(a+o))]]:[[e(p(a),!0),i(f(a))],[e(p(a+o),!0),i(f(a+o))]],generateM(s)},u=0;u<t.length;u++)if((0,l.isUndefined)(s)||!function(t,e){var i=void 0;for(i=0;i<e.length;i++)if(e[i].start<t&&t<=e[i].end)return!0;return!1}(t[u].x,s))d+=" "+x(t[u])+" "+b(t[u]);else for(p=a.getScale(t[u-1].x+o,t[u].x+o,a.isTimeSeries()),f=a.getScale(t[u-1].value,t[u].value),g=e(t[u].x)-e(t[u-1].x),_=i(t[u].value)-i(t[u-1].value),m=Math.sqrt(Math.pow(g,2)+Math.pow(_,2)),y=2/m,v=2*y,c=y;c<=1;c+=v)d+=h(t[u-1],t[u],c,y);return d},updateArea:function(t){var e=this;e.mainArea=e.main.selectAll("."+r.default.areas).selectAll("."+r.default.area).data(e.lineData.bind(e)),e.mainArea.exit().transition().duration(t).style("opacity","0").remove(),e.mainArea=e.mainArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=(0,n.select)(this).style("opacity"),"0"}).merge(e.mainArea),e.mainArea.style("opacity",e.orgAreaOpacity)},redrawArea:function(t,e){return[(e?this.mainArea.transition(Math.random().toString()):this.mainArea).attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)]},generateDrawArea:function(t,e){var i=this,a=i.config,r=a.line_connectNull,o=a.axis_rotated,s=i.generateGetAreaPoints(t,e),l=e?i.getSubYScale:i.getYScale,u=function(t){return(e?i.subxx:i.xx).call(i,t)},c=function(t,e){return a.data_groups.length>0?s(t,e)[0][1]:l.call(i,t.id)(i.getAreaBaseValue(t.id))},d=function(t,e){return a.data_groups.length>0?s(t,e)[1][1]:l.call(i,t.id)(t.value)},h=(0,n.area)();return h=o?h.x0(c).x1(d).y(u):h.x(u).y0(a.area_above?0:c).y1(d),r||(h=h.defined(function(t){return null!==t.value})),function(t){var e=r?i.filterRemoveNull(t.values):t.values,n=0,a=0,s=void 0;return i.isAreaType(t)?(i.isStepType(t)&&(e=i.convertValuesToStep(e)),s=h.curve(i.getInterpolate(t))(e)):(e[0]&&(n=i.x(e[0].x),a=i.getYScale(t.id)(e[0].value)),s=o?"M "+a+" "+n:"M "+n+" "+a),s||"M 0 0"}},getAreaBaseValue:function(){return 0},generateGetAreaPoints:function(t,e){var i=this,n=i.config,a=t.__max__+1,r=i.getShapeX(0,a,t,!!e),o=i.getShapeY(!!e),s=i.getShapeOffset(i.isAreaType,t,!!e),l=e?i.getSubYScale:i.getYScale;return function(t,e){var a=l.call(i,t.id)(0),u=s(t,e)||a,c=r(t),d=o(t);return n.axis_rotated&&(t.value>0&&d<a||t.value<0&&a<d)&&(d=a),[[c,u],[c,d-(a-u)],[c,d-(a-u)],[c,u]]}},updateMarkerPoint:function(){var t=this,e=t.config,i=t.pointR.bind(t),a=t.main.selectAll("."+r.default.markerPoints).selectAll("."+r.default.markerPoint).data(t.lineScatterBubbleData.bind(t));a.exit().remove(),a.enter().each(function(o){var s=i(o),u=t.color;(0,l.notEmpty)(o.data)&&(s=o.data.marker.radius,u=o.data.marker.lineColor);var c=(0,l.shapeSymbol)(20*s),d=(0,n.select)(this);if((0,l.notEmpty)(e.point_series)&&(0,l.notEmpty)(e.point_series[o.id])){var h=e.point_series[o.id],p=t.findHighlightPoint(h,o),f=(0,l.notEmpty)(p)&&(0,l.notEmpty)(p.animation)?r.default.highlightMarkerPoint:"",g=void 0;if((0,l.isEmpty)(h.type)&&(0,l.isString)(h)&&(g=h),(0,l.notEmpty)(h.type)&&(g=(0,l.notEmpty)(p)&&(0,l.notEmpty)(p.type)?p.type:h.type),Object.prototype.hasOwnProperty.call(c,g))d.append("path").attr("data-type",g).attr("data-show",t.pointShow.bind(t)).attr("class",function(e){return t.classMarkerPoint(e)+" "+f}).attr("d",c[g]).style("stroke",u).merge(a).style("opacity",t.initialOpacityForMarkerPoint.bind(t));else if("image"===g){var _=(0,l.notEmpty)(p)&&(0,l.notEmpty)(p.image)?p.image:h.image,m=(0,l.notEmpty)(_)&&(0,l.notEmpty)(_.url)?_.url:"",y=(0,l.notEmpty)(_)&&(0,l.notEmpty)(_.width)?_.width:25,v=(0,l.notEmpty)(_)&&(0,l.notEmpty)(_.height)?_.height:25;(0,l.notEmpty)(m)&&d.append("image").attr("preserveAspectRatio","none").attr("data-type",g).attr("data-show",t.pointShow.bind(t)).attr("class",function(e){return t.classMarkerPoint(e)+" "+f}).attr("xlink:href",m).attr("width",y).attr("height",v).merge(a).style("opacity",t.initialOpacityForMarkerPoint.bind(t))}else d.append("path").attr("data-type","circle").attr("data-show",t.pointShow.bind(t)).attr("class",t.classMarkerPoint.bind(t)).attr("d",c.circle).style("stroke",u).merge(a).style("opacity",t.initialOpacityForMarkerPoint.bind(t))}else d.append("path").attr("data-type","circle").attr("data-show",t.pointShow.bind(t)).attr("class",t.classMarkerPoint.bind(t)).attr("d",c.circle).style("stroke",u).merge(a).style("opacity",t.initialOpacityForMarkerPoint.bind(t))}),t.mainMarkerPoint=t.main.selectAll("."+r.default.markerPoints).selectAll("."+r.default.markerPoint)},redrawMarkerPoint:function(t,e,i,n){var a=this.main.selectAll("."+r.default.selectedMarkerPoint),o=void 0,s=this,u=s.config;if(i){var c=Math.random().toString();o=this.mainMarkerPoint.attr("transform",function(i){return"translate("+(t(i)-Math.ceil(s.marketPointCalculator(this,"width")))+","+(e(i)-Math.ceil(s.marketPointCalculator(this,"height")))+")"}).transition(c).style("opacity",this.pointShow.bind(this)).style("stroke-width",u.point_stroke_width+"px").style("fill",(0,l.notEmpty)(u.point_fill_color)?u.point_fill_color:this.color),a=a.transition(Math.random().toString())}else o=this.mainMarkerPoint.attr("transform",function(i){return"translate("+(t(i)-Math.ceil(s.marketPointCalculator(this,"width")))+","+(e(i)-Math.ceil(s.marketPointCalculator(this,"height")))+")"}).style("opacity",this.pointShow.bind(this)).style("stroke-width",u.point_stroke_width+"px").style("fill",(0,l.notEmpty)(u.point_fill_color)?u.point_fill_color:this.color);return[o,a.attr("cx",t).attr("cy",e)]},pointShow:function(t){var e=this,i=e.config,n=e.opacityForMarkerPoint(t);if("0"===n)return"0";if((0,l.notEmpty)(i.point_series)&&(0,l.notEmpty)(i.point_series[t.id])){var a=i.point_series[t.id];n=(0,l.isEmpty)(a.show)?"1":a.show?"1":"0"}return n},findHighlightPoint:function(t,e){var i=null;return(0,l.notEmpty)(t.highlight)&&t.highlight.forEach(function(t){(0,l.notEmpty)(t.value)&&t.value===e.value&&(i=t)}),i},marketPointCalculator:function(t,e){return"image"===t.nodeName?t.getAttribute(e)/2:0},circleX:function(t){return this.config.zoom_enabled&&this.zoomScale?t.x||0===t.x?this.zoomScale(t.x):null:t.x||0===t.x?this.x(t.x):null},updateCircleY:function(){var t=this,e=void 0,i=void 0;t.config.data_groups.length>0?(e=t.getShapeIndices(t.isLineType),i=t.generateGetLinePoints(e),t.circleY=function(t,e){return i(t,e)[0][1]}):t.circleY=function(e){return t.getYScale(e.id)(e.value)}},getMarkerPoint:function(t,e){var i=this,n=(0,l.isValue)(t)?"-"+t:"";return(e?i.main.selectAll("."+r.default.markerPoints+i.getTargetSelectorSuffix(e)):i.main).selectAll("."+r.default.markerPoint+n)},expandMarkerPoint:function(t,e,i){var a=this,o=a.config,s=a.pointExpandedR.bind(a);i&&a.unexpandMarkerPoint(),a.getMarkerPoint(t,e).classed(r.default.EXPANDED,!0).each(function(t){var e=(0,n.select)(this),i=s(t);(0,l.notEmpty)(t.data)&&(i=t.data.marker.radius);var a=(0,l.shapeSymbol)(20*i),r=parseFloat(e.attr("data-show"),0),u=e.style("stroke");"image"===e.node().nodeName?e.transition().duration(300).style("opacity",0===r?"1":r.toString()).style("fill",(0,l.notEmpty)(o.point_fill_color)?"none"===o.point_fill_color?"#CCCCCC":o.point_fill_color:u):Object.prototype.hasOwnProperty.call(a,e.attr("data-type"))&&e.transition().duration(300).attr("d",a[e.attr("data-type")]).style("opacity",0===r?"1":r.toString()).style("fill",(0,l.notEmpty)(o.point_fill_color)?"none"===o.point_fill_color?"#CCCCCC":o.point_fill_color:u)})},unexpandMarkerPoint:function(t){var e=this,i=e.config,a=e.pointR.bind(e);e.getMarkerPoint(t).filter(function(){return(0,n.select)(this).classed(r.default.EXPANDED)}).classed(r.default.EXPANDED,!1).each(function(t){var e=(0,n.select)(this),r=a(t);(0,l.notEmpty)(t.data)&&(r=t.data.marker.radius);var o=(0,l.shapeSymbol)(20*r),s=e.attr("data-show"),u=e.style("stroke");"image"===e.node().nodeName?e.transition().duration(300).style("opacity",0===s?"1":s).style("fill",(0,l.notEmpty)(i.point_fill_color)?i.point_fill_color:u):Object.prototype.hasOwnProperty.call(o,e.attr("data-type"))&&e.transition().duration(300).attr("d",o[e.attr("data-type")]).style("opacity",0===s?"1":s).style("fill",(0,l.notEmpty)(i.point_fill_color)?i.point_fill_color:u)})},pointR:function(t){var e=this,i=e.config,n=i.point_r,a=n;return e.isStepType(t)?a=0:e.isBubbleType(t)?a=e.getBubbleR(t):(0,l.isFunction)(n)&&(a=n(t)),a},pointExpandedR:function(t){var e=this,i=e.config,n=e.isBubbleType(t)?1.15:1.75;return i.point_focus_expand_enabled?i.point_focus_expand_r||e.pointR(t)*n:e.pointR(t)},pointSelectR:function(t){var e=this,i=e.config.point_select_r;return(0,l.isFunction)(i)?i(t):i||4*e.pointR(t)},isWithinMarkerPoint:function(t,e){var i=(0,n.mouse)(t),a=(0,n.select)(t),r=+a.attr("cx"),o=+a.attr("cy");return Math.sqrt(Math.pow(r-i[0],2)+Math.pow(o-i[1],2))<e},isWithinStep:function(t,e){return Math.abs(e-(0,n.mouse)(t)[1])<30}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initBar:function(){this.main.select("."+r.default.chart).append("g").attr("class",r.default.chartBars)},updateTargetsForBar:function(t){var e=this,i=e.config,n=e.classChartBar.bind(e),a=e.classBars.bind(e),o=e.classFocus.bind(e);e.main.select("."+r.default.chartBars).selectAll("."+r.default.chartBar).data(t).attr("class",function(t){return n(t)+o(t)}).enter().append("g").attr("class",n).style("opacity","0").style("pointer-events","none").append("g").attr("class",a).style("cursor",function(t){return i.data_selection_isselectable(t)?"pointer":null})},updateBar:function(t){var e=this,i=e.barData.bind(e),n=e.classBar.bind(e),a=e.initialOpacity.bind(e),o=function(t){return e.color(t.id)};e.mainBar=e.main.selectAll("."+r.default.bars).selectAll("."+r.default.bar).data(i),e.mainBar.exit().transition().duration(t).style("opacity","0").remove(),e.mainBar=e.mainBar.enter().append("path").attr("class",n).style("stroke",o).style("fill",o).merge(e.mainBar).style("opacity",a)},redrawBar:function(t,e){return[(e?this.mainBar.transition(Math.random().toString()):this.mainBar).attr("d",t).style("fill",this.color).style("opacity","1")]},getBarW:function(t,e){var i=this,n=i.config,a="number"==typeof n.bar_width?n.bar_width:e?t.tickInterval()*n.bar_width_ratio/e:0;return n.bar_width_max&&a>n.bar_width_max?n.bar_width_max:a},getBars:function(t,e){var i=this,n=(0,l.isValue)(t)?"-"+t:"";return(e?i.main.selectAll("."+r.default.bars+i.getTargetSelectorSuffix(e)):i.main).selectAll("."+r.default.bar+n)},expandBars:function(t,e,i){var n=this;i&&n.unexpandBars(),n.getBars(t,e).classed(r.default.EXPANDED,!0)},unexpandBars:function(t){this.getBars(t).classed(r.default.EXPANDED,!1)},generateDrawBar:function(t,e){var i=this,n=i.config,a=i.generateGetBarPoints(t,e);return function(t,e){var i=a(t,e),r=n.axis_rotated?1:0,o=n.axis_rotated?0:1;return"M "+i[0][r]+","+i[0][o]+"\n\t\t\tL "+i[1][r]+","+i[1][o]+"\n\t\t\tL "+i[2][r]+","+i[2][o]+"\n\t\t\tL "+i[3][r]+","+i[3][o]+" z"}},generateGetBarPoints:function(t,e){var i=this,n=e?i.subXAxis:i.xAxis,a=t.__max__+1,r=i.getBarW(n,a),o=i.getShapeX(r,a,t,!!e),s=i.getShapeY(!!e),l=i.getShapeOffset(i.isBarType,t,!!e),u=e?i.getSubYScale:i.getYScale;return function(t,e){var n=u.call(i,t.id)(0),a=l(t,e)||n,c=o(t),d=s(t),h={x:c+r/2,y:d-(n-a)};return i.config.axis_rotated&&((t.value>0&&d<n||t.value<0&&n<d)&&(d=n),h.x=c+r/2,h.y=d-(n-a)),i.data.targets.forEach(function(i){i.id===t.id&&(i.values[e].topCoordinates=h)}),[[c,a],[c,d-(n-a)],[c+r,d-(n-a)],[c+r,a]]}},isWithinBar:function(t){var e=(0,n.mouse)(t),i=(0,l.getRectSegList)(t),a=t.getBBox(),r=i[0],o=i[1],s=Math.min(r.x,o.x),u=Math.min(r.y,o.y),c=a.width,d=a.height;return s-2<e[0]&&e[0]<s+c+2&&u-2<e[1]&&e[1]<u+d+2}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(26),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(1),u=_interopRequireDefault(l);(0,i(0).extend)(u.default.prototype,{initWordCloud:function(){var t=this,e=t.config;t.main.select("."+s.default.chart).append("g").attr("class",s.default.chartWordClouds).attr("transform",t.getTranslate("wordcloud")),t.hasType("worlcloud")&&(e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1),t.wordCloud=(0,r.default)().size([t.width,t.height])},updateTargetsForWordCloud:function(t){var e=this,i=t[0].values[0].value,a=(0,n.max)(i,function(t){return t.value}),r=(0,n.scaleLinear)().domain([0,a]).range([20,40]);e.wordCloud.words(i.map(function(t){return{id:t.id||t.label,text:t.label,size:r(t.value)}})).rotate(0).font("Impact").fontSize(function(t){return t.size}).random(function(){return.5})},updateWordCloud:function(){var t=this,e=function(e){return t.color(e)};t.wordCloud.on("end",function(i){t.main.selectAll("."+s.default.chartWordClouds).selectAll("text").data(i).enter().append("text").style("font-size",function(t){return t.size+"px"}).style("font-family","Impact").style("fill",function(t,i){return t.color?t.color:e(i)}).attr("text-anchor","middle").attr("transform",function(t){return"translate("+t.x+", "+t.y+") rotate("+t.rotate+")"}).text(function(t){return t.text}).on("click",function(e){t.config.wordcloud_onclicked.call(t,e,this)})}).start(),t.wordCloud.stop()},redrawWordCloud:function(){return[this.mainWordCloud]}})},function(t,e,i){function cloudText(t){return t.text}function cloudFont(){return"serif"}function cloudFontNormal(){return"normal"}function cloudFontSize(t){return Math.sqrt(t.value)}function cloudRotate(){return 30*(~~(6*Math.random())-3)}function cloudPadding(){return 1}function cloudSprite(t,e,i,n){if(!e.sprite){var s=t.context,l=t.ratio;s.clearRect(0,0,(r<<5)/l,o/l);var u=0,c=0,d=0,h=i.length;for(--n;++n<h;){e=i[n],s.save(),s.font=e.style+" "+e.weight+" "+~~((e.size+1)/l)+"px "+e.font;var p=s.measureText(e.text+"m").width*l,f=e.size<<1;if(e.rotate){var g=Math.sin(e.rotate*a),_=Math.cos(e.rotate*a),m=p*_,y=p*g,v=f*_,x=f*g;p=Math.max(Math.abs(m+x),Math.abs(m-x))+31>>5<<5,f=~~Math.max(Math.abs(y+v),Math.abs(y-v))}else p=p+31>>5<<5;if(f>d&&(d=f),u+p>=r<<5&&(u=0,c+=d,d=0),c+f>=o)break;s.translate((u+(p>>1))/l,(c+(f>>1))/l),e.rotate&&s.rotate(e.rotate*a),s.fillText(e.text,0,0),e.padding&&(s.lineWidth=2*e.padding,s.strokeText(e.text,0,0)),s.restore(),e.width=p,e.height=f,e.xoff=u,e.yoff=c,e.x1=p>>1,e.y1=f>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,u+=p}for(var b=s.getImageData(0,0,(r<<5)/l,o/l).data,w=[];--n>=0;)if(e=i[n],e.hasText){for(var p=e.width,L=p>>5,f=e.y1-e.y0,T=0;T<f*L;T++)w[T]=0;if(null==(u=e.xoff))return;c=e.yoff;for(var k=0,C=-1,A=0;A<f;A++){for(var T=0;T<p;T++){var P=L*A+(T>>5),M=b[(c+A)*(r<<5)+(u+T)<<2]?1<<31-T%32:0;w[P]|=M,k|=M}k?C=A:(e.y0++,f--,A--,c++)}e.y1=e.y0+C,e.sprite=w.slice(0,(e.y1-e.y0)*L)}}}function cloudCollide(t,e,i){i>>=5;for(var n,a=t.sprite,r=t.width>>5,o=t.x-(r<<4),s=127&o,l=32-s,u=t.y1-t.y0,c=(t.y+t.y0)*i+(o>>5),d=0;d<u;d++){n=0;for(var h=0;h<=r;h++)if((n<<l|(h<r?(n=a[d*r+h])>>>s:0))&e[c+h])return!0;c+=i}return!1}function cloudBounds(t,e){var i=t[0],n=t[1];e.x+e.x0<i.x&&(i.x=e.x+e.x0),e.y+e.y0<i.y&&(i.y=e.y+e.y0),e.x+e.x1>n.x&&(n.x=e.x+e.x1),e.y+e.y1>n.y&&(n.y=e.y+e.y1)}function collideRects(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function archimedeanSpiral(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function rectangularSpiral(t){var e=4*t[0]/t[1],i=0,n=0;return function(t){var a=t<0?-1:1;switch(Math.sqrt(1+4*a*t)-a&3){case 0:i+=e;break;case 1:n+=4;break;case 2:i-=e;break;default:n-=4}return[i,n]}}function zeroArray(t){for(var e=[],i=-1;++i<t;)e[i]=0;return e}function cloudCanvas(){return document.createElement("canvas")}function functor(t){return"function"==typeof t?t:function(){return t}}var n=i(27).dispatch,a=Math.PI/180,r=64,o=2048;t.exports=function(){function getContext(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(r<<5)/e,t.height=o/e;var i=t.getContext("2d");return i.fillStyle=i.strokeStyle="red",i.textAlign="center",{context:i,ratio:e}}function place(e,i,n){for(var a,r,o,s=(t[0],t[1],i.x),l=i.y,u=Math.sqrt(t[0]*t[0]+t[1]*t[1]),c=h(t),d=m()<.5?1:-1,p=-d;(a=c(p+=d))&&(r=~~a[0],o=~~a[1],!(Math.min(Math.abs(r),Math.abs(o))>=u));)if(i.x=s+r,i.y=l+o,!(i.x+i.x0<0||i.y+i.y0<0||i.x+i.x1>t[0]||i.y+i.y1>t[1])&&(!n||!cloudCollide(i,e,t[0]))&&(!n||collideRects(i,n))){for(var f,g=i.sprite,_=i.width>>5,y=t[0]>>5,v=i.x-(_<<4),x=127&v,b=32-x,w=i.y1-i.y0,L=(i.y+i.y0)*y+(v>>5),T=0;T<w;T++){f=0;for(var k=0;k<=_;k++)e[L+k]|=f<<b|(k<_?(f=g[T*_+k])>>>x:0);L+=y}return delete i.sprite,!0}return!1}var t=[256,256],e=cloudText,i=cloudFont,a=cloudFontSize,l=cloudFontNormal,u=cloudFontNormal,c=cloudRotate,d=cloudPadding,h=archimedeanSpiral,p=[],f=1/0,g=n("word","end"),_=null,m=Math.random,y={},v=cloudCanvas;return y.canvas=function(t){return arguments.length?(v=functor(t),y):v},y.start=function(){function step(){for(var e=Date.now();Date.now()-e<f&&++h<s&&_;){var i=b[h];i.x=t[0]*(m()+.5)>>1,i.y=t[1]*(m()+.5)>>1,cloudSprite(n,i,b,h),i.hasText&&place(r,i,o)&&(x.push(i),g.word(i),o?cloudBounds(o,i):o=[{x:i.x+i.x0,y:i.y+i.y0},{x:i.x+i.x1,y:i.y+i.y1}],i.x-=t[0]>>1,i.y-=t[1]>>1)}h>=s&&(y.stop(),g.end(x,o))}var n=getContext(v()),r=zeroArray((t[0]>>5)*t[1]),o=null,s=p.length,h=-1,x=[],b=p.map(function(t,n){return t.text=e.call(this,t,n),t.font=i.call(this,t,n),t.style=l.call(this,t,n),t.weight=u.call(this,t,n),t.rotate=c.call(this,t,n),t.size=~~a.call(this,t,n),t.padding=d.call(this,t,n),t}).sort(function(t,e){return e.size-t.size});return _&&clearInterval(_),_=setInterval(step,0),step(),y},y.stop=function(){return _&&(clearInterval(_),_=null),y},y.timeInterval=function(t){return arguments.length?(f=null==t?1/0:t,y):f},y.words=function(t){return arguments.length?(p=t,y):p},y.size=function(e){return arguments.length?(t=[+e[0],+e[1]],y):t},y.font=function(t){return arguments.length?(i=functor(t),y):i},y.fontStyle=function(t){return arguments.length?(l=functor(t),y):l},y.fontWeight=function(t){return arguments.length?(u=functor(t),y):u},y.rotate=function(t){return arguments.length?(c=functor(t),y):c},y.text=function(t){return arguments.length?(e=functor(t),y):e},y.spiral=function(t){return arguments.length?(h=s[t]||t,y):h},y.fontSize=function(t){return arguments.length?(a=functor(t),y):a},y.padding=function(t){return arguments.length?(d=functor(t),y):d},y.random=function(t){return arguments.length?(m=t,y):m},y.on=function(){var t=g.on.apply(g,arguments);return t===g?y:t},y};var s={archimedean:archimedeanSpiral,rectangular:rectangularSpiral}},function(t,e,i){!function(t,i){i(e)}(0,function(t){"use strict";function dispatch(){return new Dispatch(arguments)}function Dispatch(t){function parseType(t){var e=(t+="").indexOf("."),i=t;if(e>=0?t=t.slice(0,e):i+=".",t&&!a.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:i}}var e,i=-1,n=t.length,a={},r={},o=this;for(o.on=function(t,e){if(t=parseType(t),arguments.length<2)return(e=r[t.name])&&e.value;if(t.type){var i,n=a[t.type],s=r[t.name];s&&(s.value=null,i=n.indexOf(s),a[t.type]=n=n.slice(0,i).concat(n.slice(i+1)),delete r[t.name]),e&&(e={value:e},r[t.name]=e,n.push(e))}else if(null==e)for(var l in a)(e=r[l+t.name])&&(e.value=null,n=a[l],i=n.indexOf(e),a[l]=n.slice(0,i).concat(n.slice(i+1)),delete r[e.name]);return o};++i<n;){if(!(e=t[i]+"")||e in o)throw new Error("illegal or duplicate type: "+e);a[e]=[],o[e]=function(t){return function(){for(var e,i=a[t],n=-1,r=i.length;++n<r;)(e=i[n].value)&&e.apply(this,arguments);return o}}(e)}}dispatch.prototype=Dispatch.prototype;t.version="0.2.6",t.dispatch=dispatch})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(2),a=_interopRequireDefault(n),r=i(1),o=_interopRequireDefault(r);(0,i(0).extend)(o.default.prototype,{initCandlestick:function(){var t=this;t.mainCandlestick=t.main.select("."+a.default.chart).append("g").attr("class",a.default.chartCandlestick.chart)},updateTargetsForCandlestick:function(t){var e=this,i=e.data.xs.Open,n=e.calculateBoxPath(t,i),r=n.boxPaths;e.candlestickTargets=t,e.mainCandlestick=e.main.select("."+a.default.chartCandlestick.chart).append("g").attr("class","candle-paths").selectAll("candlestick").data(r),e.mainCandlestick.enter().append("path").attr("class",function(t){return"candlestick-"+t.id})},updateCandlestick:function(){var t=this,e=t.config,i=t.candlestickTargets,n=t.data.xs.Open,r=t.calculateBoxPath(i,n),o=r.boxPaths;t.mainCandlestick=t.main.select("."+a.default.chartCandlestick.chart).selectAll("path").data(o),t.mainCandlestick.exit().remove(),t.mainCandlestick=t.mainCandlestick.enter().append("path").merge(t.mainCandlestick).style("stroke",e.candlestick_color_stroke).attr("class",function(t){return"increasing"===t.type?"increasing":"decreasing"}).style("fill",function(t){return"increasing"===t.type?e.candlestick_color_increasing:e.candlestick_color_decreasing})},redrawCandlestick:function(){return[this.mainCandlestick.attr("d",function(t){return t.path})]},calculateBoxPath:function(t,e){for(var i=this,n=i.config,a={open:t[0].values,high:t[1].values,low:t[2].values,close:t[3].values},r=n.candlestick_box_width||10,o=a.open.length,s=i.x,l=i.y,u=[],c=0;c<o;c++){var d=l(a.low[c].value),h=l(a.high[c].value),p=s(e[c])-r/2,f=p+r,g=l(Math.max(a.open[c].value,a.close[c].value)),_=l(Math.min(a.open[c].value,a.close[c].value)),m=p+r/2,y=a.close[c].value>a.open[c].value?"increasing":"decreasing";u.push({id:c,path:"M "+p+" "+g+" L "+f+" "+g+" L "+f+" "+_+" L "+p+" "+_+" Z M "+m+" "+g+" L "+m+" "+h+" M "+m+" "+_+" L "+m+" "+d,type:y})}return{boxPaths:u}}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initBoxplot:function(){this.main.select("."+r.default.chart).append("g").attr("class",r.default.chartBoxplot.chart)},updateTargetsForBoxplot:function(t){var e=this;e.targetsWithStatisticInfo=e.calculateStatisticInfo(t);var i=e.calculateBoxInfo(e.targetsWithStatisticInfo);e.mainBox=e.main.select("."+r.default.chartBoxplot.chart).append("g").attr("class",""+r.default.chartBoxplot.IRQ).selectAll("IQR").data(i.boxInfo),e.mainBoxplotLine=e.main.select("."+r.default.chartBoxplot.chart).append("g").attr("class",""+r.default.chartBoxplot.lines).selectAll("lines").data(i.lines),e.mainOutliers=e.main.select("."+r.default.chartBoxplot.chart).append("g").attr("class",""+r.default.chartBoxplot.outliers).selectAll("lines").data(i.outliers),e.mainLineTexts=e.main.select("."+r.default.chartBoxplot.chart).append("g").attr("class",""+r.default.chartBoxplot.texts).selectAll("text").data(i.lines),e.mainQuartileTexts=e.main.select("."+r.default.chartBoxplot.chart).append("g").attr("class",""+r.default.chartBoxplot.texts).selectAll("text").data(i.boxText),e.mainOutlierTexts=e.main.select("."+r.default.chartBoxplot.chart).append("g").attr("class",""+r.default.chartBoxplot.texts).selectAll("text").data(i.outliers),e.mainBox.enter().append("rect").attr("class",function(t){return"IRQ-"+t.id}).attr("stroke","black"),e.mainBoxplotLine.enter().append("line").attr("class",function(t){return"line-"+t.type+"-"+t.id}),e.mainOutliers.enter().append("circle").attr("class",function(t){return"outliers-"+t.type+"-"+t.id}),e.mainQuartileTexts.enter().append("text").attr("class",r.default.chartBoxplot.text.quartile),e.mainLineTexts.enter().append("text").attr("class",r.default.chartBoxplot.text.line),e.mainOutlierTexts.enter().append("text").attr("class",r.default.chartBoxplot.text.outlier)},updateBoxplot:function(){var t=this,e=t.config,i=t.calculateBoxInfo(t.targetsWithStatisticInfo),a=(0,l.getColor)(i.boxInfo.length),r=(0,n.format)(".2f");t.updateBoxes(i.boxInfo,a),t.updateLines(i.lines,a),t.updateOutliers(i.outliers,a),t.updateLineTexts(e,i.lines,r),t.updateOutlierTexts(e,i.outliers,r),t.updateQuartileTexts(e,i.boxText,r)},updateBoxes:function(t,e){var i=this;i.mainBox=i.main.select("."+r.default.chartBoxplot.chart).selectAll("rect").data(t),i.mainBox.exit().remove(),i.mainBox=i.mainBox.enter().append("rect").merge(i.mainBox).attr("stroke","black").attr("fill",function(t){return e(t.id)})},updateLines:function(t){var e=this;e.mainBoxplotLine=e.main.select("."+r.default.chartBoxplot.chart).selectAll("line").data(t),e.mainBoxplotLine.exit().remove(),e.mainBoxplotLine=e.mainBoxplotLine.enter().append("line").merge(e.mainBoxplotLine)},updateOutliers:function(t,e){var i=this,n=i.config;i.mainOutliers=i.main.select("."+r.default.chartBoxplot.chart).selectAll("circle").data(t),i.mainOutliers.exit().remove(),i.mainOutliers=i.mainOutliers.enter().append("circle").merge(i.mainOutliers).attr("r",n.boxplot_outliers_radius).attr("fill",function(t){return"suspected"===t.type?"none":e(t.id)}).attr("stroke",function(t){return e(t.id)})},updateLineTexts:function(t,e,i){var n=this;n.mainLineTexts=n.main.select("."+r.default.chartBoxplot.chart).selectAll("."+r.default.chartBoxplot.text.line).data(e),n.mainLineTexts.exit().remove(),n.mainLineTexts=n.mainLineTexts.enter().append("text").merge(n.mainLineTexts).text(function(t){return"connection"===t.type?null:i(t.value)}).style("fill",t.boxplot_text_color).attr("opacity",function(t){return t.show?"1":"0"})},updateOutlierTexts:function(t,e,i){var n=this;n.mainOutlierTexts=n.main.select("."+r.default.chartBoxplot.chart).selectAll("."+r.default.chartBoxplot.text.outlier).data(e),n.mainOutlierTexts.exit().remove(),n.mainOutlierTexts=n.mainOutlierTexts.enter().append("text").merge(n.mainOutlierTexts).text(function(t){return"suspected"===t.type?null:i(t.value)}).style("fill",t.boxplot_text_color).attr("text-anchor","end").attr("opacity",function(t){return t.show?"1":"0"})},updateQuartileTexts:function(t,e,i){var n=this;n.mainQuartileTexts=n.main.select("."+r.default.chartBoxplot.chart).selectAll("."+r.default.chartBoxplot.text.quartile).data(e),n.mainQuartileTexts.exit().remove(),n.mainQuartileTexts=n.mainQuartileTexts.enter().append("text").merge(n.mainQuartileTexts).style("fill",t.boxplot_text_color).attr("text-anchor","end").text(function(t){return i(t.value)}).attr("opacity",function(t){return t.show?"1":"0"})},redrawBoxplot:function(){return[this.mainBox.attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("width",function(t){return t.width}).attr("height",function(t){return t.height}),this.mainBoxplotLine.attr("x1",function(t){return t.x1}).attr("y1",function(t){return t.y1}).attr("x2",function(t){return t.x2}).attr("y2",function(t){return t.y2}),this.mainOutliers.attr("cx",function(t){return t.x}).attr("cy",function(t){return t.y}),this.mainLineTexts.attr("x",function(t){return"connection"===t.type?null:t.x2}).attr("y",function(t){return"connection"===t.type?null:t.y2}).attr("dx","5px"),this.mainOutlierTexts.attr("x",function(t){return"suspected"===t.type?null:t.x-25}).attr("y",function(t){return"connection"===t.type?null:t.y}).attr("dx",function(t){return"connection"===t.type?null:"5px"}),this.mainQuartileTexts.attr("x",function(t){return t.x}).attr("y",function(t){return t.y}).attr("dx","-10px")]},calculateBoxQuartiles:function(t){var e=t.sort(function(t,e){return t-e}),i=(0,n.quantile)(e,.25),a=(0,n.quantile)(e,.5),r=(0,n.quantile)(e,.75),o=(0,n.min)(e),s=(0,n.max)(e),l=r-i,u={above:r+1.5*l,below:i-1.5*l},c={above:r+3*l,below:i-3*l},d=function(){var e=t.filter(function(t){return t>u.above&&t<c.above}),i=t.filter(function(t){return t<u.below&&t>c.below});return e.concat(i)}(),h=function(){var e=t.filter(function(t){return t>c.above}),i=t.filter(function(t){return t<c.below});return e.concat(i)}();return{q1:i,q2:a,q3:r,min:o,max:s,innerFence:u,outerFence:c,suspectedOutliers:d,outliers:h}},calculateBoxInfo:function(t){var e=this,i=e.config,n=i.boxplot_box_width||50,a=e.x,r=e.y,o=[],s=[],l=[],u=[];for(var c in t)!function(e){var c={},d={};c.width=n;var h=a(parseInt(t[e].id,10))-c.width/2,p=h+c.width,f=r(t[e].statistic.q3),g=r(t[e].statistic.q1),_=h+c.width/2,m=Math.abs(f-g),y=r(t[e].statistic.q2),v={min:Math.max(t[e].statistic.min,t[e].statistic.innerFence.below),max:Math.min(t[e].statistic.max,t[e].statistic.innerFence.above),median:t[e].statistic.q2};c.id=e,c.x=h,c.y=f,c.height=m,c.min=r(v.min),c.max=r(v.max),d.top={id:e,x:h,y:f,value:t[e].statistic.q3,show:i.boxplot_text_show_IQR},d.bottom={id:e,x:h,y:g,value:t[e].statistic.q1,show:i.boxplot_text_show_IQR};var x=t[e].statistic.suspectedOutliers.map(function(t){return{id:e,x:_,y:r(t),value:t,type:"suspected",show:i.boxplot_text_show_outliers}}),b=t[e].statistic.outliers.map(function(t){return{id:e,x:_,y:r(t),value:t,show:i.boxplot_text_show_outliers}}),w={id:e,x1:h,x2:p,y1:y,y2:y,value:v.median,type:"median",show:i.boxplot_text_show_median},L={id:e,x1:_,y1:g,x2:_,y2:c.min,type:"connection"},T={id:e,x1:_,y1:f,x2:_,y2:c.max,type:"connection"},k={id:e,x1:h,y1:c.max,x2:p,y2:c.max,value:v.max,type:"MinMax",show:i.boxplot_text_show_minmax},C={id:e,x1:h,y1:c.min,x2:p,y2:c.min,value:v.min,type:"MinMax",show:i.boxplot_text_show_minmax};l.push(w,L,T,C,k),u=u.concat(x,b),o.push(c),s.push(d.top,d.bottom)}(c);return{boxInfo:o,boxText:s,lines:l,outliers:u}},extractValuesOfTargets:function(t){var e=[];for(var i in t)!function(i){var n=t[i].values,a={};a.id=i,a.name=t[i].id;var r=[];Object.keys(n).map(function(t){return r.push(n[t].value)}),a.arrValues=r,e.push(a)}(i);return e},calculateStatisticInfo:function(t){var e=this,i=e.extractValuesOfTargets,n=i(t);for(var a in n){var r=e.calculateBoxQuartiles(n[a].arrValues);n[a].statistic=r}return n}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initRadar:function(){var t=this,e=t.config;t.radarChart=t.main.select("."+r.default.chart).append("g").attr("class",r.default.chartRadar.chart),t.hasType("radar")&&(e.interaction_enable=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForRadar:function(t){var e=this,i=e.config.axis_x_categories,n=e.convertDataToRadar(t,i);e.radarChart.data=n},updateRadar:function(){for(var t=this,e=t.config,i=t.radarChart;i.node().hasChildNodes();)i.node().removeChild(i.node().lastChild);t.selectChart.selectAll("."+r.default.chartRadar.dots.tooltip).remove(),i.text=i.append("g").attr("class",r.default.chartRadar.text),i.levels=i.append("g").attr("class",r.default.chartRadar.levels),i.polygons=i.append("g").attr("class",r.default.chartRadar.polygons),i.dots=i.append("g").attr("class",r.default.chartRadar.dots.dots),i.axes=i.append("g").attr("class",r.default.chartRadar.axes),t.tooltip=t.selectChart.append("div").attr("class",r.default.chartRadar.dots.tooltip).style("position","absolute").style("padding","5px").style("border-style","solid").style("border-width","2px").style("border-color","grey").style("border-radius","8px").style("font-size","11px").style("opacity","0"),t.radarChart.config={size:{w:t.getCurrentWidth(),h:t.getCurrentHeight()},growing:{duration:e.radar_growing_duration},polygon:{color:e.radar_polygon_color,opacity:e.radar_polygon_opacity,strokeWidth:e.radar_polygon_strokeWidth,strokeStyle:e.radar_polygon_strokeStyle},dot:{radius:e.radar_dot_radius},factor:1,level:{count:e.radar_level_count,lineColor:e.radar_level_lineColor,lineWidth:e.radar_level_lineWidth,lineOpacity:e.radar_level_lineOpacity,textColor:e.radar_level_textColor,textSize:e.radar_level_textSize,textToRight:5},label:{color:e.radar_label_color,size:e.radar_label_size},radians:2*Math.PI,color:(0,n.scaleOrdinal)(n.schemeCategory10)},{draw:function(e,a){var r={center:{x:a.size.w/2,y:a.size.h/2},maxDataValue:Math.max(0,(0,n.max)(e,function(t){return(0,n.max)(t.map(function(t){return t.value}))})),axisList:e[0].map(function(t){return t.axis}),axisCount:e[0].map(function(t){return t.axis}).length,radiusLargestCircle:a.factor*Math.min(a.size.w/2-40,a.size.h/2-40),sliceAngle:a.radians/e[0].map(function(t){return t.axis}).length};t.createLevelLines(e,a,r,i.levels),t.insertLevelText(e,a,r,i.text),t.createAxes(e,a,r,i.axes);var o=t.calculateDotsCoordinates(e,a,r);t.createAndPaintPolygons(o,a,r,i.polygons),t.createAndPaintDots(e,o,a,r,i.dots);var s=t.radarChart.node().getBoundingClientRect();t.radarChart.size={width:s.width,height:s.height};var l=Math.max((t.currentWidth-t.radarChart.size.width)/2-2*t.getLegendWidth(),0);t.legendGroupItems=t.legendGroupItems.attr("transform","translate(-"+l+",0)")}}.draw(t.radarChart.data,t.radarChart.config)},redrawRadar:function(){return[this.radarChart]},convertDataToRadar:function(t,e){var i=[];return t.forEach(function(t){var n=[];t.values.forEach(function(t,i){n.push({axis:e[i],value:t.value})}),i.push(n)}),i},createLevelLines:function(t,e,i,n){var a=void 0;for(a=0;a<e.level.count;a++)!function(){var t=e.factor*i.radiusLargestCircle*((a+1)/e.level.count);n.append("g").attr("class",r.default.chartRadar.level+"-"+a).selectAll(".line").data(i.axisList).enter().append("line").attr("x1",function(e,n){return i.center.x-t*Math.sin(n*i.sliceAngle)}).attr("y1",function(e,n){return i.center.y-t*Math.cos(n*i.sliceAngle)}).attr("x2",function(e,n){return i.center.x-t*Math.sin((n+1)*i.sliceAngle)}).attr("y2",function(e,n){return i.center.y-t*Math.cos((n+1)*i.sliceAngle)}).attr("class","line").style("stroke",e.level.lineColor).style("stroke-opacity",e.level.lineOpacity.toString()).style("stroke-width",e.level.lineWidth)}()},insertLevelText:function(t,e,i,a){var r=(0,n.format)(".2f"),o=void 0;for(o=0;o<e.level.count;o++)!function(){var t=e.factor*i.radiusLargestCircle*((o+1)/e.level.count);a.append("g").selectAll(".levels").data([1]).enter().append("text").attr("x",function(){return t*(1-e.factor*Math.sin(0))}).attr("y",function(){return t*(1-e.factor*Math.cos(0))}).attr("class","legend").style("font-family","sans-serif").style("font-size",e.level.textSize).attr("transform","translate("+(e.size.w/2-t+e.level.textToRight)+", "+(e.size.h/2-t)+")").attr("fill",e.level.textColor).text(r((o+1)*i.maxDataValue/e.level.count))}()},createAxes:function(t,e,i,n){var a=n.selectAll(".axis").data(i.axisList).enter().append("g").attr("class","axis");a.append("line").attr("x1",i.center.x).attr("y1",i.center.y).attr("x2",function(t,e){return i.center.x-i.radiusLargestCircle*Math.sin(e*i.sliceAngle)}).attr("y2",function(t,e){return i.center.y-i.radiusLargestCircle*Math.cos(e*i.sliceAngle)}).attr("class","line").style("stroke","grey").style("stroke-width","1px"),a.append("text").attr("class","legend").text(function(t){return t}).style("font-family","sans-serif").style("font-size",e.label.size).style("fill",e.label.color).attr("text-anchor","middle").attr("x",function(t,e){return i.center.x-1.2*i.radiusLargestCircle*Math.sin(e*i.sliceAngle)}).attr("y",function(t,e){return i.center.y-1.2*i.radiusLargestCircle*Math.cos(e*i.sliceAngle)})},calculateDotsCoordinates:function(t,e,i){var n=[];return t.forEach(function(t){var e=[];t.forEach(function(t,n){var a=t.value/i.maxDataValue*i.radiusLargestCircle,r={x:i.center.x-a*Math.sin(i.sliceAngle*n),y:i.center.y-a*Math.cos(i.sliceAngle*n)};e.push([r.x,r.y])}),e.push(e[0]),n.push(e)}),n},createAndPaintPolygons:function(t,e,i,a){var o=this;t.forEach(function(t,s){a.append("polygon").attr("class",r.default.chartRadar.series+"-"+s).style("stroke-width",e.polygon.strokeWidth).style("stroke-dasharray",(0,l.borderStyle)(e.polygon.strokeStyle)).style("stroke",e.color(s)).style("fill",function(){return e.polygon.color?e.color(s):"white"}).style("fill-opacity",function(){return e.polygon.color?e.polygon.opacity.toString():"0"}).on("mouseover",function(){var t="polygon."+(0,n.select)(this).attr("class");o.radarChart.selectAll("polygon").transition(200).style("fill-opacity",function(){return e.polygon.color?"0.1":"0"}),o.radarChart.selectAll(t).transition(200).style("fill-opacity",function(){return e.polygon.color?"0.7":"0"})}).on("mouseout",function(){o.radarChart.selectAll("polygon").transition(200).style("fill-opacity",function(){return e.polygon.color?e.polygon.opacity.toString():"0"})}).attr("points",function(){for(var e="",n=t.length,a=0;a<n;a++)e=e+i.center.x+","+i.center.y+" ";return e}).transition().duration(e.growing.duration).attr("points",function(){for(var e="",i=t.length,n=0;n<i;n++)e=e+t[n][0]+","+t[n][1]+" ";return e})})},createAndPaintDots:function(t,e,i,a,o){var s=this;t.forEach(function(t,l){o.append("g").attr("class",r.default.chartRadar.dots.data+"-"+l).selectAll(".nodes").data(t).enter().append("circle").attr("class",r.default.chartRadar.series+"-"+l).attr("r",i.dot.radius).attr("stroke","yellow").attr("stroke-width","0px").attr("alt",function(t){return Math.max(t.value,0)}).attr("cx",function(t,i){return e[l][i][0]}).attr("cy",function(t,i){return e[l][i][1]}).attr("data-id",function(t){return t.axis}).style("fill",i.color(l)).style("fill-opacity","0.9").on("mouseenter",function(t){var e="polygon."+(0,n.select)(this).attr("class");s.radarChart.selectAll("polygon").transition(200).style("fill-opacity","0.1"),s.radarChart.selectAll(e).transition(200).style("fill-opacity","0.7");var i=this;s.showeDotTooltip(s,t,i,a)}).on("mouseout",function(t){var e=this;s.radarChart.selectAll("polygon").transition(200).style("fill-opacity",i.polygon.opacity.toString()),s.hideDotTooltip(s,t,e,a)})})},showeDotTooltip:function(t,e,i,a){t.tooltip.transition().duration(200).style("opacity","0.8").style("display","none").style("background-color","white");var r={x:(0,n.mouse)(i)[0],y:(0,n.mouse)(i)[1]},o=r.x<a.center.x?-40:40,s=r.y<a.center.y?-40:40,l={x:r.x+o,y:r.y+s},u="<b>"+e.axis+"</b>: "+e.value;t.tooltip.html(u).style("left",l.x+"px").style("top",l.y+"px"),t.expandDotCircle(i)},hideDotTooltip:function(t,e,i){t.tooltip.style("display","none"),t.unexpandDotCircle(i)},expandDotCircle:function(t){(0,n.select)(t).transition().duration(500).attr("stroke-width","3px")},unexpandDotCircle:function(t){(0,n.select)(t).transition().duration(200).attr("stroke-width","0px")}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0),u=i(32)._;(0,l.extend)(s.default.prototype,{initChordDiagram:function(){var t=this,e=t.config;t.chordDiagram=t.main.select("."+r.default.chart).append("g").attr("class",r.default.diagramChord.chord).attr("transform",t.getTranslate("chorddiagram")),t.hasType("chord")&&(e.interaction_enable=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForChordDiagram:function(t){var e=this,i=e.convertDataToChord(t);e.chordDiagram.data=i},updateChordDiagram:function(){var t=this;t.additionalConfig.chord=t.config.chord;for(var e=t.getOptions(),i=t.config.data_colors,a=e.chord,o=t.chordDiagram;o.node().hasChildNodes();)o.node().removeChild(o.node().lastChild);var s=t.chordMapping(o.data);s.addValuesToMap("from").setFilter(function(t,e,i){return t.from===e.name&&t.to===i.name}).setAccessor(function(t){return t[0]?+t[0].count:0});var l=t.getCurrentWidth(),u=t.getCurrentHeight(),c=s.getMatrix(),d=t.calculateTickStep(a,c),h=s.getMap(),p=t.getChordReader(c,h),f=.5*Math.min(l,u)-150,g=a.groups.thickness,_=f-g,m=(0,n.formatPrefix)(",.0",1e3),y=t.getDataColors(i,c,h),v=(0,n.chord)().padAngle(a.groups.padAngle).sortSubgroups(n.descending).sortChords(n.descending),x=(0,n.arc)().innerRadius(_).outerRadius(f),b=(0,n.ribbon)().radius(_),w=t.chordDiagram.append("g").datum(v(c)),L=w.append("g").attr("class",r.default.diagramChord.ribbons).selectAll("path").data(function(t){return t}).enter().append("path").attr("d",b).attr("class",r.default.diagramChord.ribbon).style("fill",function(t){return y(t.target.index)}).style("stroke",function(t){return(0,n.rgb)(y(t.target.index)).darker().toString()}).style("stroke-width","0.25px"),T=w.append("g").attr("class",r.default.diagramChord.groups).selectAll("g").data(function(t){return t.groups}).enter().append("g").attr("class",r.default.diagramChord.group).on("mouseover",function(t,e){L.classed("chord-hide",function(t){return t.source.index!==e&&t.target.index!==e})}).on("mouseout",function(){(0,n.select)("#tooltip").style("visibility","hidden")});T.append("path").style("fill",function(t){return y(t.index)}).style("fill-opacity",a.groups.opacity).style("stroke",function(t){return(0,n.rgb)(y(t.index)).darker().toString()}).attr("d",x),T.append("text").each(function(t){t.angle=(t.startAngle+t.endAngle)/2}).attr("dy",".35em").attr("class",r.default.diagramChord.chordText).style("font-family","helvetica, arial, sans-serif").style("font-size",a.text.fontSize).style("fill",function(t){return(0,n.rgb)(y(t.index)).darker(2).toString()}).attr("text-anchor",function(t){return t.angle>Math.PI?"end":null}).attr("transform",function(t){return"rotate("+(180*t.angle/Math.PI-90)+")translate("+(f+a.text.distance)+")"+(t.angle>Math.PI?"rotate(180)":"")}).text(function(t){return p(t).gname});var k=T.append("g").attr("class",r.default.diagramChord.ticks).selectAll("."+r.default.diagramChord.tick).data(function(e){return t.groupTickArray(e,d.stepForTickLine)}).enter().append("g").attr("class",r.default.diagramChord.tick).attr("transform",function(t){return"rotate("+(180*t.angle/Math.PI-90)+") translate("+f+",0)"});k.append("line").style("stroke",a.tick.line.color).style("stroke-opacity",a.tick.line.enabled?"1":"0").attr("x1",0).attr("y1",0).attr("x2",a.tick.line.length).attr("y2",0),k.filter(function(t){return t.value%d.stepForTickText==0}).append("text").attr("x",a.tick.text.distance).attr("dy",".35em").attr("transform",function(t){return t.angle>Math.PI?"rotate(180) translate("+(-a.tick.text.distance-a.tick.text.leftRightCalibration)+")":null}).style("text-anchor",function(t){return t.angle>Math.PI?"end":null}).text(function(t){return m(t.value)}).style("font-size",a.tick.text.fontSize).style("fill",a.tick.text.fontColor).style("fill-opacity",a.tick.text.enabled?"1":"0")},redrawChordDiagram:function(){return[this.chordDiagram]},convertDataToChord:function(t){for(var e=[],i=t[0].values.length,n=0;n<i;n++){var a={from:t[0].values[n].value,to:t[1].values[n].value,count:""+t[2].values[n].value};e.push(a)}return e},calculateTickStep:function(t,e){var i=(0,n.max)(e.map(function(t){return(0,n.max)(t)})),a=i.toString().length,r=Math.pow(10,a-1);if((0,l.isEmpty)(t.tick.line.step)&&(0,l.isEmpty)(t.tick.text.step))return{stepForTickText:r,stepForTickLine:r/2};if((0,l.isEmpty)(t.tick.line.step)){return{stepForTickText:t.tick.text.step,stepForTickLine:t.tick.text.step/2}}if((0,l.isEmpty)(t.tick.text.step)){return{stepForTickText:2*t.tick.line.step,stepForTickLine:t.tick.line.step}}return{stepForTickText:t.tick.text.step,stepForTickLine:t.tick.line.step}},groupTickArray:function(t,e){var i=(t.endAngle-t.startAngle)/t.value;return(0,n.range)(0,t.value,e).map(function(e){return{value:e,angle:e*i+t.startAngle}})},getDataColors:function(t,e,i){var a=i.length,r=void 0,o=[];return(0,l.isEmpty)(t)?r=a<=10?(0,n.scaleOrdinal)(n.schemeCategory10):(0,n.scaleOrdinal)(n.schemeCategory20):(0,l.isArray)(t)?r=(0,n.scaleOrdinal)().domain((0,n.range)(a)).range(t):(0,l.isObject)(t)&&(Object.keys(i).forEach(function(e){var i=Math.random(),n=t[e],a=(0,l.notEmpty)(n)?n:"hsl("+360*i+",100%,50%)";o.push(a)}),r=(0,n.scaleOrdinal)().domain((0,n.range)(a)).range(o)),r},chordMapping:function(t){var e={},i={},n=0,a=[],r=void 0,o=void 0;return e.setFilter=function(t){return r=t,this},e.setAccessor=function(t){return o=t,this},e.getMatrix=function(){return a=[],u.each(i,function(e){a[e.id]||(a[e.id]=[]),u.each(i,function(i){var n=u.filter(t,function(t){return r(t,e,i)});a[e.id][i.id]=o(n,e,i)})}),a},e.getMap=function(){return i},e.addToMap=function(t,e){i[t]||(i[t]={name:t,id:n++,data:e})},e.addValuesToMap=function(e,a){var r=u.uniq(u.pluck(t,e));return u.map(r,function(t){i[t]||(i[t]={name:t,id:n++,data:a})}),this},e},getChordReader:function(t,e){return function(i){var n=void 0,a=void 0,r=void 0,o=void 0,s=void 0,l={};return i.source?(n=i.source.index,a=i.target.index,r=u.where(e,{id:n}),o=u.where(e,{id:a}),l.sname=r[0].name,l.sdata=i.source.value,l.svalue=+i.source.value,l.stotal=u.reduce(t[n],function(t,e){return t+e},0),l.tname=o[0].name,l.tdata=i.target.value,l.tvalue=+i.target.value,l.ttotal=u.reduce(t[a],function(t,e){return t+e},0)):(s=u.where(e,{id:i.index}),l.gname=s[0].name,l.gdata=s[0].data,l.gvalue=i.value),l.mtotal=u.reduce(t,function(t,e){return t+u.reduce(e,function(t,e){return t+e},0)},0),l}}})},function(t,e,i){(function(t,i){var n,a;!function(){var r="object"==typeof self&&self.self===self&&self||"object"==typeof t&&t.global===t&&t||this||{},o=r._,s=Array.prototype,l=Object.prototype,u="undefined"!=typeof Symbol?Symbol.prototype:null,c=s.push,d=s.slice,h=l.toString,p=l.hasOwnProperty,f=Array.isArray,g=Object.keys,_=Object.create,m=function(){},y=function(t){return t instanceof y?t:this instanceof y?void(this._wrapped=t):new y(t)};void 0===e||e.nodeType?r._=y:(void 0!==i&&!i.nodeType&&i.exports&&(e=i.exports=y),e._=y),y.VERSION="1.9.0";var v,x=function(t,e,i){if(void 0===e)return t;switch(null==i?3:i){case 1:return function(i){return t.call(e,i)};case 3:return function(i,n,a){return t.call(e,i,n,a)};case 4:return function(i,n,a,r){return t.call(e,i,n,a,r)}}return function(){return t.apply(e,arguments)}},b=function(t,e,i){return y.iteratee!==v?y.iteratee(t,e):null==t?y.identity:y.isFunction(t)?x(t,e,i):y.isObject(t)&&!y.isArray(t)?y.matcher(t):y.property(t)};y.iteratee=v=function(t,e){return b(t,e,1/0)};var w=function(t,e){return e=null==e?t.length-1:+e,function(){for(var i=Math.max(arguments.length-e,0),n=Array(i),a=0;a<i;a++)n[a]=arguments[a+e];switch(e){case 0:return t.call(this,n);case 1:return t.call(this,arguments[0],n);case 2:return t.call(this,arguments[0],arguments[1],n)}var r=Array(e+1);for(a=0;a<e;a++)r[a]=arguments[a];return r[e]=n,t.apply(this,r)}},L=function(t){if(!y.isObject(t))return{};if(_)return _(t);m.prototype=t;var e=new m;return m.prototype=null,e},T=function(t){return function(e){return null==e?void 0:e[t]}},k=function(t,e){for(var i=e.length,n=0;n<i;n++){if(null==t)return;t=t[e[n]]}return i?t:void 0},C=Math.pow(2,53)-1,A=T("length"),P=function(t){var e=A(t);return"number"==typeof e&&e>=0&&e<=C};y.each=y.forEach=function(t,e,i){e=x(e,i);var n,a;if(P(t))for(n=0,a=t.length;n<a;n++)e(t[n],n,t);else{var r=y.keys(t);for(n=0,a=r.length;n<a;n++)e(t[r[n]],r[n],t)}return t},y.map=y.collect=function(t,e,i){e=b(e,i);for(var n=!P(t)&&y.keys(t),a=(n||t).length,r=Array(a),o=0;o<a;o++){var s=n?n[o]:o;r[o]=e(t[s],s,t)}return r};var M=function(t){var e=function(e,i,n,a){var r=!P(e)&&y.keys(e),o=(r||e).length,s=t>0?0:o-1;for(a||(n=e[r?r[s]:s],s+=t);s>=0&&s<o;s+=t){var l=r?r[s]:s;n=i(n,e[l],l,e)}return n};return function(t,i,n,a){var r=arguments.length>=3;return e(t,x(i,a,4),n,r)}};y.reduce=y.foldl=y.inject=M(1),y.reduceRight=y.foldr=M(-1),y.find=y.detect=function(t,e,i){var n=P(t)?y.findIndex:y.findKey,a=n(t,e,i);if(void 0!==a&&-1!==a)return t[a]},y.filter=y.select=function(t,e,i){var n=[];return e=b(e,i),y.each(t,function(t,i,a){e(t,i,a)&&n.push(t)}),n},y.reject=function(t,e,i){return y.filter(t,y.negate(b(e)),i)},y.every=y.all=function(t,e,i){e=b(e,i);for(var n=!P(t)&&y.keys(t),a=(n||t).length,r=0;r<a;r++){var o=n?n[r]:r;if(!e(t[o],o,t))return!1}return!0},y.some=y.any=function(t,e,i){e=b(e,i);for(var n=!P(t)&&y.keys(t),a=(n||t).length,r=0;r<a;r++){var o=n?n[r]:r;if(e(t[o],o,t))return!0}return!1},y.contains=y.includes=y.include=function(t,e,i,n){return P(t)||(t=y.values(t)),("number"!=typeof i||n)&&(i=0),y.indexOf(t,e,i)>=0},y.invoke=w(function(t,e,i){var n,a;return y.isFunction(e)?a=e:y.isArray(e)&&(n=e.slice(0,-1),e=e[e.length-1]),y.map(t,function(t){var r=a;if(!r){if(n&&n.length&&(t=k(t,n)),null==t)return;r=t[e]}return null==r?r:r.apply(t,i)})}),y.pluck=function(t,e){return y.map(t,y.property(e))},y.where=function(t,e){return y.filter(t,y.matcher(e))},y.findWhere=function(t,e){return y.find(t,y.matcher(e))},y.max=function(t,e,i){var n,a,r=-1/0,o=-1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=P(t)?t:y.values(t);for(var s=0,l=t.length;s<l;s++)null!=(n=t[s])&&n>r&&(r=n)}else e=b(e,i),y.each(t,function(t,i,n){((a=e(t,i,n))>o||a===-1/0&&r===-1/0)&&(r=t,o=a)});return r},y.min=function(t,e,i){var n,a,r=1/0,o=1/0;if(null==e||"number"==typeof e&&"object"!=typeof t[0]&&null!=t){t=P(t)?t:y.values(t);for(var s=0,l=t.length;s<l;s++)null!=(n=t[s])&&n<r&&(r=n)}else e=b(e,i),y.each(t,function(t,i,n){((a=e(t,i,n))<o||a===1/0&&r===1/0)&&(r=t,o=a)});return r},y.shuffle=function(t){return y.sample(t,1/0)},y.sample=function(t,e,i){if(null==e||i)return P(t)||(t=y.values(t)),t[y.random(t.length-1)];var n=P(t)?y.clone(t):y.values(t),a=A(n);e=Math.max(Math.min(e,a),0);for(var r=a-1,o=0;o<e;o++){var s=y.random(o,r),l=n[o];n[o]=n[s],n[s]=l}return n.slice(0,e)},y.sortBy=function(t,e,i){var n=0;return e=b(e,i),y.pluck(y.map(t,function(t,i,a){return{value:t,index:n++,criteria:e(t,i,a)}}).sort(function(t,e){var i=t.criteria,n=e.criteria;if(i!==n){if(i>n||void 0===i)return 1;if(i<n||void 0===n)return-1}return t.index-e.index}),"value")};var S=function(t,e){return function(i,n,a){var r=e?[[],[]]:{};return n=b(n,a),y.each(i,function(e,a){var o=n(e,a,i);t(r,e,o)}),r}};y.groupBy=S(function(t,e,i){y.has(t,i)?t[i].push(e):t[i]=[e]}),y.indexBy=S(function(t,e,i){t[i]=e}),y.countBy=S(function(t,e,i){y.has(t,i)?t[i]++:t[i]=1});var E=/[^\ud800-\udfff]|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff]/g;y.toArray=function(t){return t?y.isArray(t)?d.call(t):y.isString(t)?t.match(E):P(t)?y.map(t,y.identity):y.values(t):[]},y.size=function(t){return null==t?0:P(t)?t.length:y.keys(t).length},y.partition=S(function(t,e,i){t[i?0:1].push(e)},!0),y.first=y.head=y.take=function(t,e,i){if(!(null==t||t.length<1))return null==e||i?t[0]:y.initial(t,t.length-e)},y.initial=function(t,e,i){return d.call(t,0,Math.max(0,t.length-(null==e||i?1:e)))},y.last=function(t,e,i){if(!(null==t||t.length<1))return null==e||i?t[t.length-1]:y.rest(t,Math.max(0,t.length-e))},y.rest=y.tail=y.drop=function(t,e,i){return d.call(t,null==e||i?1:e)},y.compact=function(t){return y.filter(t,Boolean)};var B=function(t,e,i,n){n=n||[];for(var a=n.length,r=0,o=A(t);r<o;r++){var s=t[r];if(P(s)&&(y.isArray(s)||y.isArguments(s)))if(e)for(var l=0,u=s.length;l<u;)n[a++]=s[l++];else B(s,e,i,n),a=n.length;else i||(n[a++]=s)}return n};y.flatten=function(t,e){return B(t,e,!1)},y.without=w(function(t,e){return y.difference(t,e)}),y.uniq=y.unique=function(t,e,i,n){y.isBoolean(e)||(n=i,i=e,e=!1),null!=i&&(i=b(i,n));for(var a=[],r=[],o=0,s=A(t);o<s;o++){var l=t[o],u=i?i(l,o,t):l;e&&!i?(o&&r===u||a.push(l),r=u):i?y.contains(r,u)||(r.push(u),a.push(l)):y.contains(a,l)||a.push(l)}return a},y.union=w(function(t){return y.uniq(B(t,!0,!0))}),y.intersection=function(t){for(var e=[],i=arguments.length,n=0,a=A(t);n<a;n++){var r=t[n];if(!y.contains(e,r)){var o;for(o=1;o<i&&y.contains(arguments[o],r);o++);o===i&&e.push(r)}}return e},y.difference=w(function(t,e){return e=B(e,!0,!0),y.filter(t,function(t){return!y.contains(e,t)})}),y.unzip=function(t){for(var e=t&&y.max(t,A).length||0,i=Array(e),n=0;n<e;n++)i[n]=y.pluck(t,n);return i},y.zip=w(y.unzip),y.object=function(t,e){for(var i={},n=0,a=A(t);n<a;n++)e?i[t[n]]=e[n]:i[t[n][0]]=t[n][1];return i};var D=function(t){return function(e,i,n){i=b(i,n);for(var a=A(e),r=t>0?0:a-1;r>=0&&r<a;r+=t)if(i(e[r],r,e))return r;return-1}};y.findIndex=D(1),y.findLastIndex=D(-1),y.sortedIndex=function(t,e,i,n){i=b(i,n,1);for(var a=i(e),r=0,o=A(t);r<o;){var s=Math.floor((r+o)/2);i(t[s])<a?r=s+1:o=s}return r};var I=function(t,e,i){return function(n,a,r){var o=0,s=A(n);if("number"==typeof r)t>0?o=r>=0?r:Math.max(r+s,o):s=r>=0?Math.min(r+1,s):r+s+1;else if(i&&r&&s)return r=i(n,a),n[r]===a?r:-1;if(a!==a)return r=e(d.call(n,o,s),y.isNaN),r>=0?r+o:-1;for(r=t>0?o:s-1;r>=0&&r<s;r+=t)if(n[r]===a)return r;return-1}};y.indexOf=I(1,y.findIndex,y.sortedIndex),y.lastIndexOf=I(-1,y.findLastIndex),y.range=function(t,e,i){null==e&&(e=t||0,t=0),i||(i=e<t?-1:1);for(var n=Math.max(Math.ceil((e-t)/i),0),a=Array(n),r=0;r<n;r++,t+=i)a[r]=t;return a},y.chunk=function(t,e){if(null==e||e<1)return[];for(var i=[],n=0,a=t.length;n<a;)i.push(d.call(t,n,n+=e));return i};var z=function(t,e,i,n,a){if(!(n instanceof e))return t.apply(i,a);var r=L(t.prototype),o=t.apply(r,a);return y.isObject(o)?o:r};y.bind=w(function(t,e,i){if(!y.isFunction(t))throw new TypeError("Bind must be called on a function");var n=w(function(a){return z(t,n,e,this,i.concat(a))});return n}),y.partial=w(function(t,e){var i=y.partial.placeholder,n=function(){for(var a=0,r=e.length,o=Array(r),s=0;s<r;s++)o[s]=e[s]===i?arguments[a++]:e[s];for(;a<arguments.length;)o.push(arguments[a++]);return z(t,n,this,this,o)};return n}),y.partial.placeholder=y,y.bindAll=w(function(t,e){e=B(e,!1,!1);var i=e.length;if(i<1)throw new Error("bindAll must be passed function names");for(;i--;){var n=e[i];t[n]=y.bind(t[n],t)}}),y.memoize=function(t,e){var i=function(n){var a=i.cache,r=""+(e?e.apply(this,arguments):n);return y.has(a,r)||(a[r]=t.apply(this,arguments)),a[r]};return i.cache={},i},y.delay=w(function(t,e,i){return setTimeout(function(){return t.apply(null,i)},e)}),y.defer=y.partial(y.delay,y,1),y.throttle=function(t,e,i){var n,a,r,o,s=0;i||(i={});var l=function(){s=!1===i.leading?0:y.now(),n=null,o=t.apply(a,r),n||(a=r=null)},u=function(){var u=y.now();s||!1!==i.leading||(s=u);var c=e-(u-s);return a=this,r=arguments,c<=0||c>e?(n&&(clearTimeout(n),n=null),s=u,o=t.apply(a,r),n||(a=r=null)):n||!1===i.trailing||(n=setTimeout(l,c)),o};return u.cancel=function(){clearTimeout(n),s=0,n=a=r=null},u},y.debounce=function(t,e,i){var n,a,r=function(e,i){n=null,i&&(a=t.apply(e,i))},o=w(function(o){if(n&&clearTimeout(n),i){var s=!n;n=setTimeout(r,e),s&&(a=t.apply(this,o))}else n=y.delay(r,e,this,o);return a});return o.cancel=function(){clearTimeout(n),n=null},o},y.wrap=function(t,e){return y.partial(e,t)},y.negate=function(t){return function(){return!t.apply(this,arguments)}},y.compose=function(){var t=arguments,e=t.length-1;return function(){for(var i=e,n=t[e].apply(this,arguments);i--;)n=t[i].call(this,n);return n}},y.after=function(t,e){return function(){if(--t<1)return e.apply(this,arguments)}},y.before=function(t,e){var i;return function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=null),i}},y.once=y.partial(y.before,2),y.restArguments=w;var R=!{toString:null}.propertyIsEnumerable("toString"),O=["valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],F=function(t,e){var i=O.length,n=t.constructor,a=y.isFunction(n)&&n.prototype||l,r="constructor";for(y.has(t,r)&&!y.contains(e,r)&&e.push(r);i--;)(r=O[i])in t&&t[r]!==a[r]&&!y.contains(e,r)&&e.push(r)};y.keys=function(t){if(!y.isObject(t))return[];if(g)return g(t);var e=[];for(var i in t)y.has(t,i)&&e.push(i);return R&&F(t,e),e},y.allKeys=function(t){if(!y.isObject(t))return[];var e=[];for(var i in t)e.push(i);return R&&F(t,e),e},y.values=function(t){for(var e=y.keys(t),i=e.length,n=Array(i),a=0;a<i;a++)n[a]=t[e[a]];return n},y.mapObject=function(t,e,i){e=b(e,i);for(var n=y.keys(t),a=n.length,r={},o=0;o<a;o++){var s=n[o];r[s]=e(t[s],s,t)}return r},y.pairs=function(t){for(var e=y.keys(t),i=e.length,n=Array(i),a=0;a<i;a++)n[a]=[e[a],t[e[a]]];return n},y.invert=function(t){for(var e={},i=y.keys(t),n=0,a=i.length;n<a;n++)e[t[i[n]]]=i[n];return e},y.functions=y.methods=function(t){var e=[];for(var i in t)y.isFunction(t[i])&&e.push(i);return e.sort()};var N=function(t,e){return function(i){var n=arguments.length;if(e&&(i=Object(i)),n<2||null==i)return i;for(var a=1;a<n;a++)for(var r=arguments[a],o=t(r),s=o.length,l=0;l<s;l++){var u=o[l];e&&void 0!==i[u]||(i[u]=r[u])}return i}};y.extend=N(y.allKeys),y.extendOwn=y.assign=N(y.keys),y.findKey=function(t,e,i){e=b(e,i);for(var n,a=y.keys(t),r=0,o=a.length;r<o;r++)if(n=a[r],e(t[n],n,t))return n};var Z=function(t,e,i){return e in i};y.pick=w(function(t,e){var i={},n=e[0];if(null==t)return i;y.isFunction(n)?(e.length>1&&(n=x(n,e[1])),e=y.allKeys(t)):(n=Z,e=B(e,!1,!1),t=Object(t));for(var a=0,r=e.length;a<r;a++){var o=e[a],s=t[o];n(s,o,t)&&(i[o]=s)}return i}),y.omit=w(function(t,e){var i,n=e[0];return y.isFunction(n)?(n=y.negate(n),e.length>1&&(i=e[1])):(e=y.map(B(e,!1,!1),String),n=function(t,i){return!y.contains(e,i)}),y.pick(t,n,i)}),y.defaults=N(y.allKeys,!0),y.create=function(t,e){var i=L(t);return e&&y.extendOwn(i,e),i},y.clone=function(t){return y.isObject(t)?y.isArray(t)?t.slice():y.extend({},t):t},y.tap=function(t,e){return e(t),t},y.isMatch=function(t,e){var i=y.keys(e),n=i.length;if(null==t)return!n;for(var a=Object(t),r=0;r<n;r++){var o=i[r];if(e[o]!==a[o]||!(o in a))return!1}return!0};var X,q;X=function(t,e,i,n){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return!1;if(t!==t)return e!==e;var a=typeof t;return("function"===a||"object"===a||"object"==typeof e)&&q(t,e,i,n)},q=function(t,e,i,n){t instanceof y&&(t=t._wrapped),e instanceof y&&(e=e._wrapped);var a=h.call(t);if(a!==h.call(e))return!1;switch(a){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e;case"[object Symbol]":return u.valueOf.call(t)===u.valueOf.call(e)}var r="[object Array]"===a;if(!r){if("object"!=typeof t||"object"!=typeof e)return!1;var o=t.constructor,s=e.constructor;if(o!==s&&!(y.isFunction(o)&&o instanceof o&&y.isFunction(s)&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}i=i||[],n=n||[];for(var l=i.length;l--;)if(i[l]===t)return n[l]===e;if(i.push(t),n.push(e),r){if((l=t.length)!==e.length)return!1;for(;l--;)if(!X(t[l],e[l],i,n))return!1}else{var c,d=y.keys(t);if(l=d.length,y.keys(e).length!==l)return!1;for(;l--;)if(c=d[l],!y.has(e,c)||!X(t[c],e[c],i,n))return!1}return i.pop(),n.pop(),!0},y.isEqual=function(t,e){return X(t,e)},y.isEmpty=function(t){return null==t||(P(t)&&(y.isArray(t)||y.isString(t)||y.isArguments(t))?0===t.length:0===y.keys(t).length)},y.isElement=function(t){return!(!t||1!==t.nodeType)},y.isArray=f||function(t){return"[object Array]"===h.call(t)},y.isObject=function(t){var e=typeof t;return"function"===e||"object"===e&&!!t},y.each(["Arguments","Function","String","Number","Date","RegExp","Error","Symbol","Map","WeakMap","Set","WeakSet"],function(t){y["is"+t]=function(e){return h.call(e)==="[object "+t+"]"}}),y.isArguments(arguments)||(y.isArguments=function(t){return y.has(t,"callee")});var j=r.document&&r.document.childNodes;"function"!=typeof/./&&"object"!=typeof Int8Array&&"function"!=typeof j&&(y.isFunction=function(t){return"function"==typeof t||!1}),y.isFinite=function(t){return!y.isSymbol(t)&&isFinite(t)&&!isNaN(parseFloat(t))},y.isNaN=function(t){return y.isNumber(t)&&isNaN(t)},y.isBoolean=function(t){return!0===t||!1===t||"[object Boolean]"===h.call(t)},y.isNull=function(t){return null===t},y.isUndefined=function(t){return void 0===t},y.has=function(t,e){if(!y.isArray(e))return null!=t&&p.call(t,e);for(var i=e.length,n=0;n<i;n++){var a=e[n];if(null==t||!p.call(t,a))return!1;t=t[a]}return!!i},y.noConflict=function(){return r._=o,this},y.identity=function(t){return t},y.constant=function(t){return function(){return t}},y.noop=function(){},y.property=function(t){return y.isArray(t)?function(e){return k(e,t)}:T(t)},y.propertyOf=function(t){return null==t?function(){}:function(e){return y.isArray(e)?k(t,e):t[e]}},y.matcher=y.matches=function(t){return t=y.extendOwn({},t),function(e){return y.isMatch(e,t)}},y.times=function(t,e,i){var n=Array(Math.max(0,t));e=x(e,i,1);for(var a=0;a<t;a++)n[a]=e(a);return n},y.random=function(t,e){return null==e&&(e=t,t=0),t+Math.floor(Math.random()*(e-t+1))},y.now=Date.now||function(){return(new Date).getTime()};var W={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},Y=y.invert(W),G=function(t){var e=function(e){return t[e]},i="(?:"+y.keys(t).join("|")+")",n=RegExp(i),a=RegExp(i,"g");return function(t){return t=null==t?"":""+t,n.test(t)?t.replace(a,e):t}};y.escape=G(W),y.unescape=G(Y),y.result=function(t,e,i){y.isArray(e)||(e=[e]);var n=e.length;if(!n)return y.isFunction(i)?i.call(t):i;for(var a=0;a<n;a++){var r=null==t?void 0:t[e[a]];void 0===r&&(r=i,a=n),t=y.isFunction(r)?r.call(t):r}return t};var V=0;y.uniqueId=function(t){var e=++V+"";return t?t+e:e},y.templateSettings={evaluate:/<%([\s\S]+?)%>/g,interpolate:/<%=([\s\S]+?)%>/g,escape:/<%-([\s\S]+?)%>/g};var H=/(.)^/,U={"'":"'","\\":"\\","\r":"r","\n":"n","\u2028":"u2028","\u2029":"u2029"},K=/\\|'|\r|\n|\u2028|\u2029/g,$=function(t){return"\\"+U[t]};y.template=function(t,e,i){!e&&i&&(e=i),e=y.defaults({},e,y.templateSettings);var n=RegExp([(e.escape||H).source,(e.interpolate||H).source,(e.evaluate||H).source].join("|")+"|$","g"),a=0,r="__p+='";t.replace(n,function(e,i,n,o,s){return r+=t.slice(a,s).replace(K,$),a=s+e.length,i?r+="'+\n((__t=("+i+"))==null?'':_.escape(__t))+\n'":n?r+="'+\n((__t=("+n+"))==null?'':__t)+\n'":o&&(r+="';\n"+o+"\n__p+='"),e}),r+="';\n",e.variable||(r="with(obj||{}){\n"+r+"}\n"),r="var __t,__p='',__j=Array.prototype.join,print=function(){__p+=__j.call(arguments,'');};\n"+r+"return __p;\n";var o;try{o=new Function(e.variable||"obj","_",r)}catch(t){throw t.source=r,t}var s=function(t){return o.call(this,t,y)};return s.source="function("+(e.variable||"obj")+"){\n"+r+"}",s},y.chain=function(t){var e=y(t);return e._chain=!0,e};var J=function(t,e){return t._chain?y(e).chain():e};y.mixin=function(t){return y.each(y.functions(t),function(e){var i=y[e]=t[e];y.prototype[e]=function(){var t=[this._wrapped];return c.apply(t,arguments),J(this,i.apply(y,t))}}),y},y.mixin(y),y.each(["pop","push","reverse","shift","sort","splice","unshift"],function(t){var e=s[t];y.prototype[t]=function(){var i=this._wrapped;return e.apply(i,arguments),"shift"!==t&&"splice"!==t||0!==i.length||delete i[0],J(this,i)}}),y.each(["concat","join","slice"],function(t){var e=s[t];y.prototype[t]=function(){return J(this,e.apply(this._wrapped,arguments))}}),y.prototype.value=function(){return this._wrapped},y.prototype.valueOf=y.prototype.toJSON=y.prototype.value,y.prototype.toString=function(){return String(this._wrapped)},n=[],void 0!==(a=function(){return y}.apply(e,n))&&(i.exports=a)}()}).call(e,i(33),i(34)(t))},function(t,e){var i;i=function(){return this}();try{i=i||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(i=window)}t.exports=i},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),t.webpackPolyfill=1),t}},function(t,e,i){"use strict";var n=i(3),a=i(1),r=function(t){return t&&t.__esModule?t:{"default":t}}(a),o=i(0);(0,o.extend)(r.default.prototype,{initBubble:function(){var t=this,e=t.config;t.hasType("bubble")&&(e.point_show=!0,e.point_type="circle",e.point_sensitivity=25)},getBaseLength:function(){var t=this;return t.cache.$baseLength||(t.cache.$baseLength=(0,n.min)([t.axes.x.select("path").node().getTotalLength(),t.axes.y.select("path").node().getTotalLength()])),t.cache.$baseLength},getBubbleR:function(t){var e=this,i=e.config.bubble_maxR;(0,o.isFunction)(i)?i=i(t):!(0,o.isNumber)(i)&&(i=e.getBaseLength()/(2*e.getMaxDataCount())+12);var a=(0,n.max)(e.getMinMaxData().max.map(function(t){return t.value})),r=i*i*Math.PI,s=t.value*(r/a);return Math.sqrt(s/Math.PI)}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initTopicRank:function(){var t=this,e=t.config;t.main.select("."+r.default.chart).append("g").attr("class",r.default.chartTopicRank),t.hasType("topicrank")&&(e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForTopicRank:function(t){var e=this,i=e.config;e.topicRank=e.main.select("."+r.default.chart).selectAll("."+r.default.chartTopicRank).data(t[0].values),i.zoom_enabled&&e.main.select("."+r.default.zoomRect).call((0,n.zoom)().scaleExtent([.5,8]).on("zoom",function(){e.topicRank.attr("transform",n.event.transform)}))},updateTopicRank:function(){function update(){var o=t.flatten(e),s=e.links();t.topicRank.selectAll(".link").remove(),t.topicRank.selectAll(".node").remove(),o.forEach(function(t){t.depth=1*t.depth||0,t.color||(0===t.depth||1===t.depth?t.color="#6699CC":2===t.depth?t.color="#669900":3===t.depth?t.color="#D63737":4===t.depth?t.color="#37D6C8":5===t.depth?t.color="#C60BBA":t.color="#000000")}),a=t.topicRank.selectAll(".link").data(s,function(t){return t.target.id}),a.exit().remove(),a=a.enter().append("line").attr("class","link").merge(a).style("stroke",function(t){return 1*t.source.depth==1?"#669900":"#6699CC"}),i=t.topicRank.selectAll(".node").data(o,function(t){return t.id}),i.exit().remove();var u=i.enter().append("g").attr("class","node").style("cursor","pointer").on("click",function(e){e.children?(e._children=e.children,e.children=null):(e.children=e._children,e._children=null),update(),t.simulationTopicRank.restart(),t.config.topicrank_onclicked.call(t,e)}).on("mouseenter",function(e){return t.mouseEnterTopicRank(e,s)}).on("mouseleave",t.mouseLeaveTopicRank.bind(t)).call((0,n.drag)().on("start",t.dragstartedTopicRank.bind(t)).on("drag",t.draggedTopicRank.bind(t)).on("end",t.dragendedTopicRank.bind(t))),c=u.append("rect").attr("rx",5).attr("ry",5).attr("y",function(){return(1*r+5)/-2}).attr("height",function(){return 1*r+5}).style("fill","#ffffff").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return(1*t.depth==3?1:1*t.depth==2?2:3)+"px"});u.append("text").text(function(t){return t.data.name}).style("text-anchor","middle").style("font-weight",function(t){return(200+100*(t.depth<2?6:3)).toString()}).style("font-size",function(t){var e=t.depth<3?0*(t.depth-1):1;return t.fontSize?t.fontSize+"px":1*r-e+"px"}).attr("class","text").attr("dy",".35em").attr("fill",function(t){return(0,l.notEmpty)(t._children)?"#669900":t.color}),u.selectAll("text").each(function(t){t.width=this.getBBox().width}),c.attr("width",function(t){return t.width+5}).attr("x",function(t){return-(t.width+5)/2}),i=u.merge(i),t.simulationTopicRank.force("link").links(s).id(function(t){return t.id}).distance(t.getDistance()).strength(function(){return 1}),t.simulationTopicRank.nodes(o).on("tick",function(){a.attr("x1",function(t){return t.source.x}).attr("y1",function(t){return t.source.y}).attr("x2",function(t){return t.target.x}).attr("y2",function(t){return t.target.y}),i.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})})}var t=this,e=(0,n.hierarchy)(t.topicRank.data()[0].value),i=void 0,a=void 0,r=12;t.simulationTopicRank=(0,n.forceSimulation)().force("link",(0,n.forceLink)().id(function(t){return t.id})).force("charge",(0,n.forceManyBody)().strength(function(t){return t.children?-200:-80})).force("center",(0,n.forceCenter)(t.width/2,t.height/2)),update()},dragstartedTopicRank:function(t){var e=this;n.event.active||e.simulationTopicRank.alphaTarget(.15).restart(),t.fx=t.x,t.fy=t.y},draggedTopicRank:function(t){t.fx=n.event.x,t.fy=n.event.y},dragendedTopicRank:function(t){var e=this;n.event.active||e.simulationTopicRank.alphaTarget(0),t.fx=null,t.fy=null},mouseLeaveTopicRank:function(){var t=this;t.topicRank.selectAll(".node").attr("opacity","1"),t.topicRank.selectAll(".link").attr("opacity","1")},mouseEnterTopicRank:function(t,e){var i=this,n=e.filter(function(e){return e.source.id===t.id||e.target.id===t.id}),a=n.map(function(t){return t.source.id}).concat(n.map(function(t){return t.target.id}));i.topicRank.selectAll(".node").filter(function(t){return-1===a.indexOf(t.id)}).attr("opacity","0.2"),i.topicRank.selectAll(".link").attr("opacity","0.2").filter(function(e){return e.source.id===t.id||e.target.id===t.id}).attr("opacity","1"),i.simulationTopicRank.force("center",null)},flatten:function(t){function recurse(t){t.children&&t.children.forEach(recurse),t.id?++i:t.id=++i,e.push(t)}var e=[],i=0;return recurse(t),e},getDistance:function(){return 50},redrawTopicRank:function(){return[this.topticRank]}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initNetwork:function(){var t=this,e=t.config;if(t.networkScaleFactor=1,t.networkTranslation=[0,0],t.hasType("network")){e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1;var i=t.main.select("."+r.default.chart).append("g").attr("class",r.default.chartNetwork+"-wrapper");i.append("rect").attr("class",r.default.chartNetwork+"-listner").attr("x",0).attr("y",0).attr("width",t.getCurrentWidth()).attr("height",t.getCurrentHeight()).attr("fill","#2A2C36").style("pointer-events","all"),t.mainNetwork=i.append("g").attr("class",r.default.chartNetwork),t.zoomNetwork=(0,n.zoom)().scaleExtent([.1,10]).on("zoom",function(){var e=n.event.transform;t.networkScaleFactor=e.k,t.networkTranslation[0]=e.x,t.networkTranslation[1]=e.y,t.slider.property("value",e.k),t.ticked()}),i.call(t.zoomNetwork),t.slider=(0,n.select)(".chart_area").append("div").attr("class","network-slider-bar-container").append("input").attr("id","zoom_slider").attr("class","network-slider-bar").datum({}).attr("type","range").attr("value",1).attr("min",function(){return e.zoom_extent?e.zoom_extent[0]:.1}).attr("max",function(){return e.zoom_extent?e.zoom_extent[1]:10}).attr("step",function(){return e.zoom_extent?(e.zoom_extent[1]-e.zoom_extent[0])/100:.01}).on("input",function(){var e=(0,n.select)("#zoom_slider"),i=e.property("value");t.zoomNetwork.scaleTo(t.mainNetwork,i)})}},updateTargetsForNetwork:function(t){this.mainNetwork.data(t[0].values)},updateNetwork:function(){var t=this,e=t.config,i=t.mainNetwork.data()[0].value,a=JSON.parse(JSON.stringify(i.nodes)),r=JSON.parse(JSON.stringify(i.links)),o=(0,n.scaleOrdinal)(n.schemeCategory20);t.mainNetwork.selectAll(".link").remove(),t.mainNetwork.selectAll(".node").remove(),t.mainNetwork.selectAll("marker").remove();var s={link:(0,n.forceLink)().id(function(t){return t.id}),charge:(0,n.forceManyBody)().strength(-400),center:(0,n.forceCenter)(t.width/2,t.height/2)};t.simulationNetwork=(0,n.forceSimulation)().force("link",s.link).force("charge",s.charge).force("x",(0,n.forceX)().strength(.2)).force("y",(0,n.forceY)().strength(.2)).force("center",s.center);var u=t.mainNetwork.selectAll(".link").data(r);u.exit().remove(),t.networkLinkEnter=u.enter().append("line").attr("class",function(t){return"link "+((0,l.notEmpty)(t.highlight)?"rb-highlight-line":"")}).style("fill","none").style("stroke",function(t){return(0,l.notEmpty)(t.color)?t.color:e.network_line_color}).style("stroke-dasharray",function(t){return(0,l.notEmpty)(t.highlight)?(0,l.borderStyle)("dashed"):(0,l.borderStyle)((0,l.notEmpty)(t.type)?t.type:e.network_line_type)}).merge(u);var c=t.mainNetwork.selectAll(".node").data(a);c.exit().remove();var d=c.enter().append("g").attr("class",function(t){return"node node-data-"+t.id}).style("cursor","pointer").on("mouseenter",function(e){return t.mouseEnterNetwork(e,r)}).on("mouseleave",t.mouseLeaveNetwork.bind(t)).on("click",function(e){t.simulationNetwork.stop(),t.config.network_onselected.call(t,e,this),t.config.network_onclicked.call(t,e,this)}).on("dblclick",t.releaseNodeNetwork.bind(t)).call((0,n.drag)().on("start",t.dragstartedNetwork.bind(t)).on("drag",t.draggedNetwork.bind(t)).on("end",t.dragendedNetwork.bind(t)));t.networkNodePath=d.append("path").attr("class",function(t){return(0,l.notEmpty)(t.highlight)?"rb-highlight-node":""}).attr("d",function(t){var i=void 0;if((0,l.notEmpty)(t.radius))i=(0,l.shapeSymbol)(t.radius*e.network_node_radius);else{var n=r.filter(function(e){return e.source===t.id}).length+1,a=e.network_node_radius+15*n;i=(0,l.shapeSymbol)(a)}return(0,l.notEmpty)(t.type)?i[t.type]():i[e.network_node_type]()}).attr("visibility",function(t){return(0,l.notEmpty)(t.image)?"hidden":"visible"}).style("fill",function(t){return(0,l.notEmpty)(t.color)?t.color:(0,l.notEmpty)(e.network_node_color)?e.network_node_color:o(t.group)}).style("stroke",function(t){return(0,l.notEmpty)(t.color)?t.color:(0,l.notEmpty)(e.network_node_color)?e.network_node_color:o(t.group)}),t.networkNodeImage=d.append("image").attr("xlink:href",function(t){return t.image}).attr("width",function(t){return(0,l.notEmpty)(t.imageSize)?t.imageSize.width:"40px"}).attr("height",function(t){return(0,l.notEmpty)(t.imageSize)?t.imageSize.height:"40px"}).attr("visibility",function(t){return(0,l.notEmpty)(t.image)?"visible":"hidden"}),t.networkNodeText=d.append("text").attr("class","text").style("text-anchor","middle").style("font-family",e.data_labels_font_family).style("font-weight",(0,l.notEmpty)(e.data_labels_font_weight)?e.data_labels_font_weight:"normal").style("font-size",e.data_labels_font_size+"px").style("fill",e.data_labels_color).attr("visibility",(0,l.notEmpty)(e.data_labels_visibled)&&e.data_labels_visibled?"visible":"hidden").text(function(t){return t.name}),t.simulationNetwork.nodes(a).on("tick",t.ticked.bind(t)),t.simulationNetwork.force("link").links(r).id(function(t){return t.id}).distance(e.network_line_distance).strength(function(){return 1}),t.drawPointArrow()},drawPointArrow:function(){var t=this,e=t.config;t.mainNetwork.selectAll(".link").each(function(i){var a=(0,n.select)(this),r=a.node().parentNode,o=(0,n.select)(".node-data-"+i.target.id).select("path"),s=void 0;if("visible"===o.attr("visibility")&&(s=o.node().getBBox().height/2+10),"hidden"===o.attr("visibility")){s=(0,n.select)(".node-data-"+i.target.id).select("image").node().getBBox().height/2+10}e.network_line_arrow?(a.attr("marker-end","url(#arrow-"+i.source.id+"-"+i.target.id+")"),t.markerArrow(r,i,s)):(0,l.notEmpty)(i.arrow)&&(a.attr("marker-end","url(#arrow-"+i.source.id+"-"+i.target.id+")"),t.markerArrow(r,i,s))})},ticked:function(){var t=this,e=t.config;t.networkLinkEnter.attr("x1",function(e){return t.networkTranslation[0]+t.networkScaleFactor*e.source.x}).attr("y1",function(e){return t.networkTranslation[1]+t.networkScaleFactor*e.source.y}).attr("x2",function(e){return t.networkTranslation[0]+t.networkScaleFactor*e.target.x}).attr("y2",function(e){return t.networkTranslation[1]+t.networkScaleFactor*e.target.y}).merge(t.networkLinkEnter),t.networkNodePath.attr("transform",function(e){return"translate("+(t.networkTranslation[0]+t.networkScaleFactor*e.x)+","+(t.networkTranslation[1]+t.networkScaleFactor*e.y)+")"}),t.networkNodeImage.attr("x",function(e){var i=!!(0,l.notEmpty)(e.imageSize)&&(0,l.notEmpty)(e.imageSize.width),n=i?parseFloat(e.imageSize.width)/2:20;return t.networkTranslation[0]+t.networkScaleFactor*e.x-n}).attr("y",function(e){var i=!!(0,l.notEmpty)(e.imageSize)&&(0,l.notEmpty)(e.imageSize.height),n=i?parseFloat(e.imageSize.width)/2:20;return t.networkTranslation[1]+t.networkScaleFactor*e.y-n}),t.networkNodeText.attr("x",function(i){return t.networkTranslation[0]+t.networkScaleFactor*i.x+((0,l.notEmpty)(e.data_labels_position.x)?e.data_labels_position.x:0)}).attr("y",function(i){return t.networkTranslation[1]+t.networkScaleFactor*i.y+6+((0,l.notEmpty)(e.data_labels_position.y)?e.data_labels_position.y:0)})},markerArrow:function(t,e,i){var a=this,r=a.config;(0,n.select)(t).append("marker").attr("id","arrow-"+e.source.id+"-"+e.target.id).attr("viewBox","0 -5 10 10").attr("refX",i).attr("markerWidth",10).attr("markerHeight",10).attr("orient","auto").append("path").attr("d","M0,-5L10,0L0,5").style("fill",(0,l.notEmpty)(e.color)?e.color:r.network_line_color).style("stroke","none")},dragstartedNetwork:function(t){n.event.active||this.simulationNetwork.alphaTarget(.15).restart(),t.fx=t.x,t.fy=t.y},draggedNetwork:function(t){var e=this,i=(0,n.mouse)(e.mainNetwork.node());t.fx=(i[0]-e.networkTranslation[0])/e.networkScaleFactor,t.fy=(i[1]-e.networkTranslation[1])/e.networkScaleFactor},dragendedNetwork:function(){n.event.active||this.simulationNetwork.alphaTarget(0)},releaseNodeNetwork:function(t){t.fixed=!1},mouseLeaveNetwork:function(){var t=this,e=t.config;t.mainNetwork.selectAll(".node").attr("opacity","1"),t.mainNetwork.selectAll(".link").attr("opacity","1").style("stroke",function(t){return(0,l.notEmpty)(t.color)?t.color:e.network_line_color})},mouseEnterNetwork:function(t,e){var i=this,n=e.filter(function(e){return e.source.id===t.id||e.target.id===t.id}),a=n.map(function(t){return t.source.id}).concat(n.map(function(t){return t.target.id}));i.mainNetwork.selectAll(".node").filter(function(t){return-1===a.indexOf(t.id)}).attr("opacity","0.2"),i.mainNetwork.selectAll(".link").attr("opacity","0.2").filter(function(e){return e.source.id===t.id||e.target.id===t.id}).attr("opacity","1").style("stroke","#F38630")},redrawNetwork:function(){return[this.mainNetwork]}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initDendrogram:function(){var t=this,e=t.config;t.main.select("."+r.default.chart).append("g").attr("class",r.default.chartDendrogram).attr("transform",function(){return"cluster"===e.dendrogram_type||"tree"===e.dendrogram_type?"translate(40,0)":t.getTranslate("dendrogram")}),t.hasType("dendrogram")&&(e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForDendrogram:function(t){var e=this,i=e.config;e.mainDendrogram=e.main.select("."+r.default.chart).selectAll("."+r.default.chartDendrogram).data(t[0].values),i.zoom_enabled&&e.main.select("."+r.default.zoomRect).call((0,n.zoom)().scaleExtent([.5,8]).on("zoom",function(){e.mainDendrogram.attr("transform",n.event.transform)}))},updateDendrogram:function(){function update(n){var r=s(a),u=r.descendants(),c=r.descendants().slice(1);(0,l.notEmpty)(e.dendrogram_depth)&&u.forEach(function(t){return t.y=t.depth*e.dendrogram_depth});var d=t.mainDendrogram.selectAll(".node").data(u,function(t){return t.id||(t.id=++o)}),h=d.enter().append("g").attr("class","node").attr("transform",t.transformDendrogram(n.x0,n.y0));h.append("path").attr("d",function(t){var i=(0,l.shapeSymbol)(20*e.dendrogram_node_radius);return(0,l.notEmpty)(t.data.type)?i[t.data.type]():i[e.dendrogram_node_type]()}).attr("class","node-item").style("stroke","steelblue").style("stroke-width","1px").style("stroke-opacity","1").attr("cursor","pointer"),h.append("text").attr("dx",function(t){return t.children?-8:8}).attr("dy",3).style("text-anchor",function(t){return t.children?"end":"start"}).style("font-family",e.data_labels_font_family).style("font-weight",(0,l.notEmpty)(e.data_labels_font_weight)?e.data_labels_font_weight:"normal").style("font-size",e.data_labels_font_size+"px").style("fill",e.data_labels_color).attr("visibility",(0,l.notEmpty)(e.data_labels_visibled)&&e.data_labels_visibled?"visible":"hidden").text(function(t){return t.data.name});var p=h.merge(d);p.transition().duration(i).attr("transform",function(e){return t.transformDendrogram(e.x,e.y)}),p.select(".node-item").style("fill",function(t){return t._children?"lightsteelblue":(0,l.notEmpty)(t.data.color)?t.data.color:(0,l.notEmpty)(e.dendrogram_node_color)?e.dendrogram_node_color:"#fff"}),p.on("click",function(t){t.children?(t._children=t.children,t.children=null):(t.children=t._children,t._children=null),update(t)}),d.exit().transition().duration(i).attr("transform",t.transformDendrogram(n.x,n.y)).remove();var f=t.mainDendrogram.selectAll(".link").data(c,function(t){return t.id});f.enter().insert("path","g").attr("class","link").style("fill","none").style("stroke-width","1px").style("stroke",(0,l.notEmpty)(e.dendrogram_line_color)?e.dendrogram_line_color:"#ccc").style("stroke-dasharray",(0,l.borderStyle)(e.dendrogram_line_type)).attr("d",function(){var e={x:n.x0||0,y:n.y0||0};return t.diagonalDendrogram(e,e)}).merge(f).transition().duration(i).attr("d",function(e){return t.diagonalDendrogram(e,e.parent)}),f.exit().transition().duration(i).attr("d",function(){var e={x:n.x||0,y:n.y||0};return t.diagonalDendrogram(e,e)}).remove(),u.forEach(function(t){t.x0=t.x,t.y0=t.y})}var t=this,e=t.config,i=350,a=(0,n.hierarchy)(t.mainDendrogram.data()[0].value),r=function(t){t.children&&(t._children=t.children,t._children.forEach(r),t.children=null)},o=0,s=void 0;a.x0=t.height/2,a.y0=0,"radial-tree"===e.dendrogram_type&&(s=(0,n.tree)().size([360,t.height/2-100]).separation(function(t,e){return(t.parent===e.parent?1:2)/t.depth})),"radial-cluster"===e.dendrogram_type&&(s=(0,n.cluster)().size([360,t.height/2-100]).separation(function(t,e){return(t.parent===e.parent?1:2)/t.depth})),"tree"===e.dendrogram_type&&(s=(0,n.tree)().size([t.height,t.width-160])),"cluster"===e.dendrogram_type&&(s=(0,n.cluster)().size([t.height,t.width-160])),e.dendrogram_collapse||a.children.forEach(r),update(a)},transformDendrogram:function(t,e){var i=this,n=i.config;return"cluster"===n.dendrogram_type||"tree"===n.dendrogram_type?"translate("+e+","+t+")":"rotate("+((t||0)-90)+")translate("+e+")"},diagonalDendrogram:function(t,e){var i=this,n=i.config;return"cluster"===n.dendrogram_type||"tree"===n.dendrogram_type?function(t,e){return"M "+t.y+" "+t.x+"\n\t\t\t\tC "+(t.y+e.y)/2+" "+t.x+",\n\t\t\t\t  "+(t.y+e.y)/2+" "+e.x+",\n\t\t\t\t  "+e.y+" "+e.x}(t,e):function(t,e){return"M "+i.radiusDendrogram(t.x,t.y)+"\n\t\t\t\tC "+i.radiusDendrogram(t.x,(t.y+e.y)/2)+",\n\t\t\t\t  "+i.radiusDendrogram(e.x,(t.y+e.y)/2)+",\n\t\t\t\t  "+i.radiusDendrogram(e.x,e.y)}(t,e)},radiusDendrogram:function(t,e){var i=(t-90)/180*Math.PI,n=e;return[n*Math.cos(i),n*Math.sin(i)]},redrawDendrogram:function(){return[this.mainDendrogram]}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initSunburst:function(){var t=this,e=t.config;t.main.select("."+r.default.chart).append("g").attr("class",r.default.chartSunburst).attr("transform",t.getTranslate("sunburst")),t.hasType("sunburst")&&(e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForSunburst:function(t){var e=this,i=e.config;e.mainSunburst=e.main.select("."+r.default.chart).selectAll("."+r.default.chartSunburst).data(t[0].values),i.zoom_enabled&&e.main.select("."+r.default.zoomRect).call((0,n.zoom)().scaleExtent([.5,8]).on("zoom",function(){e.mainSunburst.attr("transform",n.event.transform)}))},updateSunburst:function(){function isParentOf(t,e){return!(t!==e)||!!t.children&&t.children.some(function(t){return isParentOf(t,e)})}function arcTweenText(t){var e=(0,n.interpolate)({x0:t.x0s?t.x0s:0,x1:t.x1s?t.x1s:0,y0:t.y0s?t.y0s:0,y1:t.y1s?t.y1s:0},t);return function(i){var n=e(i),a=(r((n.x0+n.x1)/2)-Math.PI/2)/Math.PI*180;return n.textAngle=a>90?180+a:a,t.centroid=c.centroid(n),"translate("+c.centroid(n)+")rotate("+n.textAngle+")"}}function mouseover(e){t.mainSunburst.selectAll(".node").select("path").style("opacity","0.3");var i=(0,l.notEmpty)(e.parent)?e.value:0,n=(100*i/h).toPrecision(3);t.mainSunburst.select(".text-name").text((0,l.notEmpty)(e.parent)?e.data.name:""),t.mainSunburst.select(".text-value").text(n<.1?"":n+"%");var a=e.ancestors().reverse();a.shift(),t.mainSunburst.selectAll(".node").select("path").filter(function(t){return a.indexOf(t)>=0}).style("opacity","1")}function mouseleave(){t.mainSunburst.selectAll(".node").select("path").on("mouseover",null),t.mainSunburst.selectAll(".node").select("path").transition().duration(750).style("opacity","1").on("end",function(){(0,n.select)(this).on("mouseover",mouseover)}),t.mainSunburst.select(".text-name").text(""),t.mainSunburst.select(".text-value").text("")}function click(e){if(d!==e){d=e,t.mainSunburst.on("mouseleave",null),t.mainSunburst.selectAll(".node").select("text").style("opacity","0");var i=t.mainSunburst.transition().duration(750).tween("scale",function(){var t=(0,n.interpolate)(r.domain(),[e.x0,e.x1]),i=(0,n.interpolate)(o.domain(),[e.y0,1]),s=(0,n.interpolate)(o.range(),[e.y0?50:0,a]);return function(e){r.domain(t(e)),o.domain(i(e)).range(s(e))}});i.selectAll(".node").select("path").attrTween("d",function(t){return function(){return c(t)}}),i.selectAll(".node").select("text").style("opacity","1").attr("visibility",function(t){return isParentOf(e,t)?null:"hidden"}).attrTween("transform",function(t,e){return arcTweenText(t,e)}).on("end",function(){t.mainSunburst.on("mouseleave",mouseleave)})}}var t=this,e=t.config,i=t.mainSunburst.data()[0].value,a=Math.min(t.width,t.height)/2-10,r=(0,n.scaleLinear)().range([0,2*Math.PI]),o=(0,n.scalePow)().exponent(1.3).domain([0,1]).range([0,a]),s=(0,n.scaleOrdinal)(n.schemeCategory20),u=(0,n.partition)(),c=(0,n.arc)().startAngle(function(t){return Math.max(0,Math.min(2*Math.PI,r(t.x0)))}).endAngle(function(t){return Math.max(0,Math.min(2*Math.PI,r(t.x1)))}).innerRadius(function(t){return Math.max(0,o(t.y0))}).outerRadius(function(t){return Math.max(0,o(t.y1))}),d=void 0,h=void 0;!function(i){var a=(0,n.hierarchy)(i).sum(function(t){return t.size}).sort(function(t,e){return e.value-t.value}),r=t.mainSunburst.selectAll(".node").data(u(a).descendants()).enter().append("g").attr("class","node").on("click",click);h=a.value,r.exit().remove(),r.append("path").attr("d",c).attr("class",function(t,e){return"node-item-"+e}).attr("fill-rule","evenodd").style("fill",function(t){var e=(t.children?t:t.parent).data.color;return(0,l.notEmpty)(e)?e:s((t.children?t:t.parent).data.name)}).style("stroke","#fff").style("opacity","1").style("cursor","pointer").on("mouseover",mouseover),r.append("text").attr("dy",".35em").style("cursor","pointer").style("font-family",e.data_labels_font_family).style("font-weight",(0,l.notEmpty)(e.data_labels_font_weight)?e.data_labels_font_weight:"normal").style("font-size",e.data_labels_font_size+"px").style("fill",e.data_labels_color).attr("visibility",(0,l.notEmpty)(e.data_labels_visibled)&&e.data_labels_visibled?"visible":"hidden").text(function(t){return t.parent?t.data.name:""}).transition().attrTween("transform",function(t,e){return arcTweenText(t,e)}).attr("text-anchor",function(t){return t.textAngle>180?"start":"end"}).attr("dx",function(t){return t.textAngle>180?-25:25});var o=t.mainSunburst.append("g").attr("class","explanation");o.exit().remove(),o.append("text").attr("class","text-name").attr("text-anchor","middle").attr("fill","#333").attr("x",t.mainSunburst.select(".node-item-0").attr("x")).attr("y",t.mainSunburst.select(".node-item-0").attr("y")),o.append("text").attr("class","text-value").attr("text-anchor","middle").attr("fill","#666").attr("x",t.mainSunburst.select(".node-item-0").attr("x")).attr("y",t.mainSunburst.select(".node-item-0").attr("y")+25),t.mainSunburst.on("mouseleave",mouseleave)}(i)},redrawSunburst:function(){return[this.mainSunburst]}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initPack:function(){var t=this,e=t.config;t.chartPack=t.main.select("."+r.default.chart).append("g").attr("class",r.default.chartPack.chart).attr("transform",t.getTranslate("pack")),t.hasType("pack")&&(e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForPack:function(t){this.chartPack.data=t[0].values[0].value},updatePack:function(){function zoomTo(t){var e=s/t[2];f=t,g.attr("transform",function(i){return"translate("+(i.x-t[0])*e+","+(i.y-t[1])*e+")"}),_.attr("r",function(t){return t.r*e})}function zoom(t){var e=t;(0,n.transition)().duration(n.event.altKey?7500:750).tween("zoom",function(){var t=(0,n.interpolateZoom)(f,[e.x,e.y,2*e.r]);return function(e){zoomTo(t(e))}}).select("."+r.default.chartPack.chart).selectAll("text").filter(function(t){return t.parent===e||"inline"===this.style.display}).style("fill-opacity",function(t){return t.parent===e?"1":"0"}).on("start",function(t){t.parent===e&&(this.style.display="inline")}).on("end",function(t){t.parent!==e&&(this.style.display="none")})}var t=this;t.additionalConfig.pack=t.config.pack;var e=t.getOptions(),i=e.pack,a={"font-size":t.config.data_labels_style["font-size"]||"14px",fill:t.config.data_labels_style.fill||"black","font-weight":t.config.data_labels_style["font-weight"]||"normal","fill-opacity":t.config.data_labels_style["fill-opacity"]||"1"},o={w:t.width,h:t.height},s=Math.min(o.w,o.h)-10,u=function(t){return 1===t?"0.4":Math.min(1,.4+t/10).toString()},c=(0,n.pack)().size([s,s]).padding(2),d=t.chartPack.data,h=(0,n.hierarchy)(d).sum(function(t){return t.size}).sort(function(t,e){return e.value-t.value}),p=c(h).descendants(),f=void 0,g=void 0,_=void 0;_=t.chartPack.append("g").attr("class",r.default.chartPack.nodes).selectAll("circle").data(p).enter().append("circle").attr("class",function(t){return t.parent?t.children?r.default.chartPack.node:r.default.chartPack.node+" "+r.default.chartPack.leaf:r.default.chartPack.node+" "+r.default.chartPack.root}).each(function(){var t=(0,n.select)(this),e=t.attr("class"),i=-1!==e.indexOf(""+r.default.chartPack.leaf),a=-1!==e.indexOf(""+r.default.chartPack.root);(i||a)&&t.attr("pointer-events","none")}).attr("cursor","pointer").style("fill",function(t){return t.children?(0,l.notEmpty)(t.data.color)?t.data.color:i.circle.fill:i.leaf.fill}).style("fill-opacity",function(t){return t.children?""+u(t.depth):"1"}).style("stroke",function(t){return t.children?i.circle.border.color:i.leaf.border.color}).style("stroke-width",function(t){return t.children?""+i.circle.border.width:""+i.leaf.border.width}).on("click",function(t){h!==t&&zoom(t),n.event.stopPropagation()}),t.chartPack.append("g").attr("class",r.default.chartPack.labels).selectAll("text").data(p).enter().append("text").attr("class",r.default.chartPack.label).style("font-size",a["font-size"]).style("font-weight",a["font-weight"]).style("fill",a.fill).style("text-anchor","middle").style("fill-opacity",function(t){return t.parent===h?a["fill-opacity"]:"0"}).style("display",function(t){return t.parent===h?"inline":"none"}).text(function(t){return t.data.name}).attr("pointer-events","none"),g=t.chartPack.selectAll("circle, text"),t.svg.on("click",function(){zoom(h)}),zoomTo([h.x,h.y,2*h.r])},redrawPack:function(){return[this.chartPack]}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(2),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initTreemap:function(){var t=this,e=t.config;t.chartTreemap=t.main.select("."+r.default.chart).append("g").attr("class",r.default.chartTreemap.chart),t.hasType("pack")&&(e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForTreemap:function(t){this.chartTreemap.data=t[0].values[0].value},updateTreemap:function(){function zoom(e){var o=e.x1-e.x0,l=e.y1-e.y0,u=1*i.width/o,c=1*i.height/l;a.domain([e.x0,e.x0+o]),r.domain([e.y0,e.y0+l]);var d=t.chartTreemap.selectAll("g.cell").transition().duration(n.event.altKey?7500:750).attr("transform",function(t){return"translate("+a(t.x0)+","+r(t.y0)+")"});d.select("rect").attr("width",function(t){return u*(t.x1-t.x0)-1}).attr("height",function(t){return c*(t.y1-t.y0)-1}),d.select("text").attr("x",function(t){return u*(t.x1-t.x0)/2}).attr("y",function(t){return c*(t.y1-t.y0)/2}).style("opacity",function(t){return u*(t.x1-t.x0)>t.w?"1":"0"}),s=e,n.event.stopPropagation()}var t=this,e=t.chartTreemap.data,i={width:t.width,height:t.height},a=(0,n.scaleLinear)().range([0,i.width]),r=(0,n.scaleLinear)().range([0,i.height]),o={"font-size":t.config.data_labels_style["font-size"]||"8px",fill:t.config.data_labels_style.fill||"black","font-weight":t.config.data_labels_style["font-weight"]||"normal","fill-opacity":t.config.data_labels_style["fill-opacity"]||"1"},s=void 0,u=(0,n.scaleOrdinal)(n.schemeCategory20.map(function(t){return(0,n.interpolateRgb)(t,"#fff")(.2)})),c=(0,n.treemap)().tile(n.treemapResquarify).size([i.width,i.height]).round(!0).paddingInner(1),d=(0,n.hierarchy)(e).eachBefore(function(t){t.data.id=(t.parent?t.parent.data.id+".":"")+t.data.name}).sum(function(t){return t.size}).sort(function(t,e){return e.height-t.height||e.value-t.value});s=d,c(d);var h=t.chartTreemap.selectAll("g").data(d.leaves()).enter().append("g").attr("class","cell").attr("transform",function(t){return"translate("+t.x0+","+t.y0+")"}).on("click",function(t){return zoom(s===t.parent?d:t.parent)});h.append("rect").attr("id",function(t){return t.data.id}).attr("width",function(t){return t.x1-t.x0}).attr("height",function(t){return t.y1-t.y0}).attr("fill",function(t){return(0,l.notEmpty)(t.parent.data.color)?t.parent.data.color:u(t.parent.data.id)}),h.append("text").attr("x",function(t){return.5*(t.x1-t.x0)}).attr("y",function(t){return.5*(t.y1-t.y0)}).attr("dy",".35em").attr("text-anchor","middle").text(function(t){return t.data.name}).style("opacity",function(t){return t.w=this.getComputedTextLength(),t.x1-t.x0>t.w?"1":"0"}).style("font-size",o["font-size"]).style("font-weight",o["font-weight"]).style("fill",o.fill)},redrawTreemap:function(){return[this.chartTreemap]}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(43),r=i(44),o=i(2),s=_interopRequireDefault(o),l=i(1),u=_interopRequireDefault(l),c=i(0);(0,c.extend)(u.default.prototype,{initBubbleCluster:function(){var t=this,e=t.config;t.main.select("."+s.default.chart).append("g").attr("class",s.default.chartBubbleCluster),t.hasType("bubble-cluster")&&(e.interaction_enabled=!1,e.grid_x_show=!1,e.grid_y_show=!1)},updateTargetsForBubbleCluster:function(t){var e=this,i=e.config;e.mainBubbleCluster=e.main.select("."+s.default.chart).selectAll("."+s.default.chartBubbleCluster).data(t[0].values),i.zoom_enabled&&e.main.select("."+s.default.zoomRect).call((0,n.zoom)().scaleExtent([.5,8]).on("zoom",function(){e.mainBubbleCluster.attr("transform",n.event.transform)}))},updateBubbleCluster:function(){var t=this,e=t.config,i=(0,n.scaleOrdinal)(n.schemeCategory20),o=JSON.parse(JSON.stringify(t.mainBubbleCluster.data()[0].value)),s=(0,n.max)(o,function(t){return t.value}),l=(0,n.scaleLinear)().domain([0,s]).range([5,70]),u=[],d={},h=1,p=o.map(function(e){var i=l(e.value);(0,c.notEmpty)(d[e.cluster])||(d[e.cluster]={index:h++}),e.radius=i,e.x=Math.cos(d[e.cluster].index/10*2*Math.PI)*(o.length+250)+t.width/2,e.y=Math.sin(d[e.cluster].index/10*2*Math.PI)*(o.length+250)+t.height/2;var n=e;return(!u[e.cluster]||i>u[e.cluster].radius)&&(u[e.cluster]=n),n});t.simulationBubblCluster=(0,n.forceSimulation)().force("center",(0,n.forceCenter)(t.width/2,t.height/2)).force("attract",(0,a.forceAttract)().target([t.width/2,t.height/2]).strength(.01)).force("cluster",(0,r.forceCluster)().centers(function(t){return u[t.cluster]}).strength(.75).centerInertia(.1)).force("collide",(0,n.forceCollide)(function(t){return t.radius+1.5}).strength(0));var f=t.mainBubbleCluster.selectAll(".node").data(p).enter().append("g").attr("class","node").attr("cluster",function(t){return t.cluster}).call((0,n.drag)().on("start",t.dragstartedBubblCluster.bind(t)).on("drag",t.draggedBubblCluster.bind(t)).on("end",t.dragendedBubblCluster.bind(t)));f.append("circle").style("fill",function(t){return i(t.cluster)}).attr("r",function(t){return t.radius}),f.append("text").attr("class","text-name").attr("dy",".01em").attr("text-anchor","middle").style("font-family",e.data_labels_font_family).style("font-weight",(0,c.notEmpty)(e.data_labels_font_weight)?e.data_labels_font_weight:"normal").style("font-size",e.data_labels_font_size+"px").style("fill",e.data_labels_color).attr("visibility",(0,c.notEmpty)(e.data_labels_visibled)&&e.data_labels_visibled?"visible":"hidden").attr("opacity",function(t){return t.radius>20?"1":"0"}).text(function(t){return t.name.substring(0,t.radius/3)}),f.append("text").attr("class","text-value").attr("dy","1.3em").attr("text-anchor","middle").style("font-family",e.data_labels_font_family).style("font-size",e.data_labels_font_size+"px").style("fill",e.data_labels_color).attr("visibility",(0,c.notEmpty)(e.data_labels_visibled)&&e.data_labels_visibled?"visible":"hidden").attr("opacity",function(t){return t.radius>20?"1":"0"}).text(function(t){return t.value}),t.simulationBubblCluster.on("tick",function(){f.attr("transform",function(t){return"translate("+t.x+", "+t.y+")"})}).nodes(p);var g=(0,n.timer)(function(e){var i=e/500;t.simulationBubblCluster.force("collide").strength(.7*Math.pow(i,2)),i>=1&&g.stop()})},dragstartedBubblCluster:function(t){n.event.active||this.simulationBubblCluster.alphaTarget(.3).restart(),t.fx=t.x,t.fy=t.y},draggedBubblCluster:function(t){t.fx=n.event.x,t.fy=n.event.y},dragendedBubblCluster:function(t){n.event.active||this.simulationBubblCluster.alphaTarget(0),t.fx=null,t.fy=null},redrawBubbleCluster:function(){return[this.mainBubbleCluster]}})},function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"forceAttract",function(){return n});var n=function(t){function force(t){for(var n=void 0,r=void 0,o=void 0,s=0;s<e.length;s++)n=e[s],r=i[s],o=a[s],n.vx+=(r[0]-n.x)*o*t,n.vy+=(r[1]-n.y)*o*t}function initialize(){if(e){a=new Array(e.length);for(var r=0;r<e.length;r++)a[r]=n(e[r],r,e);i=new Array(e.length);for(var o=0;o<e.length;o++)i[o]=t(e[o],o,e)}}var e=void 0,i=void 0,n=void 0,a=void 0;return force.initialize=function(t){e=t,initialize()},force.strength=function(t){return null==t?n:(n="function"==typeof t?t:function(){return+t},initialize(),force)},force.target=function(e){return null==e?t:(t="function"==typeof e?e:function(){return e},initialize(),force)},n||force.strength(.1),t||force.target([0,0]),force}},function(t,e,i){"use strict";function cluster(t){function force(t){t*=n*t;var r=void 0,o=void 0,s=void 0,l=void 0,u=void 0;e.forEach(function(e,n){(r=i[n])&&r!==e&&(o=e.x-r.x,s=e.y-r.y,l=Math.sqrt(o*o+s*s),u=e.radius+(r.radius||0),l&&l!=u&&(l=(l-u)/l*t,e.x-=o*=l,e.y-=s*=l,r.x+=(1-a)*o,r.y+=(1-a)*s))})}function initialize(){if(e){var n=void 0,a=e.length;for(i=new Array(a),n=0;n<a;n++)i[n]=t(e[n],n,e)}}var e=void 0,i=[],n=.1,a=0;return"function"!=typeof t&&(t=function(){return t}),force.initialize=function(t){e=t,initialize()},force.centers=function(e){return null==e?t:(t="function"==typeof e?e:function(t,i){return e[i]},initialize(),force)},force.strength=function(t){return null==t?n:(n=+t,force)},force.centerInertia=function(t){return null==t?a:(a=+t,force)},force}Object.defineProperty(e,"__esModule",{value:!0}),i.d(e,"forceCluster",function(){return cluster})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(46),r=_interopRequireDefault(a);i(47),i(48);var o=i(2),s=_interopRequireDefault(o),l=i(1),u=_interopRequireDefault(l);(0,i(0).extend)(u.default.prototype,{initMap:function(){var t=this;t.hasType("map")&&(t.selectChart.append("div").attr("class",s.default.chartMap).style("height",t.getCurrentHeight()+"px"),t.selectChart.select("svg").remove(),t.selectChart.select(".rb-tooltip-container").remove())},updateTargetsForMap:function(t){var e=this;e.mainMap=e.selectChart.select("."+s.default.chartMap).data(t[0].values)},updateMap:function(){var t=this,e=t.config,i=t.mainMap.data()[0].value,a="pk.eyJ1Ijoia2hhbmhsdiIsImEiOiJjamVncG1jc3EwNTVjMndvNnFmZHZwc2xwIn0.w8D2M_qnTUyTO3QzUDEdhQ",o=r.default.tileLayer("http://{s}.tile.osm.org/{z}/{x}/{y}.png",{maxZoom:18,attribution:"&copy; <a href='http://osm.org/copyright'>OpenStreetMap</a> contributors"}),s=r.default.latLng(i[0].lat,i[i.length-1].lon);if(!t.mainMap.classed("leaflet-container")){var l=r.default.map(t.mainMap.node(),{center:s,zoom:e.map_zoom,layers:[o],scrollWheelZoom:e.map_zoom_scroll}),u=r.default.tileLayer("https://api.mapbox.com/v4/mapbox.light/{z}/{x}/{y}.png?access_token="+a,{id:"examples.map-20v6611k",attribution:"&copy; <a href='http://mapbox.com'>Mapbox</a> contributors"}),c=r.default.tileLayer("https://api.mapbox.com/v4/mapbox.streets/{z}/{x}/{y}.png?access_token="+a,{id:"examples.map-i875mjb7",attribution:"&copy; <a href='http://mapbox.com'>Mapbox</a> contributors"}),d={};if("heat"===e.map_type){var h=[];i.forEach(function(t){var e=[];e.push(parseFloat(t.lat)),e.push(parseFloat(t.lon)),e.push(parseFloat(t.size)),h.push(e)});var p=r.default.heatLayer(h,{radius:20,blur:15,maxZoom:15});l.addLayer(p),d.Heat=p}else{var f=r.default.markerClusterGroup({maxClusterRadius:60}),g=(0,n.max)(i,function(t){return t.size}),_=(0,n.min)(i,function(t){return t.size}),m=g-_==0?1:g-_;i.forEach(function(t){var i="<div class='marker-popup-limit'><table class='marker-popup'>";for(var n in t)i+="<tr><td>"+n+"</td><td>"+t[n]+"</td></tr>";if(i+="</table></div>","marker"===e.map_type&&f.addLayer(r.default.marker(r.default.latLng(t.lat,t.lon),{title:t.name}).bindPopup(i)),"circle"===e.map_type){var a=(t.size-_)*(45/m)+5;f.addLayer(r.default.circle(r.default.latLng(t.lat,t.lon),{radius:a,color:"red",fillColor:"#f03",fillOpacity:.5}).bindPopup(i))}}),f.on("clusterclick",function(t){t.layer.zoomToBounds()}),l.addLayer(f),"marker"===e.map_type&&(d.Marker=f),"circle"===e.map_type&&(d.Circle=f)}r.default.control.layers({Grayscale:u,Streets:c,Default:o},d).addTo(l)}},redrawMap:function(){return[this.mainMap]}})},function(t,e,i){!function(t,i){i(e)}(0,function(t){"use strict";function extend(t){var e,i,n,a;for(i=1,n=arguments.length;i<n;i++){a=arguments[i];for(e in a)t[e]=a[e]}return t}function bind(t,e){var i=Array.prototype.slice;if(t.bind)return t.bind.apply(t,i.call(arguments,1));var n=i.call(arguments,2);return function(){return t.apply(e,n.length?n.concat(i.call(arguments)):arguments)}}function stamp(t){return t._leaflet_id=t._leaflet_id||++n,t._leaflet_id}function throttle(t,e,i){var n,a,r,o;return o=function(){n=!1,a&&(r.apply(i,a),a=!1)},r=function(){n?a=arguments:(t.apply(i,arguments),setTimeout(o,e),n=!0)}}function wrapNum(t,e,i){var n=e[1],a=e[0],r=n-a;return t===n&&i?t:((t-a)%r+r)%r+a}function falseFn(){return!1}function formatNum(t,e){var i=Math.pow(10,void 0===e?6:e);return Math.round(t*i)/i}function trim(t){return t.trim?t.trim():t.replace(/^\s+|\s+$/g,"")}function splitWords(t){return trim(t).split(/\s+/)}function setOptions(t,e){t.hasOwnProperty("options")||(t.options=t.options?i(t.options):{});for(var n in e)t.options[n]=e[n];return t.options}function getParamString(t,e,i){var n=[];for(var a in t)n.push(encodeURIComponent(i?a.toUpperCase():a)+"="+encodeURIComponent(t[a]));return(e&&-1!==e.indexOf("?")?"&":"?")+n.join("&")}function template(t,e){return t.replace(a,function(t,i){var n=e[i];if(void 0===n)throw new Error("No value provided for variable "+t);return"function"==typeof n&&(n=n(e)),n})}function indexOf(t,e){for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1}function getPrefixed(t){return window["webkit"+t]||window["moz"+t]||window["ms"+t]}function timeoutDefer(t){var e=+new Date,i=Math.max(0,16-(e-l));return l=e+i,window.setTimeout(t,i)}function requestAnimFrame(t,e,i){if(!i||c!==timeoutDefer)return c.call(window,bind(t,e));t.call(e)}function cancelAnimFrame(t){t&&d.call(window,t)}function Class(){}function checkDeprecatedMixinEvents(t){if("undefined"!=typeof L&&L&&L.Mixin){t=o(t)?t:[t];for(var e=0;e<t.length;e++)t[e]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",(new Error).stack)}}function Point(t,e,i){this.x=i?Math.round(t):t,this.y=i?Math.round(e):e}function toPoint(t,e,i){return t instanceof Point?t:o(t)?new Point(t[0],t[1]):void 0===t||null===t?t:"object"==typeof t&&"x"in t&&"y"in t?new Point(t.x,t.y):new Point(t,e,i)}function Bounds(t,e){if(t)for(var i=e?[t,e]:t,n=0,a=i.length;n<a;n++)this.extend(i[n])}function toBounds(t,e){return!t||t instanceof Bounds?t:new Bounds(t,e)}function LatLngBounds(t,e){if(t)for(var i=e?[t,e]:t,n=0,a=i.length;n<a;n++)this.extend(i[n])}function toLatLngBounds(t,e){return t instanceof LatLngBounds?t:new LatLngBounds(t,e)}function LatLng(t,e,i){if(isNaN(t)||isNaN(e))throw new Error("Invalid LatLng object: ("+t+", "+e+")");this.lat=+t,this.lng=+e,void 0!==i&&(this.alt=+i)}function toLatLng(t,e,i){return t instanceof LatLng?t:o(t)&&"object"!=typeof t[0]?3===t.length?new LatLng(t[0],t[1],t[2]):2===t.length?new LatLng(t[0],t[1]):null:void 0===t||null===t?t:"object"==typeof t&&"lat"in t?new LatLng(t.lat,"lng"in t?t.lng:t.lon,t.alt):void 0===e?null:new LatLng(t,e,i)}function Transformation(t,e,i,n){if(o(t))return this._a=t[0],this._b=t[1],this._c=t[2],void(this._d=t[3]);this._a=t,this._b=e,this._c=i,this._d=n}function toTransformation(t,e,i,n){return new Transformation(t,e,i,n)}function svgCreate(t){return document.createElementNS("http://www.w3.org/2000/svg",t)}function pointsToPath(t,e){var i,n,a,r,o,s,l="";for(i=0,a=t.length;i<a;i++){for(o=t[i],n=0,r=o.length;n<r;n++)s=o[n],l+=(n?"L":"M")+s.x+" "+s.y;l+=e?nt?"z":"x":""}return l||"M0 0"}function userAgentContains(t){return navigator.userAgent.toLowerCase().indexOf(t)>=0}function addPointerListener(t,e,i,n){return"touchstart"===e?_addPointerStart(t,i,n):"touchmove"===e?_addPointerMove(t,i,n):"touchend"===e&&_addPointerEnd(t,i,n),this}function removePointerListener(t,e,i){var n=t["_leaflet_"+e+i];return"touchstart"===e?t.removeEventListener(ot,n,!1):"touchmove"===e?t.removeEventListener(st,n,!1):"touchend"===e&&(t.removeEventListener(lt,n,!1),t.removeEventListener(ut,n,!1)),this}function _addPointerStart(t,e,i){var n=bind(function(t){if("mouse"!==t.pointerType&&t.MSPOINTER_TYPE_MOUSE&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE){if(!(ct.indexOf(t.target.tagName)<0))return;preventDefault(t)}_handlePointer(t,e)});t["_leaflet_touchstart"+i]=n,t.addEventListener(ot,n,!1),ht||(document.documentElement.addEventListener(ot,_globalPointerDown,!0),document.documentElement.addEventListener(st,_globalPointerMove,!0),document.documentElement.addEventListener(lt,_globalPointerUp,!0),document.documentElement.addEventListener(ut,_globalPointerUp,!0),ht=!0)}function _globalPointerDown(t){dt[t.pointerId]=t,pt++}function _globalPointerMove(t){dt[t.pointerId]&&(dt[t.pointerId]=t)}function _globalPointerUp(t){delete dt[t.pointerId],pt--}function _handlePointer(t,e){t.touches=[];for(var i in dt)t.touches.push(dt[i]);t.changedTouches=[t],e(t)}function _addPointerMove(t,e,i){var n=function(t){(t.pointerType!==t.MSPOINTER_TYPE_MOUSE&&"mouse"!==t.pointerType||0!==t.buttons)&&_handlePointer(t,e)};t["_leaflet_touchmove"+i]=n,t.addEventListener(st,n,!1)}function _addPointerEnd(t,e,i){var n=function(t){_handlePointer(t,e)};t["_leaflet_touchend"+i]=n,t.addEventListener(lt,n,!1),t.addEventListener(ut,n,!1)}function addDoubleTapListener(t,e,i){function onTouchStart(t){var e;if($){if(!S||"mouse"===t.pointerType)return;e=pt}else e=t.touches.length;if(!(e>1)){var i=Date.now(),s=i-(n||i);a=t.touches?t.touches[0]:t,r=s>0&&s<=o,n=i}}function onTouchEnd(t){if(r&&!a.cancelBubble){if($){if(!S||"mouse"===t.pointerType)return;var i,o,s={};for(o in a)i=a[o],s[o]=i&&i.bind?i.bind(a):i;a=s}a.type="dblclick",e(a),n=null}}var n,a,r=!1,o=250;return t[_t+ft+i]=onTouchStart,t[_t+gt+i]=onTouchEnd,t[_t+"dblclick"+i]=e,t.addEventListener(ft,onTouchStart,!1),t.addEventListener(gt,onTouchEnd,!1),t.addEventListener("dblclick",e,!1),this}function removeDoubleTapListener(t,e){var i=t[_t+ft+e],n=t[_t+gt+e],a=t[_t+"dblclick"+e];return t.removeEventListener(ft,i,!1),t.removeEventListener(gt,n,!1),S||t.removeEventListener("dblclick",a,!1),this}function on(t,e,i,n){if("object"==typeof e)for(var a in e)addOne(t,a,e[a],i);else{e=splitWords(e);for(var r=0,o=e.length;r<o;r++)addOne(t,e[r],i,n)}return this}function off(t,e,i,n){if("object"==typeof e)for(var a in e)removeOne(t,a,e[a],i);else if(e){e=splitWords(e);for(var r=0,o=e.length;r<o;r++)removeOne(t,e[r],i,n)}else{for(var s in t[mt])removeOne(t,s,t[mt][s]);delete t[mt]}return this}function addOne(t,e,i,n){var a=e+stamp(i)+(n?"_"+stamp(n):"");if(t[mt]&&t[mt][a])return this;var r=function(e){return i.call(n||t,e||window.event)},o=r;$&&0===e.indexOf("touch")?addPointerListener(t,e,r,a):!J||"dblclick"!==e||!addDoubleTapListener||$&&O?"addEventListener"in t?"mousewheel"===e?t.addEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):"mouseenter"===e||"mouseleave"===e?(r=function(e){e=e||window.event,isExternalTarget(t,e)&&o(e)},t.addEventListener("mouseenter"===e?"mouseover":"mouseout",r,!1)):("click"===e&&B&&(r=function(t){filterClick(t,o)}),t.addEventListener(e,r,!1)):"attachEvent"in t&&t.attachEvent("on"+e,r):addDoubleTapListener(t,r,a),t[mt]=t[mt]||{},t[mt][a]=r}function removeOne(t,e,i,n){var a=e+stamp(i)+(n?"_"+stamp(n):""),r=t[mt]&&t[mt][a];if(!r)return this;$&&0===e.indexOf("touch")?removePointerListener(t,e,a):!J||"dblclick"!==e||!removeDoubleTapListener||$&&O?"removeEventListener"in t?"mousewheel"===e?t.removeEventListener("onwheel"in t?"wheel":"mousewheel",r,!1):t.removeEventListener("mouseenter"===e?"mouseover":"mouseleave"===e?"mouseout":e,r,!1):"detachEvent"in t&&t.detachEvent("on"+e,r):removeDoubleTapListener(t,a),t[mt][a]=null}function stopPropagation(t){return t.stopPropagation?t.stopPropagation():t.originalEvent?t.originalEvent._stopped=!0:t.cancelBubble=!0,skipped(t),this}function disableScrollPropagation(t){return addOne(t,"mousewheel",stopPropagation),this}function disableClickPropagation(t){return on(t,"mousedown touchstart dblclick",stopPropagation),addOne(t,"click",fakeStop),this}function preventDefault(t){return t.preventDefault?t.preventDefault():t.returnValue=!1,this}function stop(t){return preventDefault(t),stopPropagation(t),this}function getMousePosition(t,e){if(!e)return new Point(t.clientX,t.clientY);var i=e.getBoundingClientRect(),n=i.width/e.offsetWidth||1,a=i.height/e.offsetHeight||1;return new Point(t.clientX/n-i.left-e.clientLeft,t.clientY/a-i.top-e.clientTop)}function getWheelDelta(t){return S?t.wheelDeltaY/2:t.deltaY&&0===t.deltaMode?-t.deltaY/yt:t.deltaY&&1===t.deltaMode?20*-t.deltaY:t.deltaY&&2===t.deltaMode?60*-t.deltaY:t.deltaX||t.deltaZ?0:t.wheelDelta?(t.wheelDeltaY||t.wheelDelta)/2:t.detail&&Math.abs(t.detail)<32765?20*-t.detail:t.detail?t.detail/-32765*60:0}function fakeStop(t){vt[t.type]=!0}function skipped(t){var e=vt[t.type];return vt[t.type]=!1,e}function isExternalTarget(t,e){var i=e.relatedTarget;if(!i)return!0;try{for(;i&&i!==t;)i=i.parentNode}catch(t){return!1}return i!==t}function filterClick(t,e){var i=t.timeStamp||t.originalEvent&&t.originalEvent.timeStamp,n=v&&i-v;if(n&&n>100&&n<500||t.target._simulatedClick&&!t._simulated)return void stop(t);v=i,e(t)}function get(t){return"string"==typeof t?document.getElementById(t):t}function getStyle(t,e){var i=t.style[e]||t.currentStyle&&t.currentStyle[e];if((!i||"auto"===i)&&document.defaultView){var n=document.defaultView.getComputedStyle(t,null);i=n?n[e]:null}return"auto"===i?null:i}function create$1(t,e,i){var n=document.createElement(t);return n.className=e||"",i&&i.appendChild(n),n}function remove(t){var e=t.parentNode;e&&e.removeChild(t)}function empty(t){for(;t.firstChild;)t.removeChild(t.firstChild)}function toFront(t){var e=t.parentNode;e.lastChild!==t&&e.appendChild(t)}function toBack(t){var e=t.parentNode;e.firstChild!==t&&e.insertBefore(t,e.firstChild)}function hasClass(t,e){if(void 0!==t.classList)return t.classList.contains(e);var i=getClass(t);return i.length>0&&new RegExp("(^|\\s)"+e+"(\\s|$)").test(i)}function addClass(t,e){if(void 0!==t.classList)for(var i=splitWords(e),n=0,a=i.length;n<a;n++)t.classList.add(i[n]);else if(!hasClass(t,e)){var r=getClass(t);setClass(t,(r?r+" ":"")+e)}}function removeClass(t,e){void 0!==t.classList?t.classList.remove(e):setClass(t,trim((" "+getClass(t)+" ").replace(" "+e+" "," ")))}function setClass(t,e){void 0===t.className.baseVal?t.className=e:t.className.baseVal=e}function getClass(t){return void 0===t.className.baseVal?t.className:t.className.baseVal}function setOpacity(t,e){"opacity"in t.style?t.style.opacity=e:"filter"in t.style&&_setOpacityIE(t,e)}function _setOpacityIE(t,e){var i=!1,n="DXImageTransform.Microsoft.Alpha";try{i=t.filters.item(n)}catch(t){if(1===e)return}e=Math.round(100*e),i?(i.Enabled=100!==e,i.Opacity=e):t.style.filter+=" progid:"+n+"(opacity="+e+")"}function testProp(t){for(var e=document.documentElement.style,i=0;i<t.length;i++)if(t[i]in e)return t[i];return!1}function setTransform(t,e,i){var n=e||new Point(0,0);t.style[bt]=(j?"translate("+n.x+"px,"+n.y+"px)":"translate3d("+n.x+"px,"+n.y+"px,0)")+(i?" scale("+i+")":"")}function setPosition(t,e){t._leaflet_pos=e,G?setTransform(t,e):(t.style.left=e.x+"px",t.style.top=e.y+"px")}function getPosition(t){return t._leaflet_pos||new Point(0,0)}function disableImageDrag(){on(window,"dragstart",preventDefault)}function enableImageDrag(){off(window,"dragstart",preventDefault)}function preventOutline(t){for(;-1===t.tabIndex;)t=t.parentNode;t.style&&(restoreOutline(),kt=t,Ct=t.style.outline,t.style.outline="none",on(window,"keydown",restoreOutline))}function restoreOutline(){kt&&(kt.style.outline=Ct,kt=void 0,Ct=void 0,off(window,"keydown",restoreOutline))}function createMap(t,e){return new Mt(t,e)}function simplify(t,e){if(!e||!t.length)return t.slice();var i=e*e;return t=_reducePoints(t,i),t=_simplifyDP(t,i)}function pointToSegmentDistance(t,e,i){return Math.sqrt(_sqClosestPointOnSegment(t,e,i,!0))}function closestPointOnSegment(t,e,i){return _sqClosestPointOnSegment(t,e,i)}function _simplifyDP(t,e){var i=t.length,n=typeof Uint8Array!=void 0+""?Uint8Array:Array,a=new n(i);a[0]=a[i-1]=1,_simplifyDPStep(t,a,e,0,i-1);var r,o=[];for(r=0;r<i;r++)a[r]&&o.push(t[r]);return o}function _simplifyDPStep(t,e,i,n,a){var r,o,s,l=0;for(o=n+1;o<=a-1;o++)(s=_sqClosestPointOnSegment(t[o],t[n],t[a],!0))>l&&(r=o,l=s);l>i&&(e[r]=1,_simplifyDPStep(t,e,i,n,r),_simplifyDPStep(t,e,i,r,a))}function _reducePoints(t,e){for(var i=[t[0]],n=1,a=0,r=t.length;n<r;n++)_sqDist(t[n],t[a])>e&&(i.push(t[n]),a=n);return a<r-1&&i.push(t[r-1]),i}function clipSegment(t,e,i,n,a){var r,o,s,l=n?Xt:_getBitCode(t,i),u=_getBitCode(e,i);for(Xt=u;;){if(!(l|u))return[t,e];if(l&u)return!1;r=l||u,o=_getEdgeIntersection(t,e,r,i,a),s=_getBitCode(o,i),r===l?(t=o,l=s):(e=o,u=s)}}function _getEdgeIntersection(t,e,i,n,a){var r,o,s=e.x-t.x,l=e.y-t.y,u=n.min,c=n.max;return 8&i?(r=t.x+s*(c.y-t.y)/l,o=c.y):4&i?(r=t.x+s*(u.y-t.y)/l,o=u.y):2&i?(r=c.x,o=t.y+l*(c.x-t.x)/s):1&i&&(r=u.x,o=t.y+l*(u.x-t.x)/s),new Point(r,o,a)}function _getBitCode(t,e){var i=0;return t.x<e.min.x?i|=1:t.x>e.max.x&&(i|=2),t.y<e.min.y?i|=4:t.y>e.max.y&&(i|=8),i}function _sqDist(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}function _sqClosestPointOnSegment(t,e,i,n){var a,r=e.x,o=e.y,s=i.x-r,l=i.y-o,u=s*s+l*l;return u>0&&(a=((t.x-r)*s+(t.y-o)*l)/u,a>1?(r=i.x,o=i.y):a>0&&(r+=s*a,o+=l*a)),s=t.x-r,l=t.y-o,n?s*s+l*l:new Point(r,o)}function isFlat(t){return!o(t[0])||"object"!=typeof t[0][0]&&void 0!==t[0][0]}function _flat(t){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),isFlat(t)}function clipPolygon(t,e,i){var n,a,r,o,s,l,u,c,d,h=[1,4,2,8];for(a=0,u=t.length;a<u;a++)t[a]._code=_getBitCode(t[a],e);for(o=0;o<4;o++){for(c=h[o],n=[],a=0,u=t.length,r=u-1;a<u;r=a++)s=t[a],l=t[r],s._code&c?l._code&c||(d=_getEdgeIntersection(l,s,c,e,i),d._code=_getBitCode(d,e),n.push(d)):(l._code&c&&(d=_getEdgeIntersection(l,s,c,e,i),d._code=_getBitCode(d,e),n.push(d)),n.push(s));t=n}return t}function icon(t){return new oe(t)}function marker(t,e){return new ue(t,e)}function circleMarker(t,e){return new de(t,e)}function circle(t,e,i){return new he(t,e,i)}function polyline(t,e){return new pe(t,e)}function polygon(t,e){return new fe(t,e)}function geometryToLayer(t,e){var i,n,a,r,o="Feature"===t.type?t.geometry:t,s=o?o.coordinates:null,l=[],u=e&&e.pointToLayer,c=e&&e.coordsToLatLng||coordsToLatLng;if(!s&&!o)return null;switch(o.type){case"Point":return i=c(s),u?u(t,i):new ue(i);case"MultiPoint":for(a=0,r=s.length;a<r;a++)i=c(s[a]),l.push(u?u(t,i):new ue(i));return new ae(l);case"LineString":case"MultiLineString":return n=coordsToLatLngs(s,"LineString"===o.type?0:1,c),new pe(n,e);case"Polygon":case"MultiPolygon":return n=coordsToLatLngs(s,"Polygon"===o.type?1:2,c),new fe(n,e);case"GeometryCollection":for(a=0,r=o.geometries.length;a<r;a++){var d=geometryToLayer({geometry:o.geometries[a],type:"Feature",properties:t.properties},e);d&&l.push(d)}return new ae(l);default:throw new Error("Invalid GeoJSON object.")}}function coordsToLatLng(t){return new LatLng(t[1],t[0],t[2])}function coordsToLatLngs(t,e,i){for(var n,a=[],r=0,o=t.length;r<o;r++)n=e?coordsToLatLngs(t[r],e-1,i):(i||coordsToLatLng)(t[r]),a.push(n);return a}function latLngToCoords(t,e){return e="number"==typeof e?e:6,void 0!==t.alt?[formatNum(t.lng,e),formatNum(t.lat,e),formatNum(t.alt,e)]:[formatNum(t.lng,e),formatNum(t.lat,e)]}function latLngsToCoords(t,e,i,n){for(var a=[],r=0,o=t.length;r<o;r++)a.push(e?latLngsToCoords(t[r],e-1,i,n):latLngToCoords(t[r],n));return!e&&i&&a.push(a[0]),a}function getFeature(t,e){return t.feature?extend({},t.feature,{geometry:e}):asFeature(e)}function asFeature(t){return"Feature"===t.type||"FeatureCollection"===t.type?t:{type:"Feature",properties:{},geometry:t}}function geoJSON(t,e){return new ge(t,e)}function videoOverlay(t,e,i){return new xe(t,e,i)}function divIcon(t){return new Ce(t)}function gridLayer(t){return new Ae(t)}function tileLayer(t,e){return new Pe(t,e)}function tileLayerWMS(t,e){return new Me(t,e)}function canvas$1(t){return it?new Ee(t):null}function svg$1(t){return nt||at?new ze(t):null}function rectangle(t,e){return new Re(t,e)}function noConflict(){return window.L=We,this}var e=Object.freeze;Object.freeze=function(t){return t};var i=Object.create||function(){function F(){}return function(t){return F.prototype=t,new F}}(),n=0,a=/\{ *([\w_-]+) *\}/g,o=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},s="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=",l=0,c=window.requestAnimationFrame||getPrefixed("RequestAnimationFrame")||timeoutDefer,d=window.cancelAnimationFrame||getPrefixed("CancelAnimationFrame")||getPrefixed("CancelRequestAnimationFrame")||function(t){window.clearTimeout(t)},h=(Object.freeze||Object)({freeze:e,extend:extend,create:i,bind:bind,lastId:n,stamp:stamp,throttle:throttle,wrapNum:wrapNum,falseFn:falseFn,formatNum:formatNum,trim:trim,splitWords:splitWords,setOptions:setOptions,getParamString:getParamString,template:template,isArray:o,indexOf:indexOf,emptyImageUrl:s,requestFn:c,cancelFn:d,requestAnimFrame:requestAnimFrame,cancelAnimFrame:cancelAnimFrame});Class.extend=function(t){var e=function(){this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},n=e.__super__=this.prototype,a=i(n);a.constructor=e,e.prototype=a;for(var r in this)this.hasOwnProperty(r)&&"prototype"!==r&&"__super__"!==r&&(e[r]=this[r]);return t.statics&&(extend(e,t.statics),delete t.statics),t.includes&&(checkDeprecatedMixinEvents(t.includes),extend.apply(null,[a].concat(t.includes)),delete t.includes),a.options&&(t.options=extend(i(a.options),t.options)),extend(a,t),a._initHooks=[],a.callInitHooks=function(){if(!this._initHooksCalled){n.callInitHooks&&n.callInitHooks.call(this),this._initHooksCalled=!0;for(var t=0,e=a._initHooks.length;t<e;t++)a._initHooks[t].call(this)}},e},Class.include=function(t){return extend(this.prototype,t),this},Class.mergeOptions=function(t){return extend(this.prototype.options,t),this},Class.addInitHook=function(t){var e=Array.prototype.slice.call(arguments,1),i="function"==typeof t?t:function(){this[t].apply(this,e)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(i),this};var p={on:function(t,e,i){if("object"==typeof t)for(var n in t)this._on(n,t[n],e);else{t=splitWords(t);for(var a=0,r=t.length;a<r;a++)this._on(t[a],e,i)}return this},off:function(t,e,i){if(t)if("object"==typeof t)for(var n in t)this._off(n,t[n],e);else{t=splitWords(t);for(var a=0,r=t.length;a<r;a++)this._off(t[a],e,i)}else delete this._events;return this},_on:function(t,e,i){this._events=this._events||{};var n=this._events[t];n||(n=[],this._events[t]=n),i===this&&(i=void 0);for(var a={fn:e,ctx:i},r=n,o=0,s=r.length;o<s;o++)if(r[o].fn===e&&r[o].ctx===i)return;r.push(a)},_off:function(t,e,i){var n,a,r;if(this._events&&(n=this._events[t])){if(!e){for(a=0,r=n.length;a<r;a++)n[a].fn=falseFn;return void delete this._events[t]}if(i===this&&(i=void 0),n)for(a=0,r=n.length;a<r;a++){var o=n[a];if(o.ctx===i&&o.fn===e)return o.fn=falseFn,this._firingCount&&(this._events[t]=n=n.slice()),void n.splice(a,1)}}},fire:function(t,e,i){if(!this.listens(t,i))return this;var n=extend({},e,{type:t,target:this,sourceTarget:e&&e.sourceTarget||this});if(this._events){var a=this._events[t];if(a){this._firingCount=this._firingCount+1||1;for(var r=0,o=a.length;r<o;r++){var s=a[r];s.fn.call(s.ctx||this,n)}this._firingCount--}}return i&&this._propagateEvent(n),this},listens:function(t,e){var i=this._events&&this._events[t];if(i&&i.length)return!0;if(e)for(var n in this._eventParents)if(this._eventParents[n].listens(t,e))return!0;return!1},once:function(t,e,i){if("object"==typeof t){for(var n in t)this.once(n,t[n],e);return this}var a=bind(function(){this.off(t,e,i).off(t,a,i)},this);return this.on(t,e,i).on(t,a,i)},addEventParent:function(t){return this._eventParents=this._eventParents||{},this._eventParents[stamp(t)]=t,this},removeEventParent:function(t){return this._eventParents&&delete this._eventParents[stamp(t)],this},_propagateEvent:function(t){for(var e in this._eventParents)this._eventParents[e].fire(t.type,extend({layer:t.target,propagatedFrom:t.target},t),!0)}};p.addEventListener=p.on,p.removeEventListener=p.clearAllEventListeners=p.off,p.addOneTimeEventListener=p.once,p.fireEvent=p.fire,p.hasEventListeners=p.listens;var f=Class.extend(p),g=Math.trunc||function(t){return t>0?Math.floor(t):Math.ceil(t)};Point.prototype={clone:function(){return new Point(this.x,this.y)},add:function(t){return this.clone()._add(toPoint(t))},_add:function(t){return this.x+=t.x,this.y+=t.y,this},subtract:function(t){return this.clone()._subtract(toPoint(t))},_subtract:function(t){return this.x-=t.x,this.y-=t.y,this},divideBy:function(t){return this.clone()._divideBy(t)},_divideBy:function(t){return this.x/=t,this.y/=t,this},multiplyBy:function(t){return this.clone()._multiplyBy(t)},_multiplyBy:function(t){return this.x*=t,this.y*=t,this},scaleBy:function(t){return new Point(this.x*t.x,this.y*t.y)},unscaleBy:function(t){return new Point(this.x/t.x,this.y/t.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=g(this.x),this.y=g(this.y),this},distanceTo:function(t){t=toPoint(t);var e=t.x-this.x,i=t.y-this.y;return Math.sqrt(e*e+i*i)},equals:function(t){return t=toPoint(t),t.x===this.x&&t.y===this.y},contains:function(t){return t=toPoint(t),Math.abs(t.x)<=Math.abs(this.x)&&Math.abs(t.y)<=Math.abs(this.y)},toString:function(){return"Point("+formatNum(this.x)+", "+formatNum(this.y)+")"}},Bounds.prototype={extend:function(t){return t=toPoint(t),this.min||this.max?(this.min.x=Math.min(t.x,this.min.x),this.max.x=Math.max(t.x,this.max.x),this.min.y=Math.min(t.y,this.min.y),this.max.y=Math.max(t.y,this.max.y)):(this.min=t.clone(),this.max=t.clone()),this},getCenter:function(t){return new Point((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,t)},getBottomLeft:function(){return new Point(this.min.x,this.max.y)},getTopRight:function(){return new Point(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(t){var e,i;return t="number"==typeof t[0]||t instanceof Point?toPoint(t):toBounds(t),t instanceof Bounds?(e=t.min,i=t.max):e=i=t,e.x>=this.min.x&&i.x<=this.max.x&&e.y>=this.min.y&&i.y<=this.max.y},intersects:function(t){t=toBounds(t);var e=this.min,i=this.max,n=t.min,a=t.max,r=a.x>=e.x&&n.x<=i.x,o=a.y>=e.y&&n.y<=i.y;return r&&o},overlaps:function(t){t=toBounds(t);var e=this.min,i=this.max,n=t.min,a=t.max,r=a.x>e.x&&n.x<i.x,o=a.y>e.y&&n.y<i.y;return r&&o},isValid:function(){return!(!this.min||!this.max)}},LatLngBounds.prototype={extend:function(t){var e,i,n=this._southWest,a=this._northEast;if(t instanceof LatLng)e=t,i=t;else{if(!(t instanceof LatLngBounds))return t?this.extend(toLatLng(t)||toLatLngBounds(t)):this;if(e=t._southWest,i=t._northEast,!e||!i)return this}return n||a?(n.lat=Math.min(e.lat,n.lat),n.lng=Math.min(e.lng,n.lng),a.lat=Math.max(i.lat,a.lat),a.lng=Math.max(i.lng,a.lng)):(this._southWest=new LatLng(e.lat,e.lng),this._northEast=new LatLng(i.lat,i.lng)),this},pad:function(t){var e=this._southWest,i=this._northEast,n=Math.abs(e.lat-i.lat)*t,a=Math.abs(e.lng-i.lng)*t;return new LatLngBounds(new LatLng(e.lat-n,e.lng-a),new LatLng(i.lat+n,i.lng+a))},getCenter:function(){return new LatLng((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new LatLng(this.getNorth(),this.getWest())},getSouthEast:function(){return new LatLng(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(t){t="number"==typeof t[0]||t instanceof LatLng||"lat"in t?toLatLng(t):toLatLngBounds(t);var e,i,n=this._southWest,a=this._northEast;return t instanceof LatLngBounds?(e=t.getSouthWest(),i=t.getNorthEast()):e=i=t,e.lat>=n.lat&&i.lat<=a.lat&&e.lng>=n.lng&&i.lng<=a.lng},intersects:function(t){t=toLatLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),a=t.getNorthEast(),r=a.lat>=e.lat&&n.lat<=i.lat,o=a.lng>=e.lng&&n.lng<=i.lng;return r&&o},overlaps:function(t){t=toLatLngBounds(t);var e=this._southWest,i=this._northEast,n=t.getSouthWest(),a=t.getNorthEast(),r=a.lat>e.lat&&n.lat<i.lat,o=a.lng>e.lng&&n.lng<i.lng;return r&&o},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(t,e){return!!t&&(t=toLatLngBounds(t),this._southWest.equals(t.getSouthWest(),e)&&this._northEast.equals(t.getNorthEast(),e))},isValid:function(){return!(!this._southWest||!this._northEast)}},LatLng.prototype={equals:function(t,e){return!!t&&(t=toLatLng(t),Math.max(Math.abs(this.lat-t.lat),Math.abs(this.lng-t.lng))<=(void 0===e?1e-9:e))},toString:function(t){return"LatLng("+formatNum(this.lat,t)+", "+formatNum(this.lng,t)+")"},distanceTo:function(t){return m.distance(this,toLatLng(t))},wrap:function(){return m.wrapLatLng(this)},toBounds:function(t){var e=180*t/40075017,i=e/Math.cos(Math.PI/180*this.lat);return toLatLngBounds([this.lat-e,this.lng-i],[this.lat+e,this.lng+i])},clone:function(){return new LatLng(this.lat,this.lng,this.alt)}};var _={latLngToPoint:function(t,e){var i=this.projection.project(t),n=this.scale(e);return this.transformation._transform(i,n)},pointToLatLng:function(t,e){var i=this.scale(e),n=this.transformation.untransform(t,i);return this.projection.unproject(n)},project:function(t){return this.projection.project(t)},unproject:function(t){return this.projection.unproject(t)},scale:function(t){return 256*Math.pow(2,t)},zoom:function(t){return Math.log(t/256)/Math.LN2},getProjectedBounds:function(t){if(this.infinite)return null;var e=this.projection.bounds,i=this.scale(t);return new Bounds(this.transformation.transform(e.min,i),this.transformation.transform(e.max,i))},infinite:!1,wrapLatLng:function(t){var e=this.wrapLng?wrapNum(t.lng,this.wrapLng,!0):t.lng;return new LatLng(this.wrapLat?wrapNum(t.lat,this.wrapLat,!0):t.lat,e,t.alt)},wrapLatLngBounds:function(t){var e=t.getCenter(),i=this.wrapLatLng(e),n=e.lat-i.lat,a=e.lng-i.lng;if(0===n&&0===a)return t;var r=t.getSouthWest(),o=t.getNorthEast();return new LatLngBounds(new LatLng(r.lat-n,r.lng-a),new LatLng(o.lat-n,o.lng-a))}},m=extend({},_,{wrapLng:[-180,180],R:6371e3,distance:function(t,e){var i=Math.PI/180,n=t.lat*i,a=e.lat*i,r=Math.sin((e.lat-t.lat)*i/2),o=Math.sin((e.lng-t.lng)*i/2),s=r*r+Math.cos(n)*Math.cos(a)*o*o,l=2*Math.atan2(Math.sqrt(s),Math.sqrt(1-s));return this.R*l}}),y={R:6378137,MAX_LATITUDE:85.0511287798,project:function(t){var e=Math.PI/180,i=this.MAX_LATITUDE,n=Math.max(Math.min(i,t.lat),-i),a=Math.sin(n*e);return new Point(this.R*t.lng*e,this.R*Math.log((1+a)/(1-a))/2)},unproject:function(t){var e=180/Math.PI;return new LatLng((2*Math.atan(Math.exp(t.y/this.R))-Math.PI/2)*e,t.x*e/this.R)},bounds:function(){var t=6378137*Math.PI;return new Bounds([-t,-t],[t,t])}()};Transformation.prototype={transform:function(t,e){return this._transform(t.clone(),e)},_transform:function(t,e){return e=e||1,t.x=e*(this._a*t.x+this._b),t.y=e*(this._c*t.y+this._d),t},untransform:function(t,e){return e=e||1,new Point((t.x/e-this._b)/this._a,(t.y/e-this._d)/this._c)}};var v,x,b,T,k=extend({},m,{code:"EPSG:3857",projection:y,transformation:function(){var t=.5/(Math.PI*y.R);return toTransformation(t,.5,-t,.5)}()}),C=extend({},k,{code:"EPSG:900913"}),A=document.documentElement.style,P="ActiveXObject"in window,M=P&&!document.addEventListener,S="msLaunchUri"in navigator&&!("documentMode"in document),E=userAgentContains("webkit"),B=userAgentContains("android"),D=userAgentContains("android 2")||userAgentContains("android 3"),I=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),z=B&&userAgentContains("Google")&&I<537&&!("AudioNode"in window),R=!!window.opera,O=userAgentContains("chrome"),F=userAgentContains("gecko")&&!E&&!R&&!P,N=!O&&userAgentContains("safari"),Z=userAgentContains("phantom"),X="OTransition"in A,q=0===navigator.platform.indexOf("Win"),j=P&&"transition"in A,W="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!D,Y="MozPerspective"in A,G=!window.L_DISABLE_3D&&(j||W||Y)&&!X&&!Z,V="undefined"!=typeof orientation||userAgentContains("mobile"),H=V&&E,U=V&&W,K=!window.PointerEvent&&window.MSPointerEvent,$=!(!window.PointerEvent&&!K),J=!window.L_NO_TOUCH&&($||"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),Q=V&&R,tt=V&&F,et=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,it=function(){return!!document.createElement("canvas").getContext}(),nt=!(!document.createElementNS||!svgCreate("svg").createSVGRect),at=!nt&&function(){try{var t=document.createElement("div");t.innerHTML='<v:shape adj="1"/>';var e=t.firstChild;return e.style.behavior="url(#default#VML)",e&&"object"==typeof e.adj}catch(t){return!1}}(),rt=(Object.freeze||Object)({ie:P,ielt9:M,edge:S,webkit:E,android:B,android23:D,androidStock:z,opera:R,chrome:O,gecko:F,safari:N,phantom:Z,opera12:X,win:q,ie3d:j,webkit3d:W,gecko3d:Y,any3d:G,mobile:V,mobileWebkit:H,mobileWebkit3d:U,msPointer:K,pointer:$,touch:J,mobileOpera:Q,mobileGecko:tt,retina:et,canvas:it,svg:nt,vml:at}),ot=K?"MSPointerDown":"pointerdown",st=K?"MSPointerMove":"pointermove",lt=K?"MSPointerUp":"pointerup",ut=K?"MSPointerCancel":"pointercancel",ct=["INPUT","SELECT","OPTION"],dt={},ht=!1,pt=0,ft=K?"MSPointerDown":$?"pointerdown":"touchstart",gt=K?"MSPointerUp":$?"pointerup":"touchend",_t="_leaflet_",mt="_leaflet_events",yt=q&&O?2*window.devicePixelRatio:F?window.devicePixelRatio:1,vt={},xt=(Object.freeze||Object)({on:on,off:off,stopPropagation:stopPropagation,disableScrollPropagation:disableScrollPropagation,disableClickPropagation:disableClickPropagation,preventDefault:preventDefault,stop:stop,getMousePosition:getMousePosition,getWheelDelta:getWheelDelta,fakeStop:fakeStop,skipped:skipped,isExternalTarget:isExternalTarget,addListener:on,removeListener:off}),bt=testProp(["transform","WebkitTransform","OTransform","MozTransform","msTransform"]),wt=testProp(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Lt="webkitTransition"===wt||"OTransition"===wt?wt+"End":"transitionend";if("onselectstart"in document)x=function(){on(window,"selectstart",preventDefault)},b=function(){off(window,"selectstart",preventDefault)};else{var Tt=testProp(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);x=function(){if(Tt){var t=document.documentElement.style;T=t[Tt],t[Tt]="none"}},b=function(){Tt&&(document.documentElement.style[Tt]=T,T=void 0)}}var kt,Ct,At=(Object.freeze||Object)({TRANSFORM:bt,TRANSITION:wt,TRANSITION_END:Lt,get:get,getStyle:getStyle,create:create$1,remove:remove,empty:empty,toFront:toFront,toBack:toBack,hasClass:hasClass,addClass:addClass,removeClass:removeClass,setClass:setClass,getClass:getClass,setOpacity:setOpacity,testProp:testProp,setTransform:setTransform,setPosition:setPosition,getPosition:getPosition,disableTextSelection:x,enableTextSelection:b,disableImageDrag:disableImageDrag,enableImageDrag:enableImageDrag,preventOutline:preventOutline,restoreOutline:restoreOutline}),Pt=f.extend({run:function(t,e,i,n){this.stop(),this._el=t,this._inProgress=!0,this._duration=i||.25,this._easeOutPower=1/Math.max(n||.5,.2),this._startPos=getPosition(t),this._offset=e.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=requestAnimFrame(this._animate,this),this._step()},_step:function(t){var e=+new Date-this._startTime,i=1e3*this._duration;e<i?this._runFrame(this._easeOut(e/i),t):(this._runFrame(1),this._complete())},_runFrame:function(t,e){var i=this._startPos.add(this._offset.multiplyBy(t));e&&i._round(),setPosition(this._el,i),this.fire("step")},_complete:function(){cancelAnimFrame(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(t){return 1-Math.pow(1-t,this._easeOutPower)}}),Mt=f.extend({options:{crs:k,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(t,e){e=setOptions(this,e),this._initContainer(t),this._initLayout(),this._onResize=bind(this._onResize,this),this._initEvents(),e.maxBounds&&this.setMaxBounds(e.maxBounds),void 0!==e.zoom&&(this._zoom=this._limitZoom(e.zoom)),e.center&&void 0!==e.zoom&&this.setView(toLatLng(e.center),e.zoom,{reset:!0}),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this.callInitHooks(),this._zoomAnimated=wt&&G&&!Q&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),on(this._proxy,Lt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(t,e,i){if(e=void 0===e?this._zoom:this._limitZoom(e),t=this._limitCenter(toLatLng(t),e,this.options.maxBounds),i=i||{},this._stop(),this._loaded&&!i.reset&&!0!==i){void 0!==i.animate&&(i.zoom=extend({animate:i.animate},i.zoom),i.pan=extend({animate:i.animate,duration:i.duration},i.pan));if(this._zoom!==e?this._tryAnimatedZoom&&this._tryAnimatedZoom(t,e,i.zoom):this._tryAnimatedPan(t,i.pan))return clearTimeout(this._sizeTimer),this}return this._resetView(t,e),this},setZoom:function(t,e){return this._loaded?this.setView(this.getCenter(),t,{zoom:e}):(this._zoom=t,this)},zoomIn:function(t,e){return t=t||(G?this.options.zoomDelta:1),this.setZoom(this._zoom+t,e)},zoomOut:function(t,e){return t=t||(G?this.options.zoomDelta:1),this.setZoom(this._zoom-t,e)},setZoomAround:function(t,e,i){var n=this.getZoomScale(e),a=this.getSize().divideBy(2),r=t instanceof Point?t:this.latLngToContainerPoint(t),o=r.subtract(a).multiplyBy(1-1/n),s=this.containerPointToLatLng(a.add(o));return this.setView(s,e,{zoom:i})},_getBoundsCenterZoom:function(t,e){e=e||{},t=t.getBounds?t.getBounds():toLatLngBounds(t);var i=toPoint(e.paddingTopLeft||e.padding||[0,0]),n=toPoint(e.paddingBottomRight||e.padding||[0,0]),a=this.getBoundsZoom(t,!1,i.add(n));if((a="number"==typeof e.maxZoom?Math.min(e.maxZoom,a):a)===1/0)return{center:t.getCenter(),zoom:a};var r=n.subtract(i).divideBy(2),o=this.project(t.getSouthWest(),a),s=this.project(t.getNorthEast(),a);return{center:this.unproject(o.add(s).divideBy(2).add(r),a),zoom:a}},fitBounds:function(t,e){if(t=toLatLngBounds(t),!t.isValid())throw new Error("Bounds are not valid.");var i=this._getBoundsCenterZoom(t,e);return this.setView(i.center,i.zoom,e)},fitWorld:function(t){return this.fitBounds([[-90,-180],[90,180]],t)},panTo:function(t,e){return this.setView(t,this._zoom,{pan:e})},panBy:function(t,e){if(t=toPoint(t).round(),e=e||{},!t.x&&!t.y)return this.fire("moveend");if(!0!==e.animate&&!this.getSize().contains(t))return this._resetView(this.unproject(this.project(this.getCenter()).add(t)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Pt,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),e.noMoveStart||this.fire("movestart"),!1!==e.animate){addClass(this._mapPane,"leaflet-pan-anim");var i=this._getMapPanePos().subtract(t).round();this._panAnim.run(this._mapPane,i,e.duration||.25,e.easeLinearity)}else this._rawPanBy(t),this.fire("move").fire("moveend");return this},flyTo:function(t,e,i){function r(t){var e=t?-1:1,i=t?c:l,n=c*c-l*l+e*p*p*d*d,a=2*i*p*d,r=n/a,o=Math.sqrt(r*r+1)-r;return o<1e-9?-18:Math.log(o)}function sinh(t){return(Math.exp(t)-Math.exp(-t))/2}function cosh(t){return(Math.exp(t)+Math.exp(-t))/2}function tanh(t){return sinh(t)/cosh(t)}function w(t){return l*(cosh(f)/cosh(f+h*t))}function u(t){return l*(cosh(f)*tanh(f+h*t)-sinh(f))/p}function easeOut(t){return 1-Math.pow(1-t,1.5)}function frame(){var i=(Date.now()-g)/m,r=easeOut(i)*_;i<=1?(this._flyToFrame=requestAnimFrame(frame,this),this._move(this.unproject(n.add(a.subtract(n).multiplyBy(u(r)/d)),s),this.getScaleZoom(l/w(r),s),{flyTo:!0})):this._move(t,e)._moveEnd(!0)}if(i=i||{},!1===i.animate||!G)return this.setView(t,e,i);this._stop();var n=this.project(this.getCenter()),a=this.project(t),o=this.getSize(),s=this._zoom;t=toLatLng(t),e=void 0===e?s:e;var l=Math.max(o.x,o.y),c=l*this.getZoomScale(s,e),d=a.distanceTo(n)||1,h=1.42,p=h*h,f=r(0),g=Date.now(),_=(r(1)-f)/h,m=i.duration?1e3*i.duration:1e3*_*.8;return this._moveStart(!0,i.noMoveStart),frame.call(this),this},flyToBounds:function(t,e){var i=this._getBoundsCenterZoom(t,e);return this.flyTo(i.center,i.zoom,e)},setMaxBounds:function(t){return t=toLatLngBounds(t),t.isValid()?(this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this.options.maxBounds=t,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this.off("moveend",this._panInsideMaxBounds))},setMinZoom:function(t){var e=this.options.minZoom;return this.options.minZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(t):this},setMaxZoom:function(t){var e=this.options.maxZoom;return this.options.maxZoom=t,this._loaded&&e!==t&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(t):this},panInsideBounds:function(t,e){this._enforcingBounds=!0;var i=this.getCenter(),n=this._limitCenter(i,this._zoom,toLatLngBounds(t));return i.equals(n)||this.panTo(n,e),this._enforcingBounds=!1,this},invalidateSize:function(t){if(!this._loaded)return this;t=extend({animate:!1,pan:!0},!0===t?{animate:!0}:t);var e=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var i=this.getSize(),n=e.divideBy(2).round(),a=i.divideBy(2).round(),r=n.subtract(a);return r.x||r.y?(t.animate&&t.pan?this.panBy(r):(t.pan&&this._rawPanBy(r),this.fire("move"),t.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(bind(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:e,newSize:i})):this},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(t){if(t=this._locateOptions=extend({timeout:1e4,watch:!1},t),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var e=bind(this._handleGeolocationResponse,this),i=bind(this._handleGeolocationError,this);return t.watch?this._locationWatchId=navigator.geolocation.watchPosition(e,i,t):navigator.geolocation.getCurrentPosition(e,i,t),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(t){var e=t.code,i=t.message||(1===e?"permission denied":2===e?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:e,message:"Geolocation error: "+i+"."})},_handleGeolocationResponse:function(t){var e=t.coords.latitude,i=t.coords.longitude,n=new LatLng(e,i),a=n.toBounds(t.coords.accuracy),r=this._locateOptions;if(r.setView){var o=this.getBoundsZoom(a);this.setView(n,r.maxZoom?Math.min(o,r.maxZoom):o)}var s={latlng:n,bounds:a,timestamp:t.timestamp};for(var l in t.coords)"number"==typeof t.coords[l]&&(s[l]=t.coords[l]);this.fire("locationfound",s)},addHandler:function(t,e){if(!e)return this;var i=this[t]=new e(this);return this._handlers.push(i),this.options[t]&&i.enable(),this},remove:function(){if(this._initEvents(!0),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch(t){this._container._leaflet_id=void 0,this._containerId=void 0}void 0!==this._locationWatchId&&this.stopLocate(),this._stop(),remove(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._clearHandlers(),this._loaded&&this.fire("unload");var t;for(t in this._layers)this._layers[t].remove();for(t in this._panes)remove(this._panes[t]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(t,e){var i="leaflet-pane"+(t?" leaflet-"+t.replace("Pane","")+"-pane":""),n=create$1("div",i,e||this._mapPane);return t&&(this._panes[t]=n),n},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter:this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var t=this.getPixelBounds();return new LatLngBounds(this.unproject(t.getBottomLeft()),this.unproject(t.getTopRight()))},getMinZoom:function(){return void 0===this.options.minZoom?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return void 0===this.options.maxZoom?void 0===this._layersMaxZoom?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(t,e,i){t=toLatLngBounds(t),i=toPoint(i||[0,0]);var n=this.getZoom()||0,a=this.getMinZoom(),r=this.getMaxZoom(),o=t.getNorthWest(),s=t.getSouthEast(),l=this.getSize().subtract(i),u=toBounds(this.project(s,n),this.project(o,n)).getSize(),c=G?this.options.zoomSnap:1,d=l.x/u.x,h=l.y/u.y,p=e?Math.max(d,h):Math.min(d,h);return n=this.getScaleZoom(p,n),c&&(n=Math.round(n/(c/100))*(c/100),n=e?Math.ceil(n/c)*c:Math.floor(n/c)*c),Math.max(a,Math.min(r,n))},getSize:function(){return this._size&&!this._sizeChanged||(this._size=new Point(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(t,e){var i=this._getTopLeftPoint(t,e);return new Bounds(i,i.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(t){return this.options.crs.getProjectedBounds(void 0===t?this.getZoom():t)},getPane:function(t){return"string"==typeof t?this._panes[t]:t},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(t,e){var i=this.options.crs;return e=void 0===e?this._zoom:e,i.scale(t)/i.scale(e)},getScaleZoom:function(t,e){var i=this.options.crs;e=void 0===e?this._zoom:e;var n=i.zoom(t*i.scale(e));return isNaN(n)?1/0:n},project:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.latLngToPoint(toLatLng(t),e)},unproject:function(t,e){return e=void 0===e?this._zoom:e,this.options.crs.pointToLatLng(toPoint(t),e)},layerPointToLatLng:function(t){var e=toPoint(t).add(this.getPixelOrigin());return this.unproject(e)},latLngToLayerPoint:function(t){return this.project(toLatLng(t))._round()._subtract(this.getPixelOrigin())},wrapLatLng:function(t){return this.options.crs.wrapLatLng(toLatLng(t))},wrapLatLngBounds:function(t){return this.options.crs.wrapLatLngBounds(toLatLngBounds(t))},distance:function(t,e){return this.options.crs.distance(toLatLng(t),toLatLng(e))},containerPointToLayerPoint:function(t){return toPoint(t).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(t){return toPoint(t).add(this._getMapPanePos())},containerPointToLatLng:function(t){var e=this.containerPointToLayerPoint(toPoint(t));return this.layerPointToLatLng(e)},latLngToContainerPoint:function(t){return this.layerPointToContainerPoint(this.latLngToLayerPoint(toLatLng(t)))},mouseEventToContainerPoint:function(t){return getMousePosition(t,this._container)},mouseEventToLayerPoint:function(t){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(t))},mouseEventToLatLng:function(t){return this.layerPointToLatLng(this.mouseEventToLayerPoint(t))},_initContainer:function(t){var e=this._container=get(t);if(!e)throw new Error("Map container not found.");if(e._leaflet_id)throw new Error("Map container is already initialized.");on(e,"scroll",this._onScroll,this),this._containerId=stamp(e)},_initLayout:function(){var t=this._container;this._fadeAnimated=this.options.fadeAnimation&&G,addClass(t,"leaflet-container"+(J?" leaflet-touch":"")+(et?" leaflet-retina":"")+(M?" leaflet-oldie":"")+(N?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var e=getStyle(t,"position");"absolute"!==e&&"relative"!==e&&"fixed"!==e&&(t.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var t=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),setPosition(this._mapPane,new Point(0,0)),this.createPane("tilePane"),this.createPane("shadowPane"),this.createPane("overlayPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(addClass(t.markerPane,"leaflet-zoom-hide"),addClass(t.shadowPane,"leaflet-zoom-hide"))},_resetView:function(t,e){setPosition(this._mapPane,new Point(0,0));var i=!this._loaded;this._loaded=!0,e=this._limitZoom(e),this.fire("viewprereset");var n=this._zoom!==e;this._moveStart(n,!1)._move(t,e)._moveEnd(n),this.fire("viewreset"),i&&this.fire("load")},_moveStart:function(t,e){return t&&this.fire("zoomstart"),e||this.fire("movestart"),this},_move:function(t,e,i){void 0===e&&(e=this._zoom);var n=this._zoom!==e;return this._zoom=e,this._lastCenter=t,this._pixelOrigin=this._getNewPixelOrigin(t),(n||i&&i.pinch)&&this.fire("zoom",i),this.fire("move",i)},_moveEnd:function(t){return t&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return cancelAnimFrame(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(t){setPosition(this._mapPane,this._getMapPanePos().subtract(t))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(t){this._targets={},this._targets[stamp(this._container)]=this;var e=t?off:on;e(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress",this._handleDOMEvent,this),this.options.trackResize&&e(window,"resize",this._onResize,this),G&&this.options.transform3DLimit&&(t?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){cancelAnimFrame(this._resizeRequest),this._resizeRequest=requestAnimFrame(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var t=this._getMapPanePos();Math.max(Math.abs(t.x),Math.abs(t.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(t,e){for(var i,n=[],a="mouseout"===e||"mouseover"===e,r=t.target||t.srcElement,o=!1;r;){if((i=this._targets[stamp(r)])&&("click"===e||"preclick"===e)&&!t._simulated&&this._draggableMoved(i)){o=!0;break}if(i&&i.listens(e,!0)){if(a&&!isExternalTarget(r,t))break;if(n.push(i),a)break}if(r===this._container)break;r=r.parentNode}return n.length||o||a||!isExternalTarget(r,t)||(n=[this]),n},_handleDOMEvent:function(t){if(this._loaded&&!skipped(t)){var e=t.type;"mousedown"!==e&&"keypress"!==e||preventOutline(t.target||t.srcElement),this._fireDOMEvent(t,e)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(t,e,i){if("click"===t.type){var n=extend({},t);n.type="preclick",this._fireDOMEvent(n,n.type,i)}if(!t._stopped&&(i=(i||[]).concat(this._findEventTargets(t,e)),i.length)){var a=i[0];"contextmenu"===e&&a.listens(e,!0)&&preventDefault(t);var r={originalEvent:t};if("keypress"!==t.type){var o=a.getLatLng&&(!a._radius||a._radius<=10);r.containerPoint=o?this.latLngToContainerPoint(a.getLatLng()):this.mouseEventToContainerPoint(t),r.layerPoint=this.containerPointToLayerPoint(r.containerPoint),r.latlng=o?a.getLatLng():this.layerPointToLatLng(r.layerPoint)}for(var s=0;s<i.length;s++)if(i[s].fire(e,r,!0),r.originalEvent._stopped||!1===i[s].options.bubblingMouseEvents&&-1!==indexOf(this._mouseEvents,e))return}},_draggableMoved:function(t){return t=t.dragging&&t.dragging.enabled()?t:this,t.dragging&&t.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var t=0,e=this._handlers.length;t<e;t++)this._handlers[t].disable()},whenReady:function(t,e){return this._loaded?t.call(e||this,{target:this}):this.on("load",t,e),this},_getMapPanePos:function(){return getPosition(this._mapPane)||new Point(0,0)},_moved:function(){var t=this._getMapPanePos();return t&&!t.equals([0,0])},_getTopLeftPoint:function(t,e){return(t&&void 0!==e?this._getNewPixelOrigin(t,e):this.getPixelOrigin()).subtract(this._getMapPanePos())},_getNewPixelOrigin:function(t,e){var i=this.getSize()._divideBy(2);return this.project(t,e)._subtract(i)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return this.project(t,e)._subtract(n)},_latLngBoundsToNewLayerBounds:function(t,e,i){var n=this._getNewPixelOrigin(i,e);return toBounds([this.project(t.getSouthWest(),e)._subtract(n),this.project(t.getNorthWest(),e)._subtract(n),this.project(t.getSouthEast(),e)._subtract(n),this.project(t.getNorthEast(),e)._subtract(n)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(t){return this.latLngToLayerPoint(t).subtract(this._getCenterLayerPoint())},_limitCenter:function(t,e,i){if(!i)return t;var n=this.project(t,e),a=this.getSize().divideBy(2),r=new Bounds(n.subtract(a),n.add(a)),o=this._getBoundsOffset(r,i,e);return o.round().equals([0,0])?t:this.unproject(n.add(o),e)},_limitOffset:function(t,e){if(!e)return t;var i=this.getPixelBounds(),n=new Bounds(i.min.add(t),i.max.add(t));return t.add(this._getBoundsOffset(n,e))},_getBoundsOffset:function(t,e,i){var n=toBounds(this.project(e.getNorthEast(),i),this.project(e.getSouthWest(),i)),a=n.min.subtract(t.min),r=n.max.subtract(t.max);return new Point(this._rebound(a.x,-r.x),this._rebound(a.y,-r.y))},_rebound:function(t,e){return t+e>0?Math.round(t-e)/2:Math.max(0,Math.ceil(t))-Math.max(0,Math.floor(e))},_limitZoom:function(t){var e=this.getMinZoom(),i=this.getMaxZoom(),n=G?this.options.zoomSnap:1;return n&&(t=Math.round(t/n)*n),Math.max(e,Math.min(i,t))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){removeClass(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(t,e){var i=this._getCenterOffset(t)._trunc();return!(!0!==(e&&e.animate)&&!this.getSize().contains(i))&&(this.panBy(i,e),!0)},_createAnimProxy:function(){var t=this._proxy=create$1("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(t),this.on("zoomanim",function(t){var e=bt,i=this._proxy.style[e];setTransform(this._proxy,this.project(t.center,t.zoom),this.getZoomScale(t.zoom,1)),i===this._proxy.style[e]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",function(){var t=this.getCenter(),e=this.getZoom();setTransform(this._proxy,this.project(t,e),this.getZoomScale(e,1))},this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){remove(this._proxy),delete this._proxy},_catchTransitionEnd:function(t){this._animatingZoom&&t.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(t,e,i){if(this._animatingZoom)return!0;if(i=i||{},!this._zoomAnimated||!1===i.animate||this._nothingToAnimate()||Math.abs(e-this._zoom)>this.options.zoomAnimationThreshold)return!1;var n=this.getZoomScale(e),a=this._getCenterOffset(t)._divideBy(1-1/n);return!(!0!==i.animate&&!this.getSize().contains(a))&&(requestAnimFrame(function(){this._moveStart(!0,!1)._animateZoom(t,e,!0)},this),!0)},_animateZoom:function(t,e,i,n){this._mapPane&&(i&&(this._animatingZoom=!0,this._animateToCenter=t,this._animateToZoom=e,addClass(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:t,zoom:e,noUpdate:n}),setTimeout(bind(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&removeClass(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom),requestAnimFrame(function(){this._moveEnd(!0)},this))}}),St=Class.extend({options:{position:"topright"},initialize:function(t){setOptions(this,t)},getPosition:function(){return this.options.position},setPosition:function(t){var e=this._map;return e&&e.removeControl(this),this.options.position=t,e&&e.addControl(this),this},getContainer:function(){return this._container},addTo:function(t){this.remove(),this._map=t;var e=this._container=this.onAdd(t),i=this.getPosition(),n=t._controlCorners[i];return addClass(e,"leaflet-control"),-1!==i.indexOf("bottom")?n.insertBefore(e,n.firstChild):n.appendChild(e),this},remove:function(){return this._map?(remove(this._container),this.onRemove&&this.onRemove(this._map),this._map=null,this):this},_refocusOnMap:function(t){this._map&&t&&t.screenX>0&&t.screenY>0&&this._map.getContainer().focus()}}),Et=function(t){return new St(t)};Mt.include({addControl:function(t){return t.addTo(this),this},removeControl:function(t){return t.remove(),this},_initControlPos:function(){function createCorner(n,a){var r=e+n+" "+e+a;t[n+a]=create$1("div",r,i)}var t=this._controlCorners={},e="leaflet-",i=this._controlContainer=create$1("div",e+"control-container",this._container);createCorner("top","left"),createCorner("top","right"),createCorner("bottom","left"),createCorner("bottom","right")},_clearControlPos:function(){for(var t in this._controlCorners)remove(this._controlCorners[t]);remove(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Bt=St.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(t,e,i,n){return i<n?-1:n<i?1:0}},initialize:function(t,e,i){setOptions(this,i),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1;for(var n in t)this._addLayer(t[n],n);for(n in e)this._addLayer(e[n],n,!0)},onAdd:function(t){this._initLayout(),this._update(),this._map=t,t.on("zoomend",this._checkDisabledLayers,this);for(var e=0;e<this._layers.length;e++)this._layers[e].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(t){return St.prototype.addTo.call(this,t),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var t=0;t<this._layers.length;t++)this._layers[t].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(t,e){return this._addLayer(t,e),this._map?this._update():this},addOverlay:function(t,e){return this._addLayer(t,e,!0),this._map?this._update():this},removeLayer:function(t){t.off("add remove",this._onLayerChange,this);var e=this._getLayer(stamp(t));return e&&this._layers.splice(this._layers.indexOf(e),1),this._map?this._update():this},expand:function(){addClass(this._container,"leaflet-control-layers-expanded"),this._form.style.height=null;var t=this._map.getSize().y-(this._container.offsetTop+50);return t<this._form.clientHeight?(addClass(this._form,"leaflet-control-layers-scrollbar"),this._form.style.height=t+"px"):removeClass(this._form,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return removeClass(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var t="leaflet-control-layers",e=this._container=create$1("div",t),i=this.options.collapsed;e.setAttribute("aria-haspopup",!0),disableClickPropagation(e),disableScrollPropagation(e);var n=this._form=create$1("form",t+"-list");i&&(this._map.on("click",this.collapse,this),B||on(e,{mouseenter:this.expand,mouseleave:this.collapse},this));var a=this._layersLink=create$1("a",t+"-toggle",e);a.href="#",a.title="Layers",J?(on(a,"click",stop),on(a,"click",this.expand,this)):on(a,"focus",this.expand,this),i||this.expand(),this._baseLayersList=create$1("div",t+"-base",n),this._separator=create$1("div",t+"-separator",n),this._overlaysList=create$1("div",t+"-overlays",n),e.appendChild(n)},_getLayer:function(t){for(var e=0;e<this._layers.length;e++)if(this._layers[e]&&stamp(this._layers[e].layer)===t)return this._layers[e]},_addLayer:function(t,e,i){this._map&&t.on("add remove",this._onLayerChange,this),this._layers.push({layer:t,name:e,overlay:i}),this.options.sortLayers&&this._layers.sort(bind(function(t,e){return this.options.sortFunction(t.layer,e.layer,t.name,e.name)},this)),this.options.autoZIndex&&t.setZIndex&&(this._lastZIndex++,t.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;empty(this._baseLayersList),empty(this._overlaysList),this._layerControlInputs=[];var t,e,i,n,a=0;for(i=0;i<this._layers.length;i++)n=this._layers[i],this._addItem(n),e=e||n.overlay,t=t||!n.overlay,a+=n.overlay?0:1;return this.options.hideSingleBase&&(t=t&&a>1,this._baseLayersList.style.display=t?"":"none"),this._separator.style.display=e&&t?"":"none",this},_onLayerChange:function(t){this._handlingClick||this._update();var e=this._getLayer(stamp(t.target)),i=e.overlay?"add"===t.type?"overlayadd":"overlayremove":"add"===t.type?"baselayerchange":null;i&&this._map.fire(i,e)},_createRadioElement:function(t,e){var i='<input type="radio" class="leaflet-control-layers-selector" name="'+t+'"'+(e?' checked="checked"':"")+"/>",n=document.createElement("div");return n.innerHTML=i,n.firstChild},_addItem:function(t){var e,i=document.createElement("label"),n=this._map.hasLayer(t.layer);t.overlay?(e=document.createElement("input"),e.type="checkbox",e.className="leaflet-control-layers-selector",e.defaultChecked=n):e=this._createRadioElement("leaflet-base-layers",n),this._layerControlInputs.push(e),e.layerId=stamp(t.layer),on(e,"click",this._onInputClick,this);var a=document.createElement("span");a.innerHTML=" "+t.name;var r=document.createElement("div");return i.appendChild(r),r.appendChild(e),r.appendChild(a),(t.overlay?this._overlaysList:this._baseLayersList).appendChild(i),this._checkDisabledLayers(),i},_onInputClick:function(){var t,e,i=this._layerControlInputs,n=[],a=[];this._handlingClick=!0;for(var r=i.length-1;r>=0;r--)t=i[r],e=this._getLayer(t.layerId).layer,t.checked?n.push(e):t.checked||a.push(e);for(r=0;r<a.length;r++)this._map.hasLayer(a[r])&&this._map.removeLayer(a[r]);for(r=0;r<n.length;r++)this._map.hasLayer(n[r])||this._map.addLayer(n[r]);this._handlingClick=!1,this._refocusOnMap()},_checkDisabledLayers:function(){for(var t,e,i=this._layerControlInputs,n=this._map.getZoom(),a=i.length-1;a>=0;a--)t=i[a],e=this._getLayer(t.layerId).layer,t.disabled=void 0!==e.options.minZoom&&n<e.options.minZoom||void 0!==e.options.maxZoom&&n>e.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expand:function(){return this.expand()},_collapse:function(){return this.collapse()}}),Dt=function(t,e,i){return new Bt(t,e,i)},It=St.extend({options:{position:"topleft",zoomInText:"+",zoomInTitle:"Zoom in",zoomOutText:"&#x2212;",zoomOutTitle:"Zoom out"},onAdd:function(t){var e="leaflet-control-zoom",i=create$1("div",e+" leaflet-bar"),n=this.options;return this._zoomInButton=this._createButton(n.zoomInText,n.zoomInTitle,e+"-in",i,this._zoomIn),this._zoomOutButton=this._createButton(n.zoomOutText,n.zoomOutTitle,e+"-out",i,this._zoomOut),this._updateDisabled(),t.on("zoomend zoomlevelschange",this._updateDisabled,this),i},onRemove:function(t){t.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(t){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(t.shiftKey?3:1))},_zoomOut:function(t){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(t.shiftKey?3:1))},_createButton:function(t,e,i,n,a){var r=create$1("a",i,n);return r.innerHTML=t,r.href="#",r.title=e,r.setAttribute("role","button"),r.setAttribute("aria-label",e),disableClickPropagation(r),on(r,"click",stop),on(r,"click",a,this),on(r,"click",this._refocusOnMap,this),r},_updateDisabled:function(){var t=this._map,e="leaflet-disabled";removeClass(this._zoomInButton,e),removeClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMinZoom())&&addClass(this._zoomOutButton,e),(this._disabled||t._zoom===t.getMaxZoom())&&addClass(this._zoomInButton,e)}});Mt.mergeOptions({zoomControl:!0}),Mt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new It,this.addControl(this.zoomControl))});var zt=function(t){return new It(t)},Rt=St.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(t){var e=create$1("div","leaflet-control-scale"),i=this.options;return this._addScales(i,"leaflet-control-scale-line",e),t.on(i.updateWhenIdle?"moveend":"move",this._update,this),t.whenReady(this._update,this),e},onRemove:function(t){t.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(t,e,i){t.metric&&(this._mScale=create$1("div",e,i)),t.imperial&&(this._iScale=create$1("div",e,i))},_update:function(){var t=this._map,e=t.getSize().y/2,i=t.distance(t.containerPointToLatLng([0,e]),t.containerPointToLatLng([this.options.maxWidth,e]));this._updateScales(i)},_updateScales:function(t){this.options.metric&&t&&this._updateMetric(t),this.options.imperial&&t&&this._updateImperial(t)},_updateMetric:function(t){var e=this._getRoundNum(t),i=e<1e3?e+" m":e/1e3+" km";this._updateScale(this._mScale,i,e/t)},_updateImperial:function(t){var e,i,n,a=3.2808399*t;a>5280?(e=a/5280,i=this._getRoundNum(e),this._updateScale(this._iScale,i+" mi",i/e)):(n=this._getRoundNum(a),this._updateScale(this._iScale,n+" ft",n/a))},_updateScale:function(t,e,i){t.style.width=Math.round(this.options.maxWidth*i)+"px",t.innerHTML=e},_getRoundNum:function(t){var e=Math.pow(10,(Math.floor(t)+"").length-1),i=t/e;return i=i>=10?10:i>=5?5:i>=3?3:i>=2?2:1,e*i}}),Ot=function(t){return new Rt(t)},Ft=St.extend({options:{position:"bottomright",prefix:'<a href="http://leafletjs.com" title="A JS library for interactive maps">Leaflet</a>'},initialize:function(t){setOptions(this,t),this._attributions={}},onAdd:function(t){t.attributionControl=this,this._container=create$1("div","leaflet-control-attribution"),disableClickPropagation(this._container);for(var e in t._layers)t._layers[e].getAttribution&&this.addAttribution(t._layers[e].getAttribution());return this._update(),this._container},setPrefix:function(t){return this.options.prefix=t,this._update(),this},addAttribution:function(t){return t?(this._attributions[t]||(this._attributions[t]=0),this._attributions[t]++,this._update(),this):this},removeAttribution:function(t){return t?(this._attributions[t]&&(this._attributions[t]--,this._update()),this):this},_update:function(){if(this._map){var t=[];for(var e in this._attributions)this._attributions[e]&&t.push(e);var i=[];this.options.prefix&&i.push(this.options.prefix),t.length&&i.push(t.join(", ")),this._container.innerHTML=i.join(" | ")}}});Mt.mergeOptions({attributionControl:!0}),Mt.addInitHook(function(){this.options.attributionControl&&(new Ft).addTo(this)});var Nt=function(t){return new Ft(t)};St.Layers=Bt,St.Zoom=It,St.Scale=Rt,St.Attribution=Ft,Et.layers=Dt,Et.zoom=zt,Et.scale=Ot,Et.attribution=Nt;var Zt=Class.extend({initialize:function(t){this._map=t},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Zt.addTo=function(t,e){return t.addHandler(e,this),this};var Xt,qt={Events:p},jt=J?"touchstart mousedown":"mousedown",Wt={mousedown:"mouseup",touchstart:"touchend",pointerdown:"touchend",MSPointerDown:"touchend"},Yt={mousedown:"mousemove",touchstart:"touchmove",pointerdown:"touchmove",MSPointerDown:"touchmove"},Gt=f.extend({options:{clickTolerance:3},initialize:function(t,e,i,n){setOptions(this,n),this._element=t,this._dragStartTarget=e||t,this._preventOutline=i},enable:function(){this._enabled||(on(this._dragStartTarget,jt,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Gt._dragging===this&&this.finishDrag(),off(this._dragStartTarget,jt,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(t){if(!t._simulated&&this._enabled&&(this._moved=!1,!hasClass(this._element,"leaflet-zoom-anim")&&!(Gt._dragging||t.shiftKey||1!==t.which&&1!==t.button&&!t.touches||(Gt._dragging=this,this._preventOutline&&preventOutline(this._element),disableImageDrag(),x(),this._moving)))){this.fire("down");var e=t.touches?t.touches[0]:t;this._startPoint=new Point(e.clientX,e.clientY),on(document,Yt[t.type],this._onMove,this),on(document,Wt[t.type],this._onUp,this)}},_onMove:function(t){if(!t._simulated&&this._enabled){if(t.touches&&t.touches.length>1)return void(this._moved=!0);var e=t.touches&&1===t.touches.length?t.touches[0]:t,i=new Point(e.clientX,e.clientY),n=i.subtract(this._startPoint);(n.x||n.y)&&(Math.abs(n.x)+Math.abs(n.y)<this.options.clickTolerance||(preventDefault(t),this._moved||(this.fire("dragstart"),this._moved=!0,this._startPos=getPosition(this._element).subtract(n),addClass(document.body,"leaflet-dragging"),this._lastTarget=t.target||t.srcElement,window.SVGElementInstance&&this._lastTarget instanceof SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),addClass(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(n),this._moving=!0,cancelAnimFrame(this._animRequest),this._lastEvent=t,this._animRequest=requestAnimFrame(this._updatePosition,this,!0)))}},_updatePosition:function(){var t={originalEvent:this._lastEvent};this.fire("predrag",t),setPosition(this._element,this._newPos),this.fire("drag",t)},_onUp:function(t){!t._simulated&&this._enabled&&this.finishDrag()},finishDrag:function(){removeClass(document.body,"leaflet-dragging"),this._lastTarget&&(removeClass(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null);for(var t in Yt)off(document,Yt[t],this._onMove,this),off(document,Wt[t],this._onUp,this);enableImageDrag(),b(),this._moved&&this._moving&&(cancelAnimFrame(this._animRequest),this.fire("dragend",{distance:this._newPos.distanceTo(this._startPos)})),this._moving=!1,Gt._dragging=!1}}),Vt=(Object.freeze||Object)({simplify:simplify,pointToSegmentDistance:pointToSegmentDistance,closestPointOnSegment:closestPointOnSegment,clipSegment:clipSegment,_getEdgeIntersection:_getEdgeIntersection,_getBitCode:_getBitCode,_sqClosestPointOnSegment:_sqClosestPointOnSegment,isFlat:isFlat,_flat:_flat}),Ht=(Object.freeze||Object)({clipPolygon:clipPolygon}),Ut={project:function(t){return new Point(t.lng,t.lat)},unproject:function(t){return new LatLng(t.y,t.x)},bounds:new Bounds([-180,-90],[180,90])},Kt={R:6378137,R_MINOR:6356752.314245179,bounds:new Bounds([-20037508.34279,-15496570.73972],[20037508.34279,18764656.23138]),project:function(t){var e=Math.PI/180,i=this.R,n=t.lat*e,a=this.R_MINOR/i,r=Math.sqrt(1-a*a),o=r*Math.sin(n),s=Math.tan(Math.PI/4-n/2)/Math.pow((1-o)/(1+o),r/2);return n=-i*Math.log(Math.max(s,1e-10)),new Point(t.lng*e*i,n)},unproject:function(t){for(var e,i=180/Math.PI,n=this.R,a=this.R_MINOR/n,r=Math.sqrt(1-a*a),o=Math.exp(-t.y/n),s=Math.PI/2-2*Math.atan(o),l=0,u=.1;l<15&&Math.abs(u)>1e-7;l++)e=r*Math.sin(s),e=Math.pow((1-e)/(1+e),r/2),u=Math.PI/2-2*Math.atan(o*e)-s,s+=u;return new LatLng(s*i,t.x*i/n)}},$t=(Object.freeze||Object)({LonLat:Ut,Mercator:Kt,SphericalMercator:y}),Jt=extend({},m,{code:"EPSG:3395",projection:Kt,transformation:function(){var t=.5/(Math.PI*Kt.R);return toTransformation(t,.5,-t,.5)}()}),Qt=extend({},m,{code:"EPSG:4326",projection:Ut,transformation:toTransformation(1/180,1,-1/180,.5)}),te=extend({},_,{projection:Ut,transformation:toTransformation(1,0,-1,0),scale:function(t){return Math.pow(2,t)},zoom:function(t){return Math.log(t)/Math.LN2},distance:function(t,e){var i=e.lng-t.lng,n=e.lat-t.lat;return Math.sqrt(i*i+n*n)},infinite:!0});_.Earth=m,_.EPSG3395=Jt,_.EPSG3857=k,_.EPSG900913=C,_.EPSG4326=Qt,_.Simple=te;var ee=f.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(t){return t.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(t){return t&&t.removeLayer(this),this},getPane:function(t){return this._map.getPane(t?this.options[t]||t:this.options.pane)},addInteractiveTarget:function(t){return this._map._targets[stamp(t)]=this,this},removeInteractiveTarget:function(t){return delete this._map._targets[stamp(t)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(t){var e=t.target;if(e.hasLayer(this)){if(this._map=e,this._zoomAnimated=e._zoomAnimated,this.getEvents){var i=this.getEvents();e.on(i,this),this.once("remove",function(){e.off(i,this)},this)}this.onAdd(e),this.getAttribution&&e.attributionControl&&e.attributionControl.addAttribution(this.getAttribution()),this.fire("add"),e.fire("layeradd",{layer:this})}}});Mt.include({addLayer:function(t){if(!t._layerAdd)throw new Error("The provided object is not a Layer.");var e=stamp(t);return this._layers[e]?this:(this._layers[e]=t,t._mapToAdd=this,t.beforeAdd&&t.beforeAdd(this),this.whenReady(t._layerAdd,t),this)},removeLayer:function(t){var e=stamp(t);return this._layers[e]?(this._loaded&&t.onRemove(this),t.getAttribution&&this.attributionControl&&this.attributionControl.removeAttribution(t.getAttribution()),delete this._layers[e],this._loaded&&(this.fire("layerremove",{layer:t}),t.fire("remove")),t._map=t._mapToAdd=null,this):this},hasLayer:function(t){return!!t&&stamp(t)in this._layers},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},_addLayers:function(t){t=t?o(t)?t:[t]:[];for(var e=0,i=t.length;e<i;e++)this.addLayer(t[e])},_addZoomLimit:function(t){!isNaN(t.options.maxZoom)&&isNaN(t.options.minZoom)||(this._zoomBoundLayers[stamp(t)]=t,this._updateZoomLevels())},_removeZoomLimit:function(t){var e=stamp(t);this._zoomBoundLayers[e]&&(delete this._zoomBoundLayers[e],this._updateZoomLevels())},_updateZoomLevels:function(){var t=1/0,e=-1/0,i=this._getZoomSpan();for(var n in this._zoomBoundLayers){var a=this._zoomBoundLayers[n].options;t=void 0===a.minZoom?t:Math.min(t,a.minZoom),e=void 0===a.maxZoom?e:Math.max(e,a.maxZoom)}this._layersMaxZoom=e===-1/0?void 0:e,this._layersMinZoom=t===1/0?void 0:t,i!==this._getZoomSpan()&&this.fire("zoomlevelschange"),void 0===this.options.maxZoom&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),void 0===this.options.minZoom&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var ie=ee.extend({initialize:function(t,e){setOptions(this,e),this._layers={};var i,n;if(t)for(i=0,n=t.length;i<n;i++)this.addLayer(t[i])},addLayer:function(t){var e=this.getLayerId(t);return this._layers[e]=t,this._map&&this._map.addLayer(t),this},removeLayer:function(t){var e=t in this._layers?t:this.getLayerId(t);return this._map&&this._layers[e]&&this._map.removeLayer(this._layers[e]),delete this._layers[e],this},hasLayer:function(t){return!!t&&(t in this._layers||this.getLayerId(t)in this._layers)},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(t){var e,i,n=Array.prototype.slice.call(arguments,1);for(e in this._layers)i=this._layers[e],i[t]&&i[t].apply(i,n);return this},onAdd:function(t){this.eachLayer(t.addLayer,t)},onRemove:function(t){this.eachLayer(t.removeLayer,t)},eachLayer:function(t,e){for(var i in this._layers)t.call(e,this._layers[i]);return this},getLayer:function(t){return this._layers[t]},getLayers:function(){var t=[];return this.eachLayer(t.push,t),t},setZIndex:function(t){return this.invoke("setZIndex",t)},getLayerId:function(t){return stamp(t)}}),ne=function(t,e){return new ie(t,e)},ae=ie.extend({addLayer:function(t){return this.hasLayer(t)?this:(t.addEventParent(this),ie.prototype.addLayer.call(this,t),this.fire("layeradd",{layer:t}))},removeLayer:function(t){return this.hasLayer(t)?(t in this._layers&&(t=this._layers[t]),t.removeEventParent(this),ie.prototype.removeLayer.call(this,t),this.fire("layerremove",{layer:t})):this},setStyle:function(t){return this.invoke("setStyle",t)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var t=new LatLngBounds;for(var e in this._layers){var i=this._layers[e];t.extend(i.getBounds?i.getBounds():i.getLatLng())}return t}}),re=function(t){return new ae(t)},oe=Class.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0]},initialize:function(t){setOptions(this,t)},createIcon:function(t){return this._createIcon("icon",t)},createShadow:function(t){return this._createIcon("shadow",t)},_createIcon:function(t,e){var i=this._getIconUrl(t);if(!i){if("icon"===t)throw new Error("iconUrl not set in Icon options (see the docs).");return null}var n=this._createImg(i,e&&"IMG"===e.tagName?e:null);return this._setIconStyles(n,t),n},_setIconStyles:function(t,e){var i=this.options,n=i[e+"Size"];"number"==typeof n&&(n=[n,n]);var a=toPoint(n),r=toPoint("shadow"===e&&i.shadowAnchor||i.iconAnchor||a&&a.divideBy(2,!0));t.className="leaflet-marker-"+e+" "+(i.className||""),r&&(t.style.marginLeft=-r.x+"px",t.style.marginTop=-r.y+"px"),a&&(t.style.width=a.x+"px",t.style.height=a.y+"px")},_createImg:function(t,e){return e=e||document.createElement("img"),e.src=t,e},_getIconUrl:function(t){return et&&this.options[t+"RetinaUrl"]||this.options[t+"Url"]}}),se=oe.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(t){return se.imagePath||(se.imagePath=this._detectIconPath()),(this.options.imagePath||se.imagePath)+oe.prototype._getIconUrl.call(this,t)},_detectIconPath:function(){var t=create$1("div","leaflet-default-icon-path",document.body),e=getStyle(t,"background-image")||getStyle(t,"backgroundImage");return document.body.removeChild(t),e=null===e||0!==e.indexOf("url")?"":e.replace(/^url\(["']?/,"").replace(/marker-icon\.png["']?\)$/,"")}}),le=Zt.extend({initialize:function(t){this._marker=t},addHooks:function(){var t=this._marker._icon;this._draggable||(this._draggable=new Gt(t,t,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),addClass(t,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&removeClass(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(t){var e=this._marker,i=e._map,n=this._marker.options.autoPanSpeed,a=this._marker.options.autoPanPadding,r=L.DomUtil.getPosition(e._icon),o=i.getPixelBounds(),s=i.getPixelOrigin(),l=toBounds(o.min._subtract(s).add(a),o.max._subtract(s).subtract(a));if(!l.contains(r)){var u=toPoint((Math.max(l.max.x,r.x)-l.max.x)/(o.max.x-l.max.x)-(Math.min(l.min.x,r.x)-l.min.x)/(o.min.x-l.min.x),(Math.max(l.max.y,r.y)-l.max.y)/(o.max.y-l.max.y)-(Math.min(l.min.y,r.y)-l.min.y)/(o.min.y-l.min.y)).multiplyBy(n);i.panBy(u,{animate:!1}),this._draggable._newPos._add(u),this._draggable._startPos._add(u),L.DomUtil.setPosition(e._icon,this._draggable._newPos),this._onDrag(t),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,t))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup().fire("movestart").fire("dragstart")},_onPreDrag:function(t){this._marker.options.autoPan&&(cancelAnimFrame(this._panRequest),this._panRequest=requestAnimFrame(this._adjustPan.bind(this,t)))},_onDrag:function(t){var e=this._marker,i=e._shadow,n=getPosition(e._icon),a=e._map.layerPointToLatLng(n);i&&setPosition(i,n),e._latlng=a,t.latlng=a,t.oldLatLng=this._oldLatLng,e.fire("move",t).fire("drag",t)},_onDragEnd:function(t){cancelAnimFrame(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",t)}}),ue=ee.extend({options:{icon:new se,interactive:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10,keyboard:!0,title:"",alt:"",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",bubblingMouseEvents:!1},initialize:function(t,e){setOptions(this,e),this._latlng=toLatLng(t)},onAdd:function(t){this._zoomAnimated=this._zoomAnimated&&t.options.markerZoomAnimation,this._zoomAnimated&&t.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(t){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&t.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(t){var e=this._latlng;return this._latlng=toLatLng(t),this.update(),this.fire("move",{oldLatLng:e,latlng:this._latlng})},setZIndexOffset:function(t){return this.options.zIndexOffset=t,this.update()},setIcon:function(t){return this.options.icon=t,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var t=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(t)}return this},_initIcon:function(){var t=this.options,e="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),i=t.icon.createIcon(this._icon),n=!1;i!==this._icon&&(this._icon&&this._removeIcon(),n=!0,t.title&&(i.title=t.title),"IMG"===i.tagName&&(i.alt=t.alt||"")),addClass(i,e),t.keyboard&&(i.tabIndex="0"),this._icon=i,t.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex});var a=t.icon.createShadow(this._shadow),r=!1;a!==this._shadow&&(this._removeShadow(),r=!0),a&&(addClass(a,e),a.alt=""),this._shadow=a,t.opacity<1&&this._updateOpacity(),n&&this.getPane().appendChild(this._icon),this._initInteraction(),a&&r&&this.getPane("shadowPane").appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),remove(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&remove(this._shadow),this._shadow=null},_setPos:function(t){setPosition(this._icon,t),this._shadow&&setPosition(this._shadow,t),this._zIndex=t.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(t){this._icon.style.zIndex=this._zIndex+t},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center).round();this._setPos(e)},_initInteraction:function(){if(this.options.interactive&&(addClass(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),le)){var t=this.options.draggable;this.dragging&&(t=this.dragging.enabled(),this.dragging.disable()),this.dragging=new le(this),t&&this.dragging.enable()}},setOpacity:function(t){return this.options.opacity=t,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var t=this.options.opacity;setOpacity(this._icon,t),this._shadow&&setOpacity(this._shadow,t)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}}),ce=ee.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(t){this._renderer=t.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(t){return setOptions(this,t),this._renderer&&this._renderer._updateStyle(this),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+this._renderer.options.tolerance}}),de=ce.extend({options:{fill:!0,radius:10},initialize:function(t,e){setOptions(this,e),this._latlng=toLatLng(t),this._radius=this.options.radius},setLatLng:function(t){return this._latlng=toLatLng(t),this.redraw(),this.fire("move",{latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(t){return this.options.radius=this._radius=t,this.redraw()},getRadius:function(){return this._radius},setStyle:function(t){var e=t&&t.radius||this._radius;return ce.prototype.setStyle.call(this,t),this.setRadius(e),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var t=this._radius,e=this._radiusY||t,i=this._clickTolerance(),n=[t+i,e+i];this._pxBounds=new Bounds(this._point.subtract(n),this._point.add(n))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(t){return t.distanceTo(this._point)<=this._radius+this._clickTolerance()}}),he=de.extend({initialize:function(t,e,i){if("number"==typeof e&&(e=extend({},i,{radius:e})),setOptions(this,e),this._latlng=toLatLng(t),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(t){return this._mRadius=t,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var t=[this._radius,this._radiusY||this._radius];return new LatLngBounds(this._map.layerPointToLatLng(this._point.subtract(t)),this._map.layerPointToLatLng(this._point.add(t)))},setStyle:ce.prototype.setStyle,_project:function(){var t=this._latlng.lng,e=this._latlng.lat,i=this._map,n=i.options.crs;if(n.distance===m.distance){var a=Math.PI/180,r=this._mRadius/m.R/a,o=i.project([e+r,t]),s=i.project([e-r,t]),l=o.add(s).divideBy(2),u=i.unproject(l).lat,c=Math.acos((Math.cos(r*a)-Math.sin(e*a)*Math.sin(u*a))/(Math.cos(e*a)*Math.cos(u*a)))/a;(isNaN(c)||0===c)&&(c=r/Math.cos(Math.PI/180*e)),this._point=l.subtract(i.getPixelOrigin()),this._radius=isNaN(c)?0:l.x-i.project([u,t-c]).x,this._radiusY=l.y-o.y}else{var d=n.unproject(n.project(this._latlng).subtract([this._mRadius,0]));this._point=i.latLngToLayerPoint(this._latlng),this._radius=this._point.x-i.latLngToLayerPoint(d).x}this._updateBounds()}}),pe=ce.extend({options:{smoothFactor:1,noClip:!1},initialize:function(t,e){setOptions(this,e),this._setLatLngs(t)},getLatLngs:function(){return this._latlngs},setLatLngs:function(t){return this._setLatLngs(t),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(t){for(var e,i,n=1/0,a=null,r=_sqClosestPointOnSegment,o=0,s=this._parts.length;o<s;o++)for(var l=this._parts[o],u=1,c=l.length;u<c;u++){e=l[u-1],i=l[u];var d=r(t,e,i,!0);d<n&&(n=d,a=r(t,e,i))}return a&&(a.distance=Math.sqrt(n)),a},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,a,r,o,s=this._rings[0],l=s.length;if(!l)return null;for(t=0,e=0;t<l-1;t++)e+=s[t].distanceTo(s[t+1])/2;if(0===e)return this._map.layerPointToLatLng(s[0]);for(t=0,n=0;t<l-1;t++)if(a=s[t],r=s[t+1],i=a.distanceTo(r),(n+=i)>e)return o=(n-e)/i,this._map.layerPointToLatLng([r.x-o*(r.x-a.x),r.y-o*(r.y-a.y)])},getBounds:function(){return this._bounds},addLatLng:function(t,e){return e=e||this._defaultShape(),t=toLatLng(t),e.push(t),this._bounds.extend(t),this.redraw()},_setLatLngs:function(t){this._bounds=new LatLngBounds,this._latlngs=this._convertLatLngs(t)},_defaultShape:function(){return isFlat(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(t){for(var e=[],i=isFlat(t),n=0,a=t.length;n<a;n++)i?(e[n]=toLatLng(t[n]),this._bounds.extend(e[n])):e[n]=this._convertLatLngs(t[n]);return e},_project:function(){var t=new Bounds;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,t);var e=this._clickTolerance(),i=new Point(e,e);this._bounds.isValid()&&t.isValid()&&(t.min._subtract(i),t.max._add(i),this._pxBounds=t)},_projectLatlngs:function(t,e,i){var n,a,r=t[0]instanceof LatLng,o=t.length;if(r){for(a=[],n=0;n<o;n++)a[n]=this._map.latLngToLayerPoint(t[n]),i.extend(a[n]);e.push(a)}else for(n=0;n<o;n++)this._projectLatlngs(t[n],e,i)},_clipPoints:function(){var t=this._renderer._bounds;if(this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);var e,i,n,a,r,o,s,l=this._parts;for(e=0,n=0,a=this._rings.length;e<a;e++)for(s=this._rings[e],i=0,r=s.length;i<r-1;i++)(o=clipSegment(s[i],s[i+1],t,i,!0))&&(l[n]=l[n]||[],l[n].push(o[0]),o[1]===s[i+1]&&i!==r-2||(l[n].push(o[1]),n++))}},_simplifyPoints:function(){for(var t=this._parts,e=this.options.smoothFactor,i=0,n=t.length;i<n;i++)t[i]=simplify(t[i],e)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(t,e){var i,n,a,r,o,s,l=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(t))return!1;for(i=0,r=this._parts.length;i<r;i++)for(s=this._parts[i],n=0,o=s.length,a=o-1;n<o;a=n++)if((e||0!==n)&&pointToSegmentDistance(t,s[a],s[n])<=l)return!0;return!1}});pe._flat=_flat;var fe=pe.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");var t,e,i,n,a,r,o,s,l,u=this._rings[0],c=u.length;if(!c)return null;for(r=o=s=0,t=0,e=c-1;t<c;e=t++)i=u[t],n=u[e],a=i.y*n.x-n.y*i.x,o+=(i.x+n.x)*a,s+=(i.y+n.y)*a,r+=3*a;return l=0===r?u[0]:[o/r,s/r],this._map.layerPointToLatLng(l)},_convertLatLngs:function(t){var e=pe.prototype._convertLatLngs.call(this,t),i=e.length;return i>=2&&e[0]instanceof LatLng&&e[0].equals(e[i-1])&&e.pop(),e},_setLatLngs:function(t){pe.prototype._setLatLngs.call(this,t),isFlat(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return isFlat(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var t=this._renderer._bounds,e=this.options.weight,i=new Point(e,e);if(t=new Bounds(t.min.subtract(i),t.max.add(i)),this._parts=[],this._pxBounds&&this._pxBounds.intersects(t)){if(this.options.noClip)return void(this._parts=this._rings);for(var n,a=0,r=this._rings.length;a<r;a++)n=clipPolygon(this._rings[a],t,!0),n.length&&this._parts.push(n)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(t){var e,i,n,a,r,o,s,l,u=!1;if(!this._pxBounds.contains(t))return!1;for(a=0,s=this._parts.length;a<s;a++)for(e=this._parts[a],r=0,l=e.length,o=l-1;r<l;o=r++)i=e[r],n=e[o],i.y>t.y!=n.y>t.y&&t.x<(n.x-i.x)*(t.y-i.y)/(n.y-i.y)+i.x&&(u=!u);return u||pe.prototype._containsPoint.call(this,t,!0)}}),ge=ae.extend({initialize:function(t,e){setOptions(this,e),this._layers={},t&&this.addData(t)},addData:function(t){var e,i,n,a=o(t)?t:t.features;if(a){for(e=0,i=a.length;e<i;e++)n=a[e],(n.geometries||n.geometry||n.features||n.coordinates)&&this.addData(n);return this}var r=this.options;if(r.filter&&!r.filter(t))return this;var s=geometryToLayer(t,r);return s?(s.feature=asFeature(t),s.defaultOptions=s.options,this.resetStyle(s),r.onEachFeature&&r.onEachFeature(t,s),this.addLayer(s)):this},resetStyle:function(t){return t.options=extend({},t.defaultOptions),this._setLayerStyle(t,this.options.style),this},setStyle:function(t){return this.eachLayer(function(e){this._setLayerStyle(e,t)},this)},_setLayerStyle:function(t,e){"function"==typeof e&&(e=e(t.feature)),t.setStyle&&t.setStyle(e)}}),_e={toGeoJSON:function(t){return getFeature(this,{type:"Point",coordinates:latLngToCoords(this.getLatLng(),t)})}};ue.include(_e),he.include(_e),de.include(_e),pe.include({toGeoJSON:function(t){var e=!isFlat(this._latlngs),i=latLngsToCoords(this._latlngs,e?1:0,!1,t);return getFeature(this,{type:(e?"Multi":"")+"LineString",coordinates:i})}}),fe.include({toGeoJSON:function(t){var e=!isFlat(this._latlngs),i=e&&!isFlat(this._latlngs[0]),n=latLngsToCoords(this._latlngs,i?2:e?1:0,!0,t);return e||(n=[n]),getFeature(this,{type:(i?"Multi":"")+"Polygon",coordinates:n})}}),ie.include({toMultiPoint:function(t){var e=[];return this.eachLayer(function(i){e.push(i.toGeoJSON(t).geometry.coordinates)}),getFeature(this,{type:"MultiPoint",coordinates:e})},toGeoJSON:function(t){var e=this.feature&&this.feature.geometry&&this.feature.geometry.type;if("MultiPoint"===e)return this.toMultiPoint(t);var i="GeometryCollection"===e,n=[];return this.eachLayer(function(e){if(e.toGeoJSON){var a=e.toGeoJSON(t);if(i)n.push(a.geometry);else{var r=asFeature(a);"FeatureCollection"===r.type?n.push.apply(n,r.features):n.push(r)}}}),i?getFeature(this,{geometries:n,type:"GeometryCollection"}):{type:"FeatureCollection",features:n}}});var me=geoJSON,ye=ee.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(t,e,i){this._url=t,this._bounds=toLatLngBounds(e),setOptions(this,i)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(addClass(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){remove(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(t){return this.options.opacity=t,this._image&&this._updateOpacity(),this},setStyle:function(t){return t.opacity&&this.setOpacity(t.opacity),this},bringToFront:function(){return this._map&&toFront(this._image),this},bringToBack:function(){return this._map&&toBack(this._image),this},setUrl:function(t){return this._url=t,this._image&&(this._image.src=t),this},setBounds:function(t){return this._bounds=toLatLngBounds(t),this._map&&this._reset(),this},getEvents:function(){var t={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var t="IMG"===this._url.tagName,e=this._image=t?this._url:create$1("img");if(addClass(e,"leaflet-image-layer"),this._zoomAnimated&&addClass(e,"leaflet-zoom-animated"),this.options.className&&addClass(e,this.options.className),e.onselectstart=falseFn,e.onmousemove=falseFn,e.onload=bind(this.fire,this,"load"),e.onerror=bind(this._overlayOnError,this,"error"),this.options.crossOrigin&&(e.crossOrigin=""),this.options.zIndex&&this._updateZIndex(),t)return void(this._url=e.src);e.src=this._url,e.alt=this.options.alt},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._latLngBoundsToNewLayerBounds(this._bounds,t.zoom,t.center).min;setTransform(this._image,i,e)},_reset:function(){var t=this._image,e=new Bounds(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),i=e.getSize();setPosition(t,e.min),t.style.width=i.x+"px",t.style.height=i.y+"px"},_updateOpacity:function(){setOpacity(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var t=this.options.errorOverlayUrl;t&&this._url!==t&&(this._url=t,this._image.src=t)}}),ve=function(t,e,i){return new ye(t,e,i)},xe=ye.extend({options:{autoplay:!0,loop:!0},_initImage:function(){var t="VIDEO"===this._url.tagName,e=this._image=t?this._url:create$1("video");if(addClass(e,"leaflet-image-layer"),this._zoomAnimated&&addClass(e,"leaflet-zoom-animated"),e.onselectstart=falseFn,e.onmousemove=falseFn,e.onloadeddata=bind(this.fire,this,"load"),t){for(var i=e.getElementsByTagName("source"),n=[],a=0;a<i.length;a++)n.push(i[a].src);return void(this._url=i.length>0?n:[e.src])}o(this._url)||(this._url=[this._url]),e.autoplay=!!this.options.autoplay,e.loop=!!this.options.loop;for(var r=0;r<this._url.length;r++){var s=create$1("source");s.src=this._url[r],e.appendChild(s)}}}),be=ee.extend({options:{offset:[0,7],className:"",pane:"popupPane"},initialize:function(t,e){setOptions(this,t),this._source=e},onAdd:function(t){this._zoomAnimated=t._zoomAnimated,this._container||this._initLayout(),t._fadeAnimated&&setOpacity(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),t._fadeAnimated&&setOpacity(this._container,1),this.bringToFront()},onRemove:function(t){t._fadeAnimated?(setOpacity(this._container,0),this._removeTimeout=setTimeout(bind(remove,void 0,this._container),200)):remove(this._container)},getLatLng:function(){return this._latlng},setLatLng:function(t){return this._latlng=toLatLng(t),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(t){return this._content=t,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var t={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&toFront(this._container),this},bringToBack:function(){return this._map&&toBack(this._container),this},_updateContent:function(){if(this._content){var t=this._contentNode,e="function"==typeof this._content?this._content(this._source||this):this._content;if("string"==typeof e)t.innerHTML=e;else{for(;t.hasChildNodes();)t.removeChild(t.firstChild);t.appendChild(e)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var t=this._map.latLngToLayerPoint(this._latlng),e=toPoint(this.options.offset),i=this._getAnchor();this._zoomAnimated?setPosition(this._container,t.add(i)):e=e.add(t).add(i);var n=this._containerBottom=-e.y,a=this._containerLeft=-Math.round(this._containerWidth/2)+e.x;this._container.style.bottom=n+"px",this._container.style.left=a+"px"}},_getAnchor:function(){return[0,0]}}),we=be.extend({options:{maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(t){return t.openPopup(this),this},onAdd:function(t){be.prototype.onAdd.call(this,t),t.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof ce||this._source.on("preclick",stopPropagation))},onRemove:function(t){be.prototype.onRemove.call(this,t),t.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof ce||this._source.off("preclick",stopPropagation))},getEvents:function(){var t=be.prototype.getEvents.call(this);return(void 0!==this.options.closeOnClick?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(t.preclick=this._close),this.options.keepInView&&(t.moveend=this._adjustPan),t},_close:function(){this._map&&this._map.closePopup(this)},_initLayout:function(){var t="leaflet-popup",e=this._container=create$1("div",t+" "+(this.options.className||"")+" leaflet-zoom-animated"),i=this._wrapper=create$1("div",t+"-content-wrapper",e);if(this._contentNode=create$1("div",t+"-content",i),disableClickPropagation(i),disableScrollPropagation(this._contentNode),on(i,"contextmenu",stopPropagation),this._tipContainer=create$1("div",t+"-tip-container",e),this._tip=create$1("div",t+"-tip",this._tipContainer),this.options.closeButton){var n=this._closeButton=create$1("a",t+"-close-button",e);n.href="#close",n.innerHTML="&#215;",on(n,"click",this._onCloseButtonClick,this)}},_updateLayout:function(){var t=this._contentNode,e=t.style;e.width="",e.whiteSpace="nowrap";var i=t.offsetWidth;i=Math.min(i,this.options.maxWidth),i=Math.max(i,this.options.minWidth),e.width=i+1+"px",e.whiteSpace="",e.height="";var n=t.offsetHeight,a=this.options.maxHeight;a&&n>a?(e.height=a+"px",addClass(t,"leaflet-popup-scrolled")):removeClass(t,"leaflet-popup-scrolled"),this._containerWidth=this._container.offsetWidth},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center),i=this._getAnchor();setPosition(this._container,e.add(i))},_adjustPan:function(){if(!(!this.options.autoPan||this._map._panAnim&&this._map._panAnim._inProgress)){var t=this._map,e=parseInt(getStyle(this._container,"marginBottom"),10)||0,i=this._container.offsetHeight+e,n=this._containerWidth,a=new Point(this._containerLeft,-i-this._containerBottom);a._add(getPosition(this._container));var r=t.layerPointToContainerPoint(a),o=toPoint(this.options.autoPanPadding),s=toPoint(this.options.autoPanPaddingTopLeft||o),l=toPoint(this.options.autoPanPaddingBottomRight||o),u=t.getSize(),c=0,d=0;r.x+n+l.x>u.x&&(c=r.x+n-u.x+l.x),r.x-c-s.x<0&&(c=r.x-s.x),r.y+i+l.y>u.y&&(d=r.y+i-u.y+l.y),r.y-d-s.y<0&&(d=r.y-s.y),(c||d)&&t.fire("autopanstart").panBy([c,d])}},_onCloseButtonClick:function(t){this._close(),stop(t)},_getAnchor:function(){return toPoint(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Le=function(t,e){return new we(t,e)};Mt.mergeOptions({closePopupOnClick:!0}),Mt.include({openPopup:function(t,e,i){return t instanceof we||(t=new we(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:(this._popup&&this._popup.options.autoClose&&this.closePopup(),this._popup=t,this.addLayer(t))},closePopup:function(t){return t&&t!==this._popup||(t=this._popup,this._popup=null),t&&this.removeLayer(t),this}}),ee.include({bindPopup:function(t,e){return t instanceof we?(setOptions(t,e),this._popup=t,t._source=this):(this._popup&&!e||(this._popup=new we(e,this)),this._popup.setContent(t)),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(t,e){if(t instanceof ee||(e=t,t=this),t instanceof ae)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._popup&&this._map&&(this._popup._source=t,this._popup.update(),this._map.openPopup(this._popup,e)),this},closePopup:function(){return this._popup&&this._popup._close(),this},togglePopup:function(t){return this._popup&&(this._popup._map?this.closePopup():this.openPopup(t)),this},isPopupOpen:function(){return!!this._popup&&this._popup.isOpen()},setPopupContent:function(t){return this._popup&&this._popup.setContent(t),this},getPopup:function(){return this._popup},_openPopup:function(t){var e=t.layer||t.target;if(this._popup&&this._map){if(stop(t),e instanceof ce)return void this.openPopup(t.layer||t.target,t.latlng);this._map.hasLayer(this._popup)&&this._popup._source===e?this.closePopup():this.openPopup(e,t.latlng)}},_movePopup:function(t){this._popup.setLatLng(t.latlng)},_onKeyPress:function(t){13===t.originalEvent.keyCode&&this._openPopup(t)}});var Te=be.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,interactive:!1,opacity:.9},onAdd:function(t){be.prototype.onAdd.call(this,t),this.setOpacity(this.options.opacity),t.fire("tooltipopen",{tooltip:this}),this._source&&this._source.fire("tooltipopen",{tooltip:this},!0)},onRemove:function(t){be.prototype.onRemove.call(this,t),t.fire("tooltipclose",{tooltip:this}),this._source&&this._source.fire("tooltipclose",{tooltip:this},!0)},getEvents:function(){var t=be.prototype.getEvents.call(this);return J&&!this.options.permanent&&(t.preclick=this._close),t},_close:function(){this._map&&this._map.closeTooltip(this)},_initLayout:function(){var t="leaflet-tooltip "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=create$1("div",t)},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(t){var e=this._map,i=this._container,n=e.latLngToContainerPoint(e.getCenter()),a=e.layerPointToContainerPoint(t),r=this.options.direction,o=i.offsetWidth,s=i.offsetHeight,l=toPoint(this.options.offset),u=this._getAnchor();"top"===r?t=t.add(toPoint(-o/2+l.x,-s+l.y+u.y,!0)):"bottom"===r?t=t.subtract(toPoint(o/2-l.x,-l.y,!0)):"center"===r?t=t.subtract(toPoint(o/2+l.x,s/2-u.y+l.y,!0)):"right"===r||"auto"===r&&a.x<n.x?(r="right",t=t.add(toPoint(l.x+u.x,u.y-s/2+l.y,!0))):(r="left",t=t.subtract(toPoint(o+u.x-l.x,s/2-u.y-l.y,!0))),removeClass(i,"leaflet-tooltip-right"),removeClass(i,"leaflet-tooltip-left"),removeClass(i,"leaflet-tooltip-top"),removeClass(i,"leaflet-tooltip-bottom"),addClass(i,"leaflet-tooltip-"+r),setPosition(i,t)},_updatePosition:function(){var t=this._map.latLngToLayerPoint(this._latlng);this._setPosition(t)},setOpacity:function(t){this.options.opacity=t,this._container&&setOpacity(this._container,t)},_animateZoom:function(t){var e=this._map._latLngToNewLayerPoint(this._latlng,t.zoom,t.center);this._setPosition(e)},_getAnchor:function(){return toPoint(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),ke=function(t,e){return new Te(t,e)};Mt.include({openTooltip:function(t,e,i){return t instanceof Te||(t=new Te(i).setContent(t)),e&&t.setLatLng(e),this.hasLayer(t)?this:this.addLayer(t)},closeTooltip:function(t){return t&&this.removeLayer(t),this}}),ee.include({bindTooltip:function(t,e){return t instanceof Te?(setOptions(t,e),this._tooltip=t,t._source=this):(this._tooltip&&!e||(this._tooltip=new Te(e,this)),this._tooltip.setContent(t)),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(t){if(t||!this._tooltipHandlersAdded){var e=t?"off":"on",i={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?i.add=this._openTooltip:(i.mouseover=this._openTooltip,i.mouseout=this.closeTooltip,this._tooltip.options.sticky&&(i.mousemove=this._moveTooltip),J&&(i.click=this._openTooltip)),this[e](i),this._tooltipHandlersAdded=!t}},openTooltip:function(t,e){if(t instanceof ee||(e=t,t=this),t instanceof ae)for(var i in this._layers){t=this._layers[i];break}return e||(e=t.getCenter?t.getCenter():t.getLatLng()),this._tooltip&&this._map&&(this._tooltip._source=t,this._tooltip.update(),this._map.openTooltip(this._tooltip,e),this._tooltip.options.interactive&&this._tooltip._container&&(addClass(this._tooltip._container,"leaflet-clickable"),this.addInteractiveTarget(this._tooltip._container))),this},closeTooltip:function(){return this._tooltip&&(this._tooltip._close(),this._tooltip.options.interactive&&this._tooltip._container&&(removeClass(this._tooltip._container,"leaflet-clickable"),this.removeInteractiveTarget(this._tooltip._container))),this},toggleTooltip:function(t){return this._tooltip&&(this._tooltip._map?this.closeTooltip():this.openTooltip(t)),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(t){return this._tooltip&&this._tooltip.setContent(t),this},getTooltip:function(){return this._tooltip},_openTooltip:function(t){var e=t.layer||t.target;this._tooltip&&this._map&&this.openTooltip(e,this._tooltip.options.sticky?t.latlng:void 0)},_moveTooltip:function(t){var e,i,n=t.latlng;this._tooltip.options.sticky&&t.originalEvent&&(e=this._map.mouseEventToContainerPoint(t.originalEvent),i=this._map.containerPointToLayerPoint(e),n=this._map.layerPointToLatLng(i)),this._tooltip.setLatLng(n)}});var Ce=oe.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(t){var e=t&&"DIV"===t.tagName?t:document.createElement("div"),i=this.options;if(e.innerHTML=!1!==i.html?i.html:"",i.bgPos){var n=toPoint(i.bgPos);e.style.backgroundPosition=-n.x+"px "+-n.y+"px"}return this._setIconStyles(e,"icon"),e},createShadow:function(){return null}});oe.Default=se;var Ae=ee.extend({options:{tileSize:256,opacity:1,updateWhenIdle:V,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(t){setOptions(this,t)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView(),this._update()},beforeAdd:function(t){t._addZoomLimit(this)},onRemove:function(t){this._removeAllTiles(),remove(this._container),t._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(toFront(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(toBack(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(t){return this.options.opacity=t,this._updateOpacity(),this},setZIndex:function(t){return this.options.zIndex=t,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){return this._map&&(this._removeAllTiles(),this._update()),this},getEvents:function(){var t={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=throttle(this._onMoveEnd,this.options.updateInterval,this)),t.move=this._onMove),this._zoomAnimated&&(t.zoomanim=this._animateZoom),t},createTile:function(){return document.createElement("div")},getTileSize:function(){var t=this.options.tileSize;return t instanceof Point?t:new Point(t,t)},_updateZIndex:function(){this._container&&void 0!==this.options.zIndex&&null!==this.options.zIndex&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(t){for(var e,i=this.getPane().children,n=-t(-1/0,1/0),a=0,r=i.length;a<r;a++)e=i[a].style.zIndex,i[a]!==this._container&&e&&(n=t(n,+e));isFinite(n)&&(this.options.zIndex=n+t(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!M){setOpacity(this._container,this.options.opacity);var t=+new Date,e=!1,i=!1;for(var n in this._tiles){var a=this._tiles[n];if(a.current&&a.loaded){var r=Math.min(1,(t-a.loaded)/200);setOpacity(a.el,r),r<1?e=!0:(a.active?i=!0:this._onOpaqueTile(a),a.active=!0)}}i&&!this._noPrune&&this._pruneTiles(),e&&(cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this))}},_onOpaqueTile:falseFn,_initContainer:function(){this._container||(this._container=create$1("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var t=this._tileZoom,e=this.options.maxZoom;if(void 0!==t){for(var i in this._levels)this._levels[i].el.children.length||i===t?(this._levels[i].el.style.zIndex=e-Math.abs(t-i),this._onUpdateLevel(i)):(remove(this._levels[i].el),this._removeTilesAtZoom(i),this._onRemoveLevel(i),delete this._levels[i]);var n=this._levels[t],a=this._map;return n||(n=this._levels[t]={},n.el=create$1("div","leaflet-tile-container leaflet-zoom-animated",this._container),n.el.style.zIndex=e,n.origin=a.project(a.unproject(a.getPixelOrigin()),t).round(),n.zoom=t,this._setZoomTransform(n,a.getCenter(),a.getZoom()),n.el.offsetWidth,this._onCreateLevel(n)),this._level=n,n}},_onUpdateLevel:falseFn,_onRemoveLevel:falseFn,_onCreateLevel:falseFn,_pruneTiles:function(){if(this._map){var t,e,i=this._map.getZoom();if(i>this.options.maxZoom||i<this.options.minZoom)return void this._removeAllTiles();for(t in this._tiles)e=this._tiles[t],e.retain=e.current;for(t in this._tiles)if(e=this._tiles[t],e.current&&!e.active){var n=e.coords;this._retainParent(n.x,n.y,n.z,n.z-5)||this._retainChildren(n.x,n.y,n.z,n.z+2)}for(t in this._tiles)this._tiles[t].retain||this._removeTile(t)}},_removeTilesAtZoom:function(t){for(var e in this._tiles)this._tiles[e].coords.z===t&&this._removeTile(e)},_removeAllTiles:function(){for(var t in this._tiles)this._removeTile(t)},_invalidateAll:function(){for(var t in this._levels)remove(this._levels[t].el),this._onRemoveLevel(t),delete this._levels[t];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(t,e,i,n){var a=Math.floor(t/2),r=Math.floor(e/2),o=i-1,s=new Point(+a,+r);s.z=+o;var l=this._tileCoordsToKey(s),u=this._tiles[l];return u&&u.active?(u.retain=!0,!0):(u&&u.loaded&&(u.retain=!0),o>n&&this._retainParent(a,r,o,n))},_retainChildren:function(t,e,i,n){for(var a=2*t;a<2*t+2;a++)for(var r=2*e;r<2*e+2;r++){var o=new Point(a,r);o.z=i+1;var s=this._tileCoordsToKey(o),l=this._tiles[s];l&&l.active?l.retain=!0:(l&&l.loaded&&(l.retain=!0),i+1<n&&this._retainChildren(a,r,i+1,n))}},_resetView:function(t){var e=t&&(t.pinch||t.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),e,e)},_animateZoom:function(t){this._setView(t.center,t.zoom,!0,t.noUpdate)},_clampZoom:function(t){var e=this.options;return void 0!==e.minNativeZoom&&t<e.minNativeZoom?e.minNativeZoom:void 0!==e.maxNativeZoom&&e.maxNativeZoom<t?e.maxNativeZoom:t},_setView:function(t,e,i,n){var a=this._clampZoom(Math.round(e));(void 0!==this.options.maxZoom&&a>this.options.maxZoom||void 0!==this.options.minZoom&&a<this.options.minZoom)&&(a=void 0);var r=this.options.updateWhenZooming&&a!==this._tileZoom;n&&!r||(this._tileZoom=a,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),void 0!==a&&this._update(t),i||this._pruneTiles(),this._noPrune=!!i),this._setZoomTransforms(t,e)},_setZoomTransforms:function(t,e){for(var i in this._levels)this._setZoomTransform(this._levels[i],t,e)},_setZoomTransform:function(t,e,i){var n=this._map.getZoomScale(i,t.zoom),a=t.origin.multiplyBy(n).subtract(this._map._getNewPixelOrigin(e,i)).round();G?setTransform(t.el,a,n):setPosition(t.el,a)},_resetGrid:function(){var t=this._map,e=t.options.crs,i=this._tileSize=this.getTileSize(),n=this._tileZoom,a=this._map.getPixelWorldBounds(this._tileZoom);a&&(this._globalTileRange=this._pxBoundsToTileRange(a)),this._wrapX=e.wrapLng&&!this.options.noWrap&&[Math.floor(t.project([0,e.wrapLng[0]],n).x/i.x),Math.ceil(t.project([0,e.wrapLng[1]],n).x/i.y)],this._wrapY=e.wrapLat&&!this.options.noWrap&&[Math.floor(t.project([e.wrapLat[0],0],n).y/i.x),Math.ceil(t.project([e.wrapLat[1],0],n).y/i.y)]},_onMoveEnd:function(){this._map&&!this._map._animatingZoom&&this._update()},_getTiledPixelBounds:function(t){var e=this._map,i=e._animatingZoom?Math.max(e._animateToZoom,e.getZoom()):e.getZoom(),n=e.getZoomScale(i,this._tileZoom),a=e.project(t,this._tileZoom).floor(),r=e.getSize().divideBy(2*n);return new Bounds(a.subtract(r),a.add(r))},_update:function(t){var e=this._map;if(e){var i=this._clampZoom(e.getZoom());if(void 0===t&&(t=e.getCenter()),void 0!==this._tileZoom){var n=this._getTiledPixelBounds(t),a=this._pxBoundsToTileRange(n),r=a.getCenter(),o=[],s=this.options.keepBuffer,l=new Bounds(a.getBottomLeft().subtract([s,-s]),a.getTopRight().add([s,-s]));if(!(isFinite(a.min.x)&&isFinite(a.min.y)&&isFinite(a.max.x)&&isFinite(a.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var u in this._tiles){var c=this._tiles[u].coords;c.z===this._tileZoom&&l.contains(new Point(c.x,c.y))||(this._tiles[u].current=!1)}if(Math.abs(i-this._tileZoom)>1)return void this._setView(t,i);for(var d=a.min.y;d<=a.max.y;d++)for(var h=a.min.x;h<=a.max.x;h++){var p=new Point(h,d);if(p.z=this._tileZoom,this._isValidTile(p)){var f=this._tiles[this._tileCoordsToKey(p)];f?f.current=!0:o.push(p)}}if(o.sort(function(t,e){return t.distanceTo(r)-e.distanceTo(r)}),0!==o.length){this._loading||(this._loading=!0,this.fire("loading"));var g=document.createDocumentFragment();for(h=0;h<o.length;h++)this._addTile(o[h],g);this._level.el.appendChild(g)}}}},_isValidTile:function(t){var e=this._map.options.crs;if(!e.infinite){var i=this._globalTileRange;if(!e.wrapLng&&(t.x<i.min.x||t.x>i.max.x)||!e.wrapLat&&(t.y<i.min.y||t.y>i.max.y))return!1}if(!this.options.bounds)return!0;var n=this._tileCoordsToBounds(t);return toLatLngBounds(this.options.bounds).overlaps(n)},_keyToBounds:function(t){return this._tileCoordsToBounds(this._keyToTileCoords(t))},_tileCoordsToNwSe:function(t){var e=this._map,i=this.getTileSize(),n=t.scaleBy(i),a=n.add(i);return[e.unproject(n,t.z),e.unproject(a,t.z)]},_tileCoordsToBounds:function(t){var e=this._tileCoordsToNwSe(t),i=new LatLngBounds(e[0],e[1]);return this.options.noWrap||(i=this._map.wrapLatLngBounds(i)),i},_tileCoordsToKey:function(t){return t.x+":"+t.y+":"+t.z},_keyToTileCoords:function(t){var e=t.split(":"),i=new Point(+e[0],+e[1]);return i.z=+e[2],i},_removeTile:function(t){var e=this._tiles[t];e&&(z||e.el.setAttribute("src",s),remove(e.el),delete this._tiles[t],this.fire("tileunload",{tile:e.el,coords:this._keyToTileCoords(t)}))},_initTile:function(t){addClass(t,"leaflet-tile");var e=this.getTileSize();t.style.width=e.x+"px",t.style.height=e.y+"px",t.onselectstart=falseFn,t.onmousemove=falseFn,M&&this.options.opacity<1&&setOpacity(t,this.options.opacity),B&&!D&&(t.style.WebkitBackfaceVisibility="hidden")},_addTile:function(t,e){var i=this._getTilePos(t),n=this._tileCoordsToKey(t),a=this.createTile(this._wrapCoords(t),bind(this._tileReady,this,t));this._initTile(a),this.createTile.length<2&&requestAnimFrame(bind(this._tileReady,this,t,null,a)),setPosition(a,i),this._tiles[n]={el:a,coords:t,current:!0},e.appendChild(a),this.fire("tileloadstart",{tile:a,coords:t})},_tileReady:function(t,e,i){if(this._map){e&&this.fire("tileerror",{error:e,tile:i,coords:t});var n=this._tileCoordsToKey(t);i=this._tiles[n],i&&(i.loaded=+new Date,this._map._fadeAnimated?(setOpacity(i.el,0),cancelAnimFrame(this._fadeFrame),this._fadeFrame=requestAnimFrame(this._updateOpacity,this)):(i.active=!0,this._pruneTiles()),e||(addClass(i.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:i.el,coords:t})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),M||!this._map._fadeAnimated?requestAnimFrame(this._pruneTiles,this):setTimeout(bind(this._pruneTiles,this),250)))}},_getTilePos:function(t){return t.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(t){var e=new Point(this._wrapX?wrapNum(t.x,this._wrapX):t.x,this._wrapY?wrapNum(t.y,this._wrapY):t.y);return e.z=t.z,e},_pxBoundsToTileRange:function(t){var e=this.getTileSize();return new Bounds(t.min.unscaleBy(e).floor(),t.max.unscaleBy(e).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var t in this._tiles)if(!this._tiles[t].loaded)return!1;return!0}}),Pe=Ae.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1},initialize:function(t,e){this._url=t,e=setOptions(this,e),e.detectRetina&&et&&e.maxZoom>0&&(e.tileSize=Math.floor(e.tileSize/2),e.zoomReverse?(e.zoomOffset--,e.minZoom++):(e.zoomOffset++,e.maxZoom--),e.minZoom=Math.max(0,e.minZoom)),"string"==typeof e.subdomains&&(e.subdomains=e.subdomains.split("")),B||this.on("tileunload",this._onTileRemove)},setUrl:function(t,e){return this._url=t,e||this.redraw(),this},createTile:function(t,e){var i=document.createElement("img");return on(i,"load",bind(this._tileOnLoad,this,e,i)),on(i,"error",bind(this._tileOnError,this,e,i)),this.options.crossOrigin&&(i.crossOrigin=""),i.alt="",i.setAttribute("role","presentation"),i.src=this.getTileUrl(t),i},getTileUrl:function(t){var e={r:et?"@2x":"",s:this._getSubdomain(t),x:t.x,y:t.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var i=this._globalTileRange.max.y-t.y;this.options.tms&&(e.y=i),e["-y"]=i}return template(this._url,extend(e,this.options))},_tileOnLoad:function(t,e){M?setTimeout(bind(t,this,null,e),0):t(null,e)},_tileOnError:function(t,e,i){var n=this.options.errorTileUrl;n&&e.getAttribute("src")!==n&&(e.src=n),t(i,e)},_onTileRemove:function(t){t.tile.onload=null},_getZoomForUrl:function(){var t=this._tileZoom,e=this.options.maxZoom,i=this.options.zoomReverse,n=this.options.zoomOffset;return i&&(t=e-t),t+n},_getSubdomain:function(t){var e=Math.abs(t.x+t.y)%this.options.subdomains.length;return this.options.subdomains[e]},_abortLoading:function(){var t,e;for(t in this._tiles)this._tiles[t].coords.z!==this._tileZoom&&(e=this._tiles[t].el,e.onload=falseFn,e.onerror=falseFn,e.complete||(e.src=s,remove(e),delete this._tiles[t]))}}),Me=Pe.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(t,e){this._url=t;var i=extend({},this.defaultWmsParams);for(var n in e)n in this.options||(i[n]=e[n]);e=setOptions(this,e);var a=e.detectRetina&&et?2:1,r=this.getTileSize();i.width=r.x*a,i.height=r.y*a,this.wmsParams=i},onAdd:function(t){this._crs=this.options.crs||t.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var e=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[e]=this._crs.code,Pe.prototype.onAdd.call(this,t)},getTileUrl:function(t){var e=this._tileCoordsToNwSe(t),i=this._crs,n=toBounds(i.project(e[0]),i.project(e[1])),a=n.min,r=n.max,o=(this._wmsVersion>=1.3&&this._crs===Qt?[a.y,a.x,r.y,r.x]:[a.x,a.y,r.x,r.y]).join(","),s=L.TileLayer.prototype.getTileUrl.call(this,t);return s+getParamString(this.wmsParams,s,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+o},setParams:function(t,e){return extend(this.wmsParams,t),e||this.redraw(),this}});Pe.WMS=Me,tileLayer.wms=tileLayerWMS;var Se=ee.extend({options:{padding:.1,tolerance:0},initialize:function(t){setOptions(this,t),stamp(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),this._zoomAnimated&&addClass(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var t={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(t.zoomanim=this._onAnimZoom),t},_onAnimZoom:function(t){this._updateTransform(t.center,t.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(t,e){var i=this._map.getZoomScale(e,this._zoom),n=getPosition(this._container),a=this._map.getSize().multiplyBy(.5+this.options.padding),r=this._map.project(this._center,e),o=this._map.project(t,e),s=o.subtract(r),l=a.multiplyBy(-i).add(n).add(a).subtract(s);G?setTransform(this._container,l,i):setPosition(this._container,l)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var t in this._layers)this._layers[t]._reset()},_onZoomEnd:function(){for(var t in this._layers)this._layers[t]._project()},_updatePaths:function(){for(var t in this._layers)this._layers[t]._update()},_update:function(){var t=this.options.padding,e=this._map.getSize(),i=this._map.containerPointToLayerPoint(e.multiplyBy(-t)).round();this._bounds=new Bounds(i,i.add(e.multiplyBy(1+2*t)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),Ee=Se.extend({getEvents:function(){var t=Se.prototype.getEvents.call(this);return t.viewprereset=this._onViewPreReset,t},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Se.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var t=this._container=document.createElement("canvas");on(t,"mousemove",throttle(this._onMouseMove,32,this),this),on(t,"click dblclick mousedown mouseup contextmenu",this._onClick,this),on(t,"mouseout",this._handleMouseOut,this),this._ctx=t.getContext("2d")},_destroyContainer:function(){delete this._ctx,remove(this._container),off(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var t;this._redrawBounds=null;for(var e in this._layers)t=this._layers[e],t._update();this._redraw()}},_update:function(){if(!this._map._animatingZoom||!this._bounds){this._drawnLayers={},Se.prototype._update.call(this);var t=this._bounds,e=this._container,i=t.getSize(),n=et?2:1;setPosition(e,t.min),e.width=n*i.x,e.height=n*i.y,e.style.width=i.x+"px",e.style.height=i.y+"px",et&&this._ctx.scale(2,2),this._ctx.translate(-t.min.x,-t.min.y),this.fire("update")}},_reset:function(){Se.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(t){this._updateDashArray(t),this._layers[stamp(t)]=t;var e=t._order={layer:t,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=e),this._drawLast=e,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(t){this._requestRedraw(t)},_removePath:function(t){var e=t._order,i=e.next,n=e.prev;i?i.prev=n:this._drawLast=n,n?n.next=i:this._drawFirst=i,delete t._order,delete this._layers[L.stamp(t)],this._requestRedraw(t)},_updatePath:function(t){this._extendRedrawBounds(t),t._project(),t._update(),this._requestRedraw(t)},_updateStyle:function(t){this._updateDashArray(t),this._requestRedraw(t)},_updateDashArray:function(t){if(t.options.dashArray){var e,i=t.options.dashArray.split(","),n=[];for(e=0;e<i.length;e++)n.push(Number(i[e]));t.options._dashArray=n}},_requestRedraw:function(t){this._map&&(this._extendRedrawBounds(t),this._redrawRequest=this._redrawRequest||requestAnimFrame(this._redraw,this))},_extendRedrawBounds:function(t){if(t._pxBounds){var e=(t.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Bounds,this._redrawBounds.extend(t._pxBounds.min.subtract([e,e])),this._redrawBounds.extend(t._pxBounds.max.add([e,e]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var t=this._redrawBounds;if(t){var e=t.getSize();this._ctx.clearRect(t.min.x,t.min.y,e.x,e.y)}else this._ctx.clearRect(0,0,this._container.width,this._container.height)},_draw:function(){var t,e=this._redrawBounds;if(this._ctx.save(),e){var i=e.getSize();this._ctx.beginPath(),this._ctx.rect(e.min.x,e.min.y,i.x,i.y),this._ctx.clip()}this._drawing=!0;for(var n=this._drawFirst;n;n=n.next)t=n.layer,(!e||t._pxBounds&&t._pxBounds.intersects(e))&&t._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(t,e){if(this._drawing){var i,n,a,r,o=t._parts,s=o.length,l=this._ctx;if(s){for(this._drawnLayers[t._leaflet_id]=t,l.beginPath(),i=0;i<s;i++){for(n=0,a=o[i].length;n<a;n++)r=o[i][n],l[n?"lineTo":"moveTo"](r.x,r.y);e&&l.closePath()}this._fillStroke(l,t)}}},_updateCircle:function(t){if(this._drawing&&!t._empty()){var e=t._point,i=this._ctx,n=Math.max(Math.round(t._radius),1),a=(Math.max(Math.round(t._radiusY),1)||n)/n;this._drawnLayers[t._leaflet_id]=t,1!==a&&(i.save(),i.scale(1,a)),i.beginPath(),i.arc(e.x,e.y/a,n,0,2*Math.PI,!1),1!==a&&i.restore(),this._fillStroke(i,t)}},_fillStroke:function(t,e){var i=e.options;i.fill&&(t.globalAlpha=i.fillOpacity,t.fillStyle=i.fillColor||i.color,t.fill(i.fillRule||"evenodd")),i.stroke&&0!==i.weight&&(t.setLineDash&&t.setLineDash(e.options&&e.options._dashArray||[]),t.globalAlpha=i.opacity,t.lineWidth=i.weight,t.strokeStyle=i.color,t.lineCap=i.lineCap,t.lineJoin=i.lineJoin,t.stroke())},_onClick:function(t){for(var e,i,n=this._map.mouseEventToLayerPoint(t),a=this._drawFirst;a;a=a.next)e=a.layer,e.options.interactive&&e._containsPoint(n)&&!this._map._draggableMoved(e)&&(i=e);i&&(fakeStop(t),this._fireEvent([i],t))},_onMouseMove:function(t){if(this._map&&!this._map.dragging.moving()&&!this._map._animatingZoom){var e=this._map.mouseEventToLayerPoint(t);this._handleMouseHover(t,e)}},_handleMouseOut:function(t){var e=this._hoveredLayer;e&&(removeClass(this._container,"leaflet-interactive"),this._fireEvent([e],t,"mouseout"),this._hoveredLayer=null)},_handleMouseHover:function(t,e){for(var i,n,a=this._drawFirst;a;a=a.next)i=a.layer,i.options.interactive&&i._containsPoint(e)&&(n=i);n!==this._hoveredLayer&&(this._handleMouseOut(t),n&&(addClass(this._container,"leaflet-interactive"),this._fireEvent([n],t,"mouseover"),this._hoveredLayer=n)),this._hoveredLayer&&this._fireEvent([this._hoveredLayer],t)},_fireEvent:function(t,e,i){this._map._fireDOMEvent(e,i||e.type,t)},_bringToFront:function(t){var e=t._order,i=e.next,n=e.prev;i&&(i.prev=n,n?n.next=i:i&&(this._drawFirst=i),e.prev=this._drawLast,this._drawLast.next=e,e.next=null,this._drawLast=e,this._requestRedraw(t))},_bringToBack:function(t){var e=t._order,i=e.next,n=e.prev;n&&(n.next=i,i?i.prev=n:n&&(this._drawLast=n),e.prev=null,e.next=this._drawFirst,this._drawFirst.prev=e,this._drawFirst=e,this._requestRedraw(t))}}),Be=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(t){return document.createElement("<lvml:"+t+' class="lvml">')}}catch(t){return function(t){return document.createElement("<"+t+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}}(),De={_initContainer:function(){this._container=create$1("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Se.prototype._update.call(this),this.fire("update"))},_initPath:function(t){var e=t._container=Be("shape");addClass(e,"leaflet-vml-shape "+(this.options.className||"")),e.coordsize="1 1",t._path=Be("path"),e.appendChild(t._path),this._updateStyle(t),this._layers[stamp(t)]=t},_addPath:function(t){var e=t._container;this._container.appendChild(e),t.options.interactive&&t.addInteractiveTarget(e)},_removePath:function(t){var e=t._container;remove(e),t.removeInteractiveTarget(e),delete this._layers[stamp(t)]},_updateStyle:function(t){var e=t._stroke,i=t._fill,n=t.options,a=t._container;a.stroked=!!n.stroke,a.filled=!!n.fill,n.stroke?(e||(e=t._stroke=Be("stroke")),a.appendChild(e),e.weight=n.weight+"px",e.color=n.color,e.opacity=n.opacity,n.dashArray?e.dashStyle=o(n.dashArray)?n.dashArray.join(" "):n.dashArray.replace(/( *, *)/g," "):e.dashStyle="",e.endcap=n.lineCap.replace("butt","flat"),e.joinstyle=n.lineJoin):e&&(a.removeChild(e),t._stroke=null),n.fill?(i||(i=t._fill=Be("fill")),a.appendChild(i),i.color=n.fillColor||n.color,i.opacity=n.fillOpacity):i&&(a.removeChild(i),t._fill=null)},_updateCircle:function(t){var e=t._point.round(),i=Math.round(t._radius),n=Math.round(t._radiusY||i);this._setPath(t,t._empty()?"M0 0":"AL "+e.x+","+e.y+" "+i+","+n+" 0,23592600")},_setPath:function(t,e){t._path.v=e},_bringToFront:function(t){toFront(t._container)},_bringToBack:function(t){toBack(t._container)}},Ie=at?Be:svgCreate,ze=Se.extend({getEvents:function(){var t=Se.prototype.getEvents.call(this);return t.zoomstart=this._onZoomStart,t},_initContainer:function(){this._container=Ie("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=Ie("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){remove(this._container),off(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_onZoomStart:function(){this._update()},_update:function(){if(!this._map._animatingZoom||!this._bounds){Se.prototype._update.call(this);var t=this._bounds,e=t.getSize(),i=this._container;this._svgSize&&this._svgSize.equals(e)||(this._svgSize=e,i.setAttribute("width",e.x),i.setAttribute("height",e.y)),setPosition(i,t.min),i.setAttribute("viewBox",[t.min.x,t.min.y,e.x,e.y].join(" ")),this.fire("update")}},_initPath:function(t){var e=t._path=Ie("path");t.options.className&&addClass(e,t.options.className),t.options.interactive&&addClass(e,"leaflet-interactive"),this._updateStyle(t),this._layers[stamp(t)]=t},_addPath:function(t){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(t._path),t.addInteractiveTarget(t._path)},_removePath:function(t){remove(t._path),t.removeInteractiveTarget(t._path),delete this._layers[stamp(t)]},_updatePath:function(t){t._project(),t._update()},_updateStyle:function(t){var e=t._path,i=t.options;e&&(i.stroke?(e.setAttribute("stroke",i.color),e.setAttribute("stroke-opacity",i.opacity),e.setAttribute("stroke-width",i.weight),e.setAttribute("stroke-linecap",i.lineCap),e.setAttribute("stroke-linejoin",i.lineJoin),i.dashArray?e.setAttribute("stroke-dasharray",i.dashArray):e.removeAttribute("stroke-dasharray"),i.dashOffset?e.setAttribute("stroke-dashoffset",i.dashOffset):e.removeAttribute("stroke-dashoffset")):e.setAttribute("stroke","none"),i.fill?(e.setAttribute("fill",i.fillColor||i.color),e.setAttribute("fill-opacity",i.fillOpacity),e.setAttribute("fill-rule",i.fillRule||"evenodd")):e.setAttribute("fill","none"))},_updatePoly:function(t,e){this._setPath(t,pointsToPath(t._parts,e))},_updateCircle:function(t){var e=t._point,i=Math.max(Math.round(t._radius),1),n=Math.max(Math.round(t._radiusY),1)||i,a="a"+i+","+n+" 0 1,0 ",r=t._empty()?"M0 0":"M"+(e.x-i)+","+e.y+a+2*i+",0 "+a+2*-i+",0 ";this._setPath(t,r)},_setPath:function(t,e){t._path.setAttribute("d",e)},_bringToFront:function(t){toFront(t._path)},_bringToBack:function(t){toBack(t._path)}});at&&ze.include(De),Mt.include({getRenderer:function(t){var e=t.options.renderer||this._getPaneRenderer(t.options.pane)||this.options.renderer||this._renderer;return e||(e=this._renderer=this.options.preferCanvas&&canvas$1()||svg$1()),this.hasLayer(e)||this.addLayer(e),e},_getPaneRenderer:function(t){if("overlayPane"===t||void 0===t)return!1;var e=this._paneRenderers[t];return void 0===e&&(e=ze&&svg$1({pane:t})||Ee&&canvas$1({pane:t}),this._paneRenderers[t]=e),e}});var Re=fe.extend({initialize:function(t,e){fe.prototype.initialize.call(this,this._boundsToLatLngs(t),e)},setBounds:function(t){return this.setLatLngs(this._boundsToLatLngs(t))},_boundsToLatLngs:function(t){return t=toLatLngBounds(t),[t.getSouthWest(),t.getNorthWest(),t.getNorthEast(),t.getSouthEast()]}});ze.create=Ie,ze.pointsToPath=pointsToPath,ge.geometryToLayer=geometryToLayer,ge.coordsToLatLng=coordsToLatLng,ge.coordsToLatLngs=coordsToLatLngs,ge.latLngToCoords=latLngToCoords,ge.latLngsToCoords=latLngsToCoords,ge.getFeature=getFeature,ge.asFeature=asFeature,Mt.mergeOptions({boxZoom:!0});var Oe=Zt.extend({initialize:function(t){this._map=t,this._container=t._container,this._pane=t._panes.overlayPane,this._resetStateTimeout=0,t.on("unload",this._destroy,this)},addHooks:function(){on(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){off(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){remove(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){0!==this._resetStateTimeout&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(t){if(!t.shiftKey||1!==t.which&&1!==t.button)return!1;this._clearDeferredResetState(),this._resetState(),x(),disableImageDrag(),this._startPoint=this._map.mouseEventToContainerPoint(t),on(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(t){this._moved||(this._moved=!0,this._box=create$1("div","leaflet-zoom-box",this._container),addClass(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(t);var e=new Bounds(this._point,this._startPoint),i=e.getSize();setPosition(this._box,e.min),this._box.style.width=i.x+"px",this._box.style.height=i.y+"px"},_finish:function(){this._moved&&(remove(this._box),removeClass(this._container,"leaflet-crosshair")),b(),enableImageDrag(),off(document,{contextmenu:stop,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(t){if((1===t.which||1===t.button)&&(this._finish(),this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(bind(this._resetState,this),0);var e=new LatLngBounds(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(e).fire("boxzoomend",{boxZoomBounds:e})}},_onKeyDown:function(t){27===t.keyCode&&this._finish()}});Mt.addInitHook("addHandler","boxZoom",Oe),Mt.mergeOptions({doubleClickZoom:!0});var Fe=Zt.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(t){var e=this._map,i=e.getZoom(),n=e.options.zoomDelta,a=t.originalEvent.shiftKey?i-n:i+n;"center"===e.options.doubleClickZoom?e.setZoom(a):e.setZoomAround(t.containerPoint,a)}});Mt.addInitHook("addHandler","doubleClickZoom",Fe),Mt.mergeOptions({dragging:!0,inertia:!D,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Ne=Zt.extend({addHooks:function(){if(!this._draggable){var t=this._map;this._draggable=new Gt(t._mapPane,t._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),t.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),t.on("zoomend",this._onZoomEnd,this),t.whenReady(this._onZoomEnd,this))}addClass(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){removeClass(this._map._container,"leaflet-grab"),removeClass(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var t=this._map;if(t._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var e=toLatLngBounds(this._map.options.maxBounds);this._offsetLimit=toBounds(this._map.latLngToContainerPoint(e.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(e.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;t.fire("movestart").fire("dragstart"),t.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(t){if(this._map.options.inertia){var e=this._lastTime=+new Date,i=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(i),this._times.push(e),this._prunePositions(e)}this._map.fire("move",t).fire("drag",t)},_prunePositions:function(t){for(;this._positions.length>1&&t-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var t=this._map.getSize().divideBy(2),e=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=e.subtract(t).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(t,e){return t-(t-e)*this._viscosity},_onPreDragLimit:function(){if(this._viscosity&&this._offsetLimit){var t=this._draggable._newPos.subtract(this._draggable._startPos),e=this._offsetLimit;t.x<e.min.x&&(t.x=this._viscousLimit(t.x,e.min.x)),t.y<e.min.y&&(t.y=this._viscousLimit(t.y,e.min.y)),t.x>e.max.x&&(t.x=this._viscousLimit(t.x,e.max.x)),t.y>e.max.y&&(t.y=this._viscousLimit(t.y,e.max.y)),this._draggable._newPos=this._draggable._startPos.add(t)}},_onPreDragWrap:function(){var t=this._worldWidth,e=Math.round(t/2),i=this._initialWorldOffset,n=this._draggable._newPos.x,a=(n-e+i)%t+e-i,r=(n+e+i)%t-e-i,o=Math.abs(a+i)<Math.abs(r+i)?a:r;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=o},_onDragEnd:function(t){var e=this._map,i=e.options,n=!i.inertia||this._times.length<2;if(e.fire("dragend",t),n)e.fire("moveend");else{this._prunePositions(+new Date);var a=this._lastPos.subtract(this._positions[0]),r=(this._lastTime-this._times[0])/1e3,o=i.easeLinearity,s=a.multiplyBy(o/r),l=s.distanceTo([0,0]),u=Math.min(i.inertiaMaxSpeed,l),c=s.multiplyBy(u/l),d=u/(i.inertiaDeceleration*o),h=c.multiplyBy(-d/2).round();h.x||h.y?(h=e._limitOffset(h,e.options.maxBounds),requestAnimFrame(function(){e.panBy(h,{duration:d,easeLinearity:o,noMoveStart:!0,animate:!0})})):e.fire("moveend")}}});Mt.addInitHook("addHandler","dragging",Ne),Mt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Ze=Zt.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(t){this._map=t,this._setPanDelta(t.options.keyboardPanDelta),this._setZoomDelta(t.options.zoomDelta)},addHooks:function(){var t=this._map._container;t.tabIndex<=0&&(t.tabIndex="0"),on(t,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),off(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var t=document.body,e=document.documentElement,i=t.scrollTop||e.scrollTop,n=t.scrollLeft||e.scrollLeft;this._map._container.focus(),window.scrollTo(n,i)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(t){var e,i,n=this._panKeys={},a=this.keyCodes;for(e=0,i=a.left.length;e<i;e++)n[a.left[e]]=[-1*t,0];for(e=0,i=a.right.length;e<i;e++)n[a.right[e]]=[t,0];for(e=0,i=a.down.length;e<i;e++)n[a.down[e]]=[0,t];for(e=0,i=a.up.length;e<i;e++)n[a.up[e]]=[0,-1*t]},_setZoomDelta:function(t){var e,i,n=this._zoomKeys={},a=this.keyCodes;for(e=0,i=a.zoomIn.length;e<i;e++)n[a.zoomIn[e]]=t;for(e=0,i=a.zoomOut.length;e<i;e++)n[a.zoomOut[e]]=-t},_addHooks:function(){on(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){off(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(t){if(!(t.altKey||t.ctrlKey||t.metaKey)){var e,i=t.keyCode,n=this._map;if(i in this._panKeys){if(n._panAnim&&n._panAnim._inProgress)return;e=this._panKeys[i],t.shiftKey&&(e=toPoint(e).multiplyBy(3)),n.panBy(e),n.options.maxBounds&&n.panInsideBounds(n.options.maxBounds)}else if(i in this._zoomKeys)n.setZoom(n.getZoom()+(t.shiftKey?3:1)*this._zoomKeys[i]);else{if(27!==i||!n._popup||!n._popup.options.closeOnEscapeKey)return;n.closePopup()}stop(t)}}});Mt.addInitHook("addHandler","keyboard",Ze),Mt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xe=Zt.extend({addHooks:function(){on(this._map._container,"mousewheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){off(this._map._container,"mousewheel",this._onWheelScroll,this)},_onWheelScroll:function(t){var e=getWheelDelta(t),i=this._map.options.wheelDebounceTime;this._delta+=e,this._lastMousePos=this._map.mouseEventToContainerPoint(t),this._startTime||(this._startTime=+new Date);var n=Math.max(i-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(bind(this._performZoom,this),n),stop(t)},_performZoom:function(){var t=this._map,e=t.getZoom(),i=this._map.options.zoomSnap||0;t._stop();var n=this._delta/(4*this._map.options.wheelPxPerZoomLevel),a=4*Math.log(2/(1+Math.exp(-Math.abs(n))))/Math.LN2,r=i?Math.ceil(a/i)*i:a,o=t._limitZoom(e+(this._delta>0?r:-r))-e;this._delta=0,this._startTime=null,o&&("center"===t.options.scrollWheelZoom?t.setZoom(e+o):t.setZoomAround(this._lastMousePos,e+o))}});Mt.addInitHook("addHandler","scrollWheelZoom",Xe),Mt.mergeOptions({tap:!0,tapTolerance:15});var qe=Zt.extend({addHooks:function(){on(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){off(this._map._container,"touchstart",this._onDown,this)},_onDown:function(t){if(t.touches){if(preventDefault(t),this._fireClick=!0,t.touches.length>1)return this._fireClick=!1,void clearTimeout(this._holdTimeout);var e=t.touches[0],i=e.target;this._startPos=this._newPos=new Point(e.clientX,e.clientY),i.tagName&&"a"===i.tagName.toLowerCase()&&addClass(i,"leaflet-active"),this._holdTimeout=setTimeout(bind(function(){this._isTapValid()&&(this._fireClick=!1,this._onUp(),this._simulateEvent("contextmenu",e))},this),1e3),this._simulateEvent("mousedown",e),on(document,{touchmove:this._onMove,touchend:this._onUp},this)}},_onUp:function(t){if(clearTimeout(this._holdTimeout),off(document,{touchmove:this._onMove,touchend:this._onUp},this),this._fireClick&&t&&t.changedTouches){var e=t.changedTouches[0],i=e.target;i&&i.tagName&&"a"===i.tagName.toLowerCase()&&removeClass(i,"leaflet-active"),this._simulateEvent("mouseup",e),this._isTapValid()&&this._simulateEvent("click",e)}},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_onMove:function(t){var e=t.touches[0];this._newPos=new Point(e.clientX,e.clientY),this._simulateEvent("mousemove",e)},_simulateEvent:function(t,e){var i=document.createEvent("MouseEvents");i._simulated=!0,e.target._simulatedClick=!0,i.initMouseEvent(t,!0,!0,window,1,e.screenX,e.screenY,e.clientX,e.clientY,!1,!1,!1,!1,0,null),e.target.dispatchEvent(i)}});J&&!$&&Mt.addInitHook("addHandler","tap",qe),Mt.mergeOptions({touchZoom:J&&!D,bounceAtZoomLimits:!0});var je=Zt.extend({addHooks:function(){addClass(this._map._container,"leaflet-touch-zoom"),on(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){removeClass(this._map._container,"leaflet-touch-zoom"),off(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(t){var e=this._map;if(t.touches&&2===t.touches.length&&!e._animatingZoom&&!this._zooming){var i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]);this._centerPoint=e.getSize()._divideBy(2),this._startLatLng=e.containerPointToLatLng(this._centerPoint),"center"!==e.options.touchZoom&&(this._pinchStartLatLng=e.containerPointToLatLng(i.add(n)._divideBy(2))),this._startDist=i.distanceTo(n),this._startZoom=e.getZoom(),this._moved=!1,this._zooming=!0,e._stop(),on(document,"touchmove",this._onTouchMove,this),on(document,"touchend",this._onTouchEnd,this),preventDefault(t)}},_onTouchMove:function(t){if(t.touches&&2===t.touches.length&&this._zooming){var e=this._map,i=e.mouseEventToContainerPoint(t.touches[0]),n=e.mouseEventToContainerPoint(t.touches[1]),a=i.distanceTo(n)/this._startDist;if(this._zoom=e.getScaleZoom(a,this._startZoom),!e.options.bounceAtZoomLimits&&(this._zoom<e.getMinZoom()&&a<1||this._zoom>e.getMaxZoom()&&a>1)&&(this._zoom=e._limitZoom(this._zoom)),"center"===e.options.touchZoom){if(this._center=this._startLatLng,1===a)return}else{var r=i._add(n)._divideBy(2)._subtract(this._centerPoint);if(1===a&&0===r.x&&0===r.y)return;this._center=e.unproject(e.project(this._pinchStartLatLng,this._zoom).subtract(r),this._zoom)}this._moved||(e._moveStart(!0,!1),this._moved=!0),cancelAnimFrame(this._animRequest);var o=bind(e._move,e,this._center,this._zoom,{pinch:!0,round:!1});this._animRequest=requestAnimFrame(o,this,!0),preventDefault(t)}},_onTouchEnd:function(){if(!this._moved||!this._zooming)return void(this._zooming=!1);this._zooming=!1,cancelAnimFrame(this._animRequest),off(document,"touchmove",this._onTouchMove),off(document,"touchend",this._onTouchEnd),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Mt.addInitHook("addHandler","touchZoom",je),Mt.BoxZoom=Oe,Mt.DoubleClickZoom=Fe,Mt.Drag=Ne,Mt.Keyboard=Ze,Mt.ScrollWheelZoom=Xe,Mt.Tap=qe,Mt.TouchZoom=je;var We=window.L;window.L=t,Object.freeze=e,t.version="1.3.1",t.noConflict=noConflict,t.Control=St,t.control=Et,t.Browser=rt,t.Evented=f,t.Mixin=qt,t.Util=h,t.Class=Class,t.Handler=Zt,t.extend=extend,t.bind=bind,t.stamp=stamp,t.setOptions=setOptions,t.DomEvent=xt,t.DomUtil=At,t.PosAnimation=Pt,t.Draggable=Gt,t.LineUtil=Vt,t.PolyUtil=Ht,t.Point=Point,t.point=toPoint,t.Bounds=Bounds,t.bounds=toBounds,t.Transformation=Transformation,t.transformation=toTransformation,t.Projection=$t,t.LatLng=LatLng,t.latLng=toLatLng,t.LatLngBounds=LatLngBounds,t.latLngBounds=toLatLngBounds,t.CRS=_,t.GeoJSON=ge,t.geoJSON=geoJSON,t.geoJson=me,t.Layer=ee,t.LayerGroup=ie,t.layerGroup=ne,t.FeatureGroup=ae,t.featureGroup=re,t.ImageOverlay=ye,t.imageOverlay=ve,t.VideoOverlay=xe,t.videoOverlay=videoOverlay,t.DivOverlay=be,t.Popup=we,t.popup=Le,t.Tooltip=Te,t.tooltip=ke,t.Icon=oe,t.icon=icon,t.DivIcon=Ce,t.divIcon=divIcon,t.Marker=ue,t.marker=marker,t.TileLayer=Pe,t.tileLayer=tileLayer,t.GridLayer=Ae,t.gridLayer=gridLayer,t.SVG=ze,t.svg=svg$1,t.Renderer=Se,t.Canvas=Ee,t.canvas=canvas$1,t.Path=ce,t.CircleMarker=de,t.circleMarker=circleMarker,t.Circle=he,t.circle=circle,t.Polyline=pe,t.polyline=polyline,t.Polygon=fe,t.polygon=polygon,t.Rectangle=Re,t.rectangle=rectangle,t.Map=Mt,t.map=createMap})},function(t,e,i){!function(t,i){i(e)}(0,function(t){"use strict";var e=L.MarkerClusterGroup=L.FeatureGroup.extend({options:{maxClusterRadius:80,iconCreateFunction:null,clusterPane:L.Marker.prototype.options.pane,spiderfyOnMaxZoom:!0,showCoverageOnHover:!0,zoomToBoundsOnClick:!0,singleMarkerMode:!1,disableClusteringAtZoom:null,removeOutsideVisibleBounds:!0,animate:!0,animateAddingMarkers:!1,spiderfyDistanceMultiplier:1,spiderLegPolylineOptions:{weight:1.5,color:"#222",opacity:.5},chunkedLoading:!1,chunkInterval:200,chunkDelay:50,chunkProgress:null,polygonOptions:{}},initialize:function(t){L.Util.setOptions(this,t),this.options.iconCreateFunction||(this.options.iconCreateFunction=this._defaultIconCreateFunction),this._featureGroup=L.featureGroup(),this._featureGroup.addEventParent(this),this._nonPointGroup=L.featureGroup(),this._nonPointGroup.addEventParent(this),this._inZoomAnimation=0,this._needsClustering=[],this._needsRemoving=[],this._currentShownBounds=null,this._queue=[],this._childMarkerEventHandlers={dragstart:this._childMarkerDragStart,move:this._childMarkerMoved,dragend:this._childMarkerDragEnd};var e=L.DomUtil.TRANSITION&&this.options.animate;L.extend(this,e?this._withAnimation:this._noAnimation),this._markerCluster=e?L.MarkerCluster:L.MarkerClusterNonAnimated},addLayer:function(t){if(t instanceof L.LayerGroup)return this.addLayers([t]);if(!t.getLatLng)return this._nonPointGroup.addLayer(t),this.fire("layeradd",{layer:t}),this;if(!this._map)return this._needsClustering.push(t),this.fire("layeradd",{layer:t}),this;if(this.hasLayer(t))return this;this._unspiderfy&&this._unspiderfy(),this._addLayer(t,this._maxZoom),this.fire("layeradd",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons();var e=t,i=this._zoom;if(t.__parent)for(;e.__parent._zoom>=i;)e=e.__parent;return this._currentShownBounds.contains(e.getLatLng())&&(this.options.animateAddingMarkers?this._animationAddLayer(t,e):this._animationAddLayerNonAnimated(t,e)),this},removeLayer:function(t){return t instanceof L.LayerGroup?this.removeLayers([t]):t.getLatLng?this._map?t.__parent?(this._unspiderfy&&(this._unspiderfy(),this._unspiderfyLayer(t)),this._removeLayer(t,!0),this.fire("layerremove",{layer:t}),this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),t.off(this._childMarkerEventHandlers,this),this._featureGroup.hasLayer(t)&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow()),this):this:(!this._arraySplice(this._needsClustering,t)&&this.hasLayer(t)&&this._needsRemoving.push({layer:t,latlng:t._latlng}),this.fire("layerremove",{layer:t}),this):(this._nonPointGroup.removeLayer(t),this.fire("layerremove",{layer:t}),this)},addLayers:function(t,e){if(!L.Util.isArray(t))return this.addLayer(t);var i,n=this._featureGroup,a=this._nonPointGroup,r=this.options.chunkedLoading,o=this.options.chunkInterval,s=this.options.chunkProgress,l=t.length,u=0,c=!0;if(this._map){var d=(new Date).getTime(),h=L.bind(function(){for(var p=(new Date).getTime();u<l;u++){if(r&&u%200==0){if((new Date).getTime()-p>o)break}if((i=t[u])instanceof L.LayerGroup)c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),l=t.length;else if(i.getLatLng){if(!this.hasLayer(i)&&(this._addLayer(i,this._maxZoom),e||this.fire("layeradd",{layer:i}),i.__parent&&2===i.__parent.getChildCount())){var f=i.__parent.getAllChildMarkers(),g=f[0]===i?f[1]:f[0];n.removeLayer(g)}}else a.addLayer(i),e||this.fire("layeradd",{layer:i})}s&&s(u,l,(new Date).getTime()-d),u===l?(this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds)):setTimeout(h,this.options.chunkDelay)},this);h()}else for(var p=this._needsClustering;u<l;u++)i=t[u],i instanceof L.LayerGroup?(c&&(t=t.slice(),c=!1),this._extractNonGroupLayers(i,t),l=t.length):i.getLatLng?this.hasLayer(i)||p.push(i):a.addLayer(i);return this},removeLayers:function(t){var e,i,n=t.length,a=this._featureGroup,r=this._nonPointGroup,o=!0;if(!this._map){for(e=0;e<n;e++)i=t[e],i instanceof L.LayerGroup?(o&&(t=t.slice(),o=!1),this._extractNonGroupLayers(i,t),n=t.length):(this._arraySplice(this._needsClustering,i),r.removeLayer(i),this.hasLayer(i)&&this._needsRemoving.push({layer:i,latlng:i._latlng}),this.fire("layerremove",{layer:i}));return this}if(this._unspiderfy){this._unspiderfy();var s=t.slice(),l=n;for(e=0;e<l;e++)i=s[e],i instanceof L.LayerGroup?(this._extractNonGroupLayers(i,s),l=s.length):this._unspiderfyLayer(i)}for(e=0;e<n;e++)i=t[e],i instanceof L.LayerGroup?(o&&(t=t.slice(),o=!1),this._extractNonGroupLayers(i,t),n=t.length):i.__parent?(this._removeLayer(i,!0,!0),this.fire("layerremove",{layer:i}),a.hasLayer(i)&&(a.removeLayer(i),i.clusterShow&&i.clusterShow())):(r.removeLayer(i),this.fire("layerremove",{layer:i}));return this._topClusterLevel._recalculateBounds(),this._refreshClustersIcons(),this._topClusterLevel._recursivelyAddChildrenToMap(null,this._zoom,this._currentShownBounds),this},clearLayers:function(){return this._map||(this._needsClustering=[],delete this._gridClusters,delete this._gridUnclustered),this._noanimationUnspiderfy&&this._noanimationUnspiderfy(),this._featureGroup.clearLayers(),this._nonPointGroup.clearLayers(),this.eachLayer(function(t){t.off(this._childMarkerEventHandlers,this),delete t.__parent},this),this._map&&this._generateInitialClusters(),this},getBounds:function(){var t=new L.LatLngBounds;this._topClusterLevel&&t.extend(this._topClusterLevel._bounds);for(var e=this._needsClustering.length-1;e>=0;e--)t.extend(this._needsClustering[e].getLatLng());return t.extend(this._nonPointGroup.getBounds()),t},eachLayer:function(t,e){var i,n,a,r=this._needsClustering.slice(),o=this._needsRemoving;for(this._topClusterLevel&&this._topClusterLevel.getAllChildMarkers(r),n=r.length-1;n>=0;n--){for(i=!0,a=o.length-1;a>=0;a--)if(o[a].layer===r[n]){i=!1;break}i&&t.call(e,r[n])}this._nonPointGroup.eachLayer(t,e)},getLayers:function(){var t=[];return this.eachLayer(function(e){t.push(e)}),t},getLayer:function(t){var e=null;return t=parseInt(t,10),this.eachLayer(function(i){L.stamp(i)===t&&(e=i)}),e},hasLayer:function(t){if(!t)return!1;var e,i=this._needsClustering;for(e=i.length-1;e>=0;e--)if(i[e]===t)return!0;for(i=this._needsRemoving,e=i.length-1;e>=0;e--)if(i[e].layer===t)return!1;return!(!t.__parent||t.__parent._group!==this)||this._nonPointGroup.hasLayer(t)},zoomToShowLayer:function(t,e){"function"!=typeof e&&(e=function(){});var i=function(){!t._icon&&!t.__parent._icon||this._inZoomAnimation||(this._map.off("moveend",i,this),this.off("animationend",i,this),t._icon?e():t.__parent._icon&&(this.once("spiderfied",e,this),t.__parent.spiderfy()))};t._icon&&this._map.getBounds().contains(t.getLatLng())?e():t.__parent._zoom<Math.round(this._map._zoom)?(this._map.on("moveend",i,this),this._map.panTo(t.getLatLng())):(this._map.on("moveend",i,this),this.on("animationend",i,this),t.__parent.zoomToBounds())},onAdd:function(t){this._map=t;var e,i,n;if(!isFinite(this._map.getMaxZoom()))throw"Map has no maxZoom specified";for(this._featureGroup.addTo(t),this._nonPointGroup.addTo(t),this._gridClusters||this._generateInitialClusters(),this._maxLat=t.options.crs.projection.MAX_LATITUDE,e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],n.newlatlng=n.layer._latlng,n.layer._latlng=n.latlng;for(e=0,i=this._needsRemoving.length;e<i;e++)n=this._needsRemoving[e],this._removeLayer(n.layer,!0),n.layer._latlng=n.newlatlng;this._needsRemoving=[],this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds(),this._map.on("zoomend",this._zoomEnd,this),this._map.on("moveend",this._moveEnd,this),this._spiderfierOnAdd&&this._spiderfierOnAdd(),this._bindEvents(),i=this._needsClustering,this._needsClustering=[],this.addLayers(i,!0)},onRemove:function(t){t.off("zoomend",this._zoomEnd,this),t.off("moveend",this._moveEnd,this),this._unbindEvents(),this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim",""),this._spiderfierOnRemove&&this._spiderfierOnRemove(),delete this._maxLat,this._hideCoverage(),this._featureGroup.remove(),this._nonPointGroup.remove(),this._featureGroup.clearLayers(),this._map=null},getVisibleParent:function(t){for(var e=t;e&&!e._icon;)e=e.__parent;return e||null},_arraySplice:function(t,e){for(var i=t.length-1;i>=0;i--)if(t[i]===e)return t.splice(i,1),!0},_removeFromGridUnclustered:function(t,e){for(var i=this._map,n=this._gridUnclustered,a=Math.floor(this._map.getMinZoom());e>=a&&n[e].removeObject(t,i.project(t.getLatLng(),e));e--);},_childMarkerDragStart:function(t){t.target.__dragStart=t.target._latlng},_childMarkerMoved:function(t){if(!this._ignoreMove&&!t.target.__dragStart){var e=t.target._popup&&t.target._popup.isOpen();this._moveChild(t.target,t.oldLatLng,t.latlng),e&&t.target.openPopup()}},_moveChild:function(t,e,i){t._latlng=e,this.removeLayer(t),t._latlng=i,this.addLayer(t)},_childMarkerDragEnd:function(t){t.target.__dragStart&&this._moveChild(t.target,t.target.__dragStart,t.target._latlng),delete t.target.__dragStart},_removeLayer:function(t,e,i){var n=this._gridClusters,a=this._gridUnclustered,r=this._featureGroup,o=this._map,s=Math.floor(this._map.getMinZoom());e&&this._removeFromGridUnclustered(t,this._maxZoom);var l,u=t.__parent,c=u._markers;for(this._arraySplice(c,t);u&&(u._childCount--,u._boundsNeedUpdate=!0,!(u._zoom<s));)e&&u._childCount<=1?(l=u._markers[0]===t?u._markers[1]:u._markers[0],n[u._zoom].removeObject(u,o.project(u._cLatLng,u._zoom)),a[u._zoom].addObject(l,o.project(l.getLatLng(),u._zoom)),this._arraySplice(u.__parent._childClusters,u),u.__parent._markers.push(l),l.__parent=u.__parent,u._icon&&(r.removeLayer(u),i||r.addLayer(l))):u._iconNeedsUpdate=!0,u=u.__parent;delete t.__parent},_isOrIsParent:function(t,e){for(;e;){if(t===e)return!0;e=e.parentNode}return!1},fire:function(t,e,i){if(e&&e.layer instanceof L.MarkerCluster){if(e.originalEvent&&this._isOrIsParent(e.layer._icon,e.originalEvent.relatedTarget))return;t="cluster"+t}L.FeatureGroup.prototype.fire.call(this,t,e,i)},listens:function(t,e){return L.FeatureGroup.prototype.listens.call(this,t,e)||L.FeatureGroup.prototype.listens.call(this,"cluster"+t,e)},_defaultIconCreateFunction:function(t){var e=t.getChildCount(),i=" marker-cluster-";return i+=e<10?"small":e<100?"medium":"large",new L.DivIcon({html:"<div><span>"+e+"</span></div>",className:"marker-cluster"+i,iconSize:new L.Point(40,40)})},_bindEvents:function(){var t=this._map,e=this.options.spiderfyOnMaxZoom,i=this.options.showCoverageOnHover,n=this.options.zoomToBoundsOnClick;(e||n)&&this.on("clusterclick",this._zoomOrSpiderfy,this),i&&(this.on("clustermouseover",this._showCoverage,this),this.on("clustermouseout",this._hideCoverage,this),t.on("zoomend",this._hideCoverage,this))},_zoomOrSpiderfy:function(t){for(var e=t.layer,i=e;1===i._childClusters.length;)i=i._childClusters[0];i._zoom===this._maxZoom&&i._childCount===e._childCount&&this.options.spiderfyOnMaxZoom?e.spiderfy():this.options.zoomToBoundsOnClick&&e.zoomToBounds(),t.originalEvent&&13===t.originalEvent.keyCode&&this._map._container.focus()},_showCoverage:function(t){var e=this._map;this._inZoomAnimation||(this._shownPolygon&&e.removeLayer(this._shownPolygon),t.layer.getChildCount()>2&&t.layer!==this._spiderfied&&(this._shownPolygon=new L.Polygon(t.layer.getConvexHull(),this.options.polygonOptions),e.addLayer(this._shownPolygon)))},_hideCoverage:function(){this._shownPolygon&&(this._map.removeLayer(this._shownPolygon),this._shownPolygon=null)},_unbindEvents:function(){var t=this.options.spiderfyOnMaxZoom,e=this.options.showCoverageOnHover,i=this.options.zoomToBoundsOnClick,n=this._map;(t||i)&&this.off("clusterclick",this._zoomOrSpiderfy,this),e&&(this.off("clustermouseover",this._showCoverage,this),this.off("clustermouseout",this._hideCoverage,this),n.off("zoomend",this._hideCoverage,this))},_zoomEnd:function(){this._map&&(this._mergeSplitClusters(),this._zoom=Math.round(this._map._zoom),this._currentShownBounds=this._getExpandedVisibleBounds())},_moveEnd:function(){if(!this._inZoomAnimation){var t=this._getExpandedVisibleBounds();this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,t),this._topClusterLevel._recursivelyAddChildrenToMap(null,Math.round(this._map._zoom),t),this._currentShownBounds=t}},_generateInitialClusters:function(){var t=Math.ceil(this._map.getMaxZoom()),e=Math.floor(this._map.getMinZoom()),i=this.options.maxClusterRadius,n=i;"function"!=typeof i&&(n=function(){return i}),null!==this.options.disableClusteringAtZoom&&(t=this.options.disableClusteringAtZoom-1),this._maxZoom=t,this._gridClusters={},this._gridUnclustered={};for(var a=t;a>=e;a--)this._gridClusters[a]=new L.DistanceGrid(n(a)),this._gridUnclustered[a]=new L.DistanceGrid(n(a));this._topClusterLevel=new this._markerCluster(this,e-1)},_addLayer:function(t,e){var i,n,a=this._gridClusters,r=this._gridUnclustered,o=Math.floor(this._map.getMinZoom());for(this.options.singleMarkerMode&&this._overrideMarkerIcon(t),t.on(this._childMarkerEventHandlers,this);e>=o;e--){i=this._map.project(t.getLatLng(),e);var s=a[e].getNearObject(i);if(s)return s._addChild(t),void(t.__parent=s);if(s=r[e].getNearObject(i)){var l=s.__parent;l&&this._removeLayer(s,!1);var u=new this._markerCluster(this,e,s,t);a[e].addObject(u,this._map.project(u._cLatLng,e)),s.__parent=u,t.__parent=u;var c=u;for(n=e-1;n>l._zoom;n--)c=new this._markerCluster(this,n,c),a[n].addObject(c,this._map.project(s.getLatLng(),n));return l._addChild(c),void this._removeFromGridUnclustered(s,e)}r[e].addObject(t,i)}this._topClusterLevel._addChild(t),t.__parent=this._topClusterLevel},_refreshClustersIcons:function(){this._featureGroup.eachLayer(function(t){t instanceof L.MarkerCluster&&t._iconNeedsUpdate&&t._updateIcon()})},_enqueue:function(t){this._queue.push(t),this._queueTimeout||(this._queueTimeout=setTimeout(L.bind(this._processQueue,this),300))},_processQueue:function(){for(var t=0;t<this._queue.length;t++)this._queue[t].call(this);this._queue.length=0,clearTimeout(this._queueTimeout),this._queueTimeout=null},_mergeSplitClusters:function(){var t=Math.round(this._map._zoom);this._processQueue(),this._zoom<t&&this._currentShownBounds.intersects(this._getExpandedVisibleBounds())?(this._animationStart(),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),this._zoom,this._getExpandedVisibleBounds()),this._animationZoomIn(this._zoom,t)):this._zoom>t?(this._animationStart(),this._animationZoomOut(this._zoom,t)):this._moveEnd()},_getExpandedVisibleBounds:function(){return this.options.removeOutsideVisibleBounds?L.Browser.mobile?this._checkBoundsMaxLat(this._map.getBounds()):this._checkBoundsMaxLat(this._map.getBounds().pad(1)):this._mapBoundsInfinite},_checkBoundsMaxLat:function(t){var e=this._maxLat;return void 0!==e&&(t.getNorth()>=e&&(t._northEast.lat=1/0),t.getSouth()<=-e&&(t._southWest.lat=-1/0)),t},_animationAddLayerNonAnimated:function(t,e){if(e===t)this._featureGroup.addLayer(t);else if(2===e._childCount){e._addToMap();var i=e.getAllChildMarkers();this._featureGroup.removeLayer(i[0]),this._featureGroup.removeLayer(i[1])}else e._updateIcon()},_extractNonGroupLayers:function(t,e){var i,n=t.getLayers(),a=0;for(e=e||[];a<n.length;a++)i=n[a],i instanceof L.LayerGroup?this._extractNonGroupLayers(i,e):e.push(i);return e},_overrideMarkerIcon:function(t){return t.options.icon=this.options.iconCreateFunction({getChildCount:function(){return 1},getAllChildMarkers:function(){return[t]}})}});L.MarkerClusterGroup.include({_mapBoundsInfinite:new L.LatLngBounds(new L.LatLng(-1/0,-1/0),new L.LatLng(1/0,1/0))}),L.MarkerClusterGroup.include({_noAnimation:{_animationStart:function(){},_animationZoomIn:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationZoomOut:function(t,e){this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this.fire("animationend")},_animationAddLayer:function(t,e){this._animationAddLayerNonAnimated(t,e)}},_withAnimation:{_animationStart:function(){this._map._mapPane.className+=" leaflet-cluster-anim",this._inZoomAnimation++},_animationZoomIn:function(t,e){var i,n=this._getExpandedVisibleBounds(),a=this._featureGroup,r=Math.floor(this._map.getMinZoom());this._ignoreMove=!0,this._topClusterLevel._recursively(n,t,r,function(r){var o,s=r._latlng,l=r._markers;for(n.contains(s)||(s=null),r._isSingleParent()&&t+1===e?(a.removeLayer(r),r._recursivelyAddChildrenToMap(null,e,n)):(r.clusterHide(),r._recursivelyAddChildrenToMap(s,e,n)),i=l.length-1;i>=0;i--)o=l[i],n.contains(o._latlng)||a.removeLayer(o)}),this._forceLayout(),this._topClusterLevel._recursivelyBecomeVisible(n,e),a.eachLayer(function(t){t instanceof L.MarkerCluster||!t._icon||t.clusterShow()}),this._topClusterLevel._recursively(n,t,e,function(t){t._recursivelyRestoreChildPositions(e)}),this._ignoreMove=!1,this._enqueue(function(){this._topClusterLevel._recursively(n,t,r,function(t){a.removeLayer(t),t.clusterShow()}),this._animationEnd()})},_animationZoomOut:function(t,e){this._animationZoomOutSingle(this._topClusterLevel,t-1,e),this._topClusterLevel._recursivelyAddChildrenToMap(null,e,this._getExpandedVisibleBounds()),this._topClusterLevel._recursivelyRemoveChildrenFromMap(this._currentShownBounds,Math.floor(this._map.getMinZoom()),t,this._getExpandedVisibleBounds())},_animationAddLayer:function(t,e){var i=this,n=this._featureGroup;n.addLayer(t),e!==t&&(e._childCount>2?(e._updateIcon(),this._forceLayout(),this._animationStart(),t._setPos(this._map.latLngToLayerPoint(e.getLatLng())),t.clusterHide(),this._enqueue(function(){n.removeLayer(t),t.clusterShow(),i._animationEnd()})):(this._forceLayout(),i._animationStart(),i._animationZoomOutSingle(e,this._map.getMaxZoom(),this._zoom)))}},_animationZoomOutSingle:function(t,e,i){var n=this._getExpandedVisibleBounds(),a=Math.floor(this._map.getMinZoom());t._recursivelyAnimateChildrenInAndAddSelfToMap(n,a,e+1,i);var r=this;this._forceLayout(),t._recursivelyBecomeVisible(n,i),this._enqueue(function(){if(1===t._childCount){var o=t._markers[0];this._ignoreMove=!0,o.setLatLng(o.getLatLng()),this._ignoreMove=!1,o.clusterShow&&o.clusterShow()}else t._recursively(n,i,a,function(t){t._recursivelyRemoveChildrenFromMap(n,a,e+1)});r._animationEnd()})},_animationEnd:function(){this._map&&(this._map._mapPane.className=this._map._mapPane.className.replace(" leaflet-cluster-anim","")),this._inZoomAnimation--,this.fire("animationend")},_forceLayout:function(){L.Util.falseFn(document.body.offsetWidth)}}),L.markerClusterGroup=function(t){return new L.MarkerClusterGroup(t)};var i=L.MarkerCluster=L.Marker.extend({options:L.Icon.prototype.options,initialize:function(t,e,i,n){L.Marker.prototype.initialize.call(this,i?i._cLatLng||i.getLatLng():new L.LatLng(0,0),{icon:this,pane:t.options.clusterPane}),this._group=t,this._zoom=e,this._markers=[],this._childClusters=[],this._childCount=0,this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._bounds=new L.LatLngBounds,i&&this._addChild(i),n&&this._addChild(n)},getAllChildMarkers:function(t){t=t||[];for(var e=this._childClusters.length-1;e>=0;e--)this._childClusters[e].getAllChildMarkers(t);for(var i=this._markers.length-1;i>=0;i--)t.push(this._markers[i]);return t},getChildCount:function(){return this._childCount},zoomToBounds:function(t){for(var e,i=this._childClusters.slice(),n=this._group._map,a=n.getBoundsZoom(this._bounds),r=this._zoom+1,o=n.getZoom();i.length>0&&a>r;){r++;var s=[];for(e=0;e<i.length;e++)s=s.concat(i[e]._childClusters);i=s}a>r?this._group._map.setView(this._latlng,r):a<=o?this._group._map.setView(this._latlng,o+1):this._group._map.fitBounds(this._bounds,t)},getBounds:function(){var t=new L.LatLngBounds;return t.extend(this._bounds),t},_updateIcon:function(){this._iconNeedsUpdate=!0,this._icon&&this.setIcon(this)},createIcon:function(){return this._iconNeedsUpdate&&(this._iconObj=this._group.options.iconCreateFunction(this),this._iconNeedsUpdate=!1),this._iconObj.createIcon()},createShadow:function(){return this._iconObj.createShadow()},_addChild:function(t,e){this._iconNeedsUpdate=!0,this._boundsNeedUpdate=!0,this._setClusterCenter(t),t instanceof L.MarkerCluster?(e||(this._childClusters.push(t),t.__parent=this),this._childCount+=t._childCount):(e||this._markers.push(t),this._childCount++),this.__parent&&this.__parent._addChild(t,!0)},_setClusterCenter:function(t){this._cLatLng||(this._cLatLng=t._cLatLng||t._latlng)},_resetBounds:function(){var t=this._bounds;t._southWest&&(t._southWest.lat=1/0,t._southWest.lng=1/0),t._northEast&&(t._northEast.lat=-1/0,t._northEast.lng=-1/0)},_recalculateBounds:function(){var t,e,i,n,a=this._markers,r=this._childClusters,o=0,s=0,l=this._childCount;if(0!==l){for(this._resetBounds(),t=0;t<a.length;t++)i=a[t]._latlng,this._bounds.extend(i),o+=i.lat,s+=i.lng;for(t=0;t<r.length;t++)e=r[t],e._boundsNeedUpdate&&e._recalculateBounds(),this._bounds.extend(e._bounds),i=e._wLatLng,n=e._childCount,o+=i.lat*n,s+=i.lng*n;this._latlng=this._wLatLng=new L.LatLng(o/l,s/l),this._boundsNeedUpdate=!1}},_addToMap:function(t){t&&(this._backupLatlng=this._latlng,this.setLatLng(t)),this._group._featureGroup.addLayer(this)},_recursivelyAnimateChildrenIn:function(t,e,i){this._recursively(t,this._group._map.getMinZoom(),i-1,function(t){var i,n,a=t._markers;for(i=a.length-1;i>=0;i--)n=a[i],n._icon&&(n._setPos(e),n.clusterHide())},function(t){var i,n,a=t._childClusters;for(i=a.length-1;i>=0;i--)n=a[i],n._icon&&(n._setPos(e),n.clusterHide())})},_recursivelyAnimateChildrenInAndAddSelfToMap:function(t,e,i,n){this._recursively(t,n,e,function(a){a._recursivelyAnimateChildrenIn(t,a._group._map.latLngToLayerPoint(a.getLatLng()).round(),i),a._isSingleParent()&&i-1===n?(a.clusterShow(),a._recursivelyRemoveChildrenFromMap(t,e,i)):a.clusterHide(),a._addToMap()})},_recursivelyBecomeVisible:function(t,e){this._recursively(t,this._group._map.getMinZoom(),e,null,function(t){t.clusterShow()})},_recursivelyAddChildrenToMap:function(t,e,i){this._recursively(i,this._group._map.getMinZoom()-1,e,function(n){if(e!==n._zoom)for(var a=n._markers.length-1;a>=0;a--){var r=n._markers[a];i.contains(r._latlng)&&(t&&(r._backupLatlng=r.getLatLng(),r.setLatLng(t),r.clusterHide&&r.clusterHide()),n._group._featureGroup.addLayer(r))}},function(e){e._addToMap(t)})},_recursivelyRestoreChildPositions:function(t){for(var e=this._markers.length-1;e>=0;e--){var i=this._markers[e];i._backupLatlng&&(i.setLatLng(i._backupLatlng),delete i._backupLatlng)}if(t-1===this._zoom)for(var n=this._childClusters.length-1;n>=0;n--)this._childClusters[n]._restorePosition();else for(var a=this._childClusters.length-1;a>=0;a--)this._childClusters[a]._recursivelyRestoreChildPositions(t)},_restorePosition:function(){this._backupLatlng&&(this.setLatLng(this._backupLatlng),delete this._backupLatlng)},_recursivelyRemoveChildrenFromMap:function(t,e,i,n){var a,r;this._recursively(t,e-1,i-1,function(t){for(r=t._markers.length-1;r>=0;r--)a=t._markers[r],n&&n.contains(a._latlng)||(t._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())},function(t){for(r=t._childClusters.length-1;r>=0;r--)a=t._childClusters[r],n&&n.contains(a._latlng)||(t._group._featureGroup.removeLayer(a),a.clusterShow&&a.clusterShow())})},_recursively:function(t,e,i,n,a){var r,o,s=this._childClusters,l=this._zoom;if(e<=l&&(n&&n(this),a&&l===i&&a(this)),l<e||l<i)for(r=s.length-1;r>=0;r--)o=s[r],t.intersects(o._bounds)&&o._recursively(t,e,i,n,a)},_isSingleParent:function(){return this._childClusters.length>0&&this._childClusters[0]._childCount===this._childCount}});L.Marker.include({clusterHide:function(){return this.options.opacityWhenUnclustered=this.options.opacity||1,this.setOpacity(0)},clusterShow:function(){var t=this.setOpacity(this.options.opacity||this.options.opacityWhenUnclustered);return delete this.options.opacityWhenUnclustered,t}}),L.DistanceGrid=function(t){this._cellSize=t,this._sqCellSize=t*t,this._grid={},this._objectPoint={}},L.DistanceGrid.prototype={addObject:function(t,e){var i=this._getCoord(e.x),n=this._getCoord(e.y),a=this._grid,r=a[n]=a[n]||{},o=r[i]=r[i]||[],s=L.Util.stamp(t);this._objectPoint[s]=e,o.push(t)},updateObject:function(t,e){this.removeObject(t),this.addObject(t,e)},removeObject:function(t,e){var i,n,a=this._getCoord(e.x),r=this._getCoord(e.y),o=this._grid,s=o[r]=o[r]||{},l=s[a]=s[a]||[];for(delete this._objectPoint[L.Util.stamp(t)],i=0,n=l.length;i<n;i++)if(l[i]===t)return l.splice(i,1),1===n&&delete s[a],!0},eachObject:function(t,e){var i,n,a,r,o,s,l=this._grid;for(i in l){o=l[i];for(n in o)for(s=o[n],a=0,r=s.length;a<r;a++)t.call(e,s[a])&&(a--,r--)}},getNearObject:function(t){var e,i,n,a,r,o,s,l,u=this._getCoord(t.x),c=this._getCoord(t.y),d=this._objectPoint,h=this._sqCellSize,p=null;for(e=c-1;e<=c+1;e++)if(a=this._grid[e])for(i=u-1;i<=u+1;i++)if(r=a[i])for(n=0,o=r.length;n<o;n++)s=r[n],((l=this._sqDist(d[L.Util.stamp(s)],t))<h||l<=h&&null===p)&&(h=l,p=s);return p},_getCoord:function(t){var e=Math.floor(t/this._cellSize);return isFinite(e)?e:t},_sqDist:function(t,e){var i=e.x-t.x,n=e.y-t.y;return i*i+n*n}},function(){L.QuickHull={getDistant:function(t,e){var i=e[1].lat-e[0].lat;return(e[0].lng-e[1].lng)*(t.lat-e[0].lat)+i*(t.lng-e[0].lng)},findMostDistantPointFromBaseLine:function(t,e){var i,n,a,r=0,o=null,s=[];for(i=e.length-1;i>=0;i--)n=e[i],(a=this.getDistant(n,t))>0&&(s.push(n),a>r&&(r=a,o=n));return{maxPoint:o,newPoints:s}},buildConvexHull:function(t,e){var i=[],n=this.findMostDistantPointFromBaseLine(t,e);return n.maxPoint?(i=i.concat(this.buildConvexHull([t[0],n.maxPoint],n.newPoints)),i=i.concat(this.buildConvexHull([n.maxPoint,t[1]],n.newPoints))):[t[0]]},getConvexHull:function(t){var e,i=!1,n=!1,a=!1,r=!1,o=null,s=null,l=null,u=null,c=null,d=null;for(e=t.length-1;e>=0;e--){var h=t[e];(!1===i||h.lat>i)&&(o=h,i=h.lat),(!1===n||h.lat<n)&&(s=h,n=h.lat),(!1===a||h.lng>a)&&(l=h,a=h.lng),(!1===r||h.lng<r)&&(u=h,r=h.lng)}return n!==i?(d=s,c=o):(d=u,c=l),[].concat(this.buildConvexHull([d,c],t),this.buildConvexHull([c,d],t))}}}(),L.MarkerCluster.include({getConvexHull:function(){var t,e,i=this.getAllChildMarkers(),n=[];for(e=i.length-1;e>=0;e--)t=i[e].getLatLng(),n.push(t);return L.QuickHull.getConvexHull(n)}}),L.MarkerCluster.include({_2PI:2*Math.PI,_circleFootSeparation:25,_circleStartAngle:0,_spiralFootSeparation:28,_spiralLengthStart:11,_spiralLengthFactor:5,_circleSpiralSwitchover:9,spiderfy:function(){if(this._group._spiderfied!==this&&!this._group._inZoomAnimation){var t,e=this.getAllChildMarkers(),i=this._group,n=i._map,a=n.latLngToLayerPoint(this._latlng);this._group._unspiderfy(),this._group._spiderfied=this,e.length>=this._circleSpiralSwitchover?t=this._generatePointsSpiral(e.length,a):(a.y+=10,t=this._generatePointsCircle(e.length,a)),this._animationSpiderfy(e,t)}},unspiderfy:function(t){this._group._inZoomAnimation||(this._animationUnspiderfy(t),this._group._spiderfied=null)},_generatePointsCircle:function(t,e){var i,n,a=this._group.options.spiderfyDistanceMultiplier*this._circleFootSeparation*(2+t),r=a/this._2PI,o=this._2PI/t,s=[];for(r=Math.max(r,35),s.length=t,i=0;i<t;i++)n=this._circleStartAngle+i*o,s[i]=new L.Point(e.x+r*Math.cos(n),e.y+r*Math.sin(n))._round();return s},_generatePointsSpiral:function(t,e){var i,n=this._group.options.spiderfyDistanceMultiplier,a=n*this._spiralLengthStart,r=n*this._spiralFootSeparation,o=n*this._spiralLengthFactor*this._2PI,s=0,l=[];for(l.length=t,i=t;i>=0;i--)i<t&&(l[i]=new L.Point(e.x+a*Math.cos(s),e.y+a*Math.sin(s))._round()),s+=r/a+5e-4*i,a+=o/s;return l},_noanimationUnspiderfy:function(){var t,e,i=this._group,n=i._map,a=i._featureGroup,r=this.getAllChildMarkers();for(i._ignoreMove=!0,this.setOpacity(1),e=r.length-1;e>=0;e--)t=r[e],a.removeLayer(t),t._preSpiderfyLatlng&&(t.setLatLng(t._preSpiderfyLatlng),delete t._preSpiderfyLatlng),t.setZIndexOffset&&t.setZIndexOffset(0),t._spiderLeg&&(n.removeLayer(t._spiderLeg),delete t._spiderLeg);i.fire("unspiderfied",{cluster:this,markers:r}),i._ignoreMove=!1,i._spiderfied=null}}),L.MarkerClusterNonAnimated=L.MarkerCluster.extend({_animationSpiderfy:function(t,e){var i,n,a,r,o=this._group,s=o._map,l=o._featureGroup,u=this._group.options.spiderLegPolylineOptions;for(o._ignoreMove=!0,i=0;i<t.length;i++)r=s.layerPointToLatLng(e[i]),n=t[i],a=new L.Polyline([this._latlng,r],u),s.addLayer(a),n._spiderLeg=a,n._preSpiderfyLatlng=n._latlng,n.setLatLng(r),n.setZIndexOffset&&n.setZIndexOffset(1e6),l.addLayer(n);this.setOpacity(.3),o._ignoreMove=!1,o.fire("spiderfied",{cluster:this,markers:t})},_animationUnspiderfy:function(){this._noanimationUnspiderfy()}}),L.MarkerCluster.include({_animationSpiderfy:function(t,e){var i,n,a,r,o,s,l=this,u=this._group,c=u._map,d=u._featureGroup,h=this._latlng,p=c.latLngToLayerPoint(h),f=L.Path.SVG,g=L.extend({},this._group.options.spiderLegPolylineOptions),_=g.opacity;for(void 0===_&&(_=L.MarkerClusterGroup.prototype.options.spiderLegPolylineOptions.opacity),f?(g.opacity=0,g.className=(g.className||"")+" leaflet-cluster-spider-leg"):g.opacity=_,u._ignoreMove=!0,i=0;i<t.length;i++)n=t[i],s=c.layerPointToLatLng(e[i]),a=new L.Polyline([h,s],g),c.addLayer(a),n._spiderLeg=a,f&&(r=a._path,o=r.getTotalLength()+.1,r.style.strokeDasharray=o,r.style.strokeDashoffset=o),n.setZIndexOffset&&n.setZIndexOffset(1e6),n.clusterHide&&n.clusterHide(),d.addLayer(n),n._setPos&&n._setPos(p);for(u._forceLayout(),u._animationStart(),i=t.length-1;i>=0;i--)s=c.layerPointToLatLng(e[i]),n=t[i],n._preSpiderfyLatlng=n._latlng,n.setLatLng(s),n.clusterShow&&n.clusterShow(),f&&(a=n._spiderLeg,r=a._path,r.style.strokeDashoffset=0,a.setStyle({opacity:_}));this.setOpacity(.3),u._ignoreMove=!1,setTimeout(function(){u._animationEnd(),u.fire("spiderfied",{cluster:l,markers:t})},200)},_animationUnspiderfy:function(t){var e,i,n,a,r,o,s=this,l=this._group,u=l._map,c=l._featureGroup,d=t?u._latLngToNewLayerPoint(this._latlng,t.zoom,t.center):u.latLngToLayerPoint(this._latlng),h=this.getAllChildMarkers(),p=L.Path.SVG;for(l._ignoreMove=!0,l._animationStart(),this.setOpacity(1),i=h.length-1;i>=0;i--)e=h[i],e._preSpiderfyLatlng&&(e.closePopup(),e.setLatLng(e._preSpiderfyLatlng),delete e._preSpiderfyLatlng,o=!0,e._setPos&&(e._setPos(d),o=!1),e.clusterHide&&(e.clusterHide(),o=!1),o&&c.removeLayer(e),p&&(n=e._spiderLeg,a=n._path,r=a.getTotalLength()+.1,a.style.strokeDashoffset=r,n.setStyle({opacity:0})));l._ignoreMove=!1,setTimeout(function(){var t=0;for(i=h.length-1;i>=0;i--)e=h[i],e._spiderLeg&&t++;for(i=h.length-1;i>=0;i--)e=h[i],e._spiderLeg&&(e.clusterShow&&e.clusterShow(),e.setZIndexOffset&&e.setZIndexOffset(0),t>1&&c.removeLayer(e),u.removeLayer(e._spiderLeg),delete e._spiderLeg);l._animationEnd(),l.fire("unspiderfied",{cluster:s,markers:h})},200)}}),L.MarkerClusterGroup.include({_spiderfied:null,unspiderfy:function(){this._unspiderfy.apply(this,arguments)},_spiderfierOnAdd:function(){this._map.on("click",this._unspiderfyWrapper,this),this._map.options.zoomAnimation&&this._map.on("zoomstart",this._unspiderfyZoomStart,this),this._map.on("zoomend",this._noanimationUnspiderfy,this),L.Browser.touch||this._map.getRenderer(this)},_spiderfierOnRemove:function(){this._map.off("click",this._unspiderfyWrapper,this),this._map.off("zoomstart",this._unspiderfyZoomStart,this),this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._map.off("zoomend",this._noanimationUnspiderfy,this),this._noanimationUnspiderfy()},_unspiderfyZoomStart:function(){this._map&&this._map.on("zoomanim",this._unspiderfyZoomAnim,this)},_unspiderfyZoomAnim:function(t){L.DomUtil.hasClass(this._map._mapPane,"leaflet-touching")||(this._map.off("zoomanim",this._unspiderfyZoomAnim,this),this._unspiderfy(t))},_unspiderfyWrapper:function(){this._unspiderfy()},_unspiderfy:function(t){this._spiderfied&&this._spiderfied.unspiderfy(t)},_noanimationUnspiderfy:function(){this._spiderfied&&this._spiderfied._noanimationUnspiderfy()},_unspiderfyLayer:function(t){t._spiderLeg&&(this._featureGroup.removeLayer(t),t.clusterShow&&t.clusterShow(),t.setZIndexOffset&&t.setZIndexOffset(0),this._map.removeLayer(t._spiderLeg),delete t._spiderLeg)}}),L.MarkerClusterGroup.include({refreshClusters:function(t){return t?t instanceof L.MarkerClusterGroup?t=t._topClusterLevel.getAllChildMarkers():t instanceof L.LayerGroup?t=t._layers:t instanceof L.MarkerCluster?t=t.getAllChildMarkers():t instanceof L.Marker&&(t=[t]):t=this._topClusterLevel.getAllChildMarkers(),this._flagParentsIconsNeedUpdate(t),this._refreshClustersIcons(),this.options.singleMarkerMode&&this._refreshSingleMarkerModeMarkers(t),this},_flagParentsIconsNeedUpdate:function(t){var e,i;for(e in t)for(i=t[e].__parent;i;)i._iconNeedsUpdate=!0,i=i.__parent},_refreshSingleMarkerModeMarkers:function(t){var e,i;for(e in t)i=t[e],this.hasLayer(i)&&i.setIcon(this._overrideMarkerIcon(i))}}),L.Marker.include({refreshIconOptions:function(t,e){var i=this.options.icon;return L.setOptions(i,t),this.setIcon(i),e&&this.__parent&&this.__parent._group.refreshClusters(this),this}}),t.MarkerClusterGroup=e,t.MarkerCluster=i})},function(t,e){!function(){"use strict";function t(e){return this instanceof t?(this._canvas=e="string"==typeof e?document.getElementById(e):e,this._ctx=e.getContext("2d"),this._width=e.width,this._height=e.height,this._max=1,void this.clear()):new t(e)}t.prototype={defaultRadius:25,defaultGradient:{.4:"blue",.6:"cyan",.7:"lime",.8:"yellow",1:"red"},data:function(t,e){return this._data=t,this},max:function(t){return this._max=t,this},add:function(t){return this._data.push(t),this},clear:function(){return this._data=[],this},radius:function(t,e){e=e||15;var i=this._circle=document.createElement("canvas"),n=i.getContext("2d"),a=this._r=t+e;return i.width=i.height=2*a,n.shadowOffsetX=n.shadowOffsetY=200,n.shadowBlur=e,n.shadowColor="black",n.beginPath(),n.arc(a-200,a-200,t,0,2*Math.PI,!0),n.closePath(),n.fill(),this},gradient:function(t){var e=document.createElement("canvas"),i=e.getContext("2d"),n=i.createLinearGradient(0,0,0,256);e.width=1,e.height=256;for(var a in t)n.addColorStop(a,t[a]);return i.fillStyle=n,i.fillRect(0,0,1,256),this._grad=i.getImageData(0,0,1,256).data,this},draw:function(t){this._circle||this.radius(this.defaultRadius),this._grad||this.gradient(this.defaultGradient);var e=this._ctx;e.clearRect(0,0,this._width,this._height);for(var i,n=0,a=this._data.length;a>n;n++)i=this._data[n],e.globalAlpha=Math.max(i[2]/this._max,t||.05),e.drawImage(this._circle,i[0]-this._r,i[1]-this._r);var r=e.getImageData(0,0,this._width,this._height);return this._colorize(r.data,this._grad),e.putImageData(r,0,0),this},_colorize:function(t,e){for(var i,n=3,a=t.length;a>n;n+=4)(i=4*t[n])&&(t[n-3]=e[i],t[n-2]=e[i+1],t[n-1]=e[i+2])}},window.simpleheat=t}(),L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(t,e){this._latlngs=t,L.setOptions(this,e)},setLatLngs:function(t){return this._latlngs=t,this.redraw()},addLatLng:function(t){return this._latlngs.push(t),this.redraw()},setOptions:function(t){return L.setOptions(this,t),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(t){this._map=t,this._canvas||this._initCanvas(),t._panes.overlayPane.appendChild(this._canvas),t.on("moveend",this._reset,this),t.options.zoomAnimation&&L.Browser.any3d&&t.on("zoomanim",this._animateZoom,this),this._reset()},onRemove:function(t){t.getPanes().overlayPane.removeChild(this._canvas),t.off("moveend",this._reset,this),t.options.zoomAnimation&&t.off("zoomanim",this._animateZoom,this)},addTo:function(t){return t.addLayer(this),this},_initCanvas:function(){var t=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),e=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);t.style[e]="50% 50%";var i=this._map.getSize();t.width=i.x,t.height=i.y;var n=this._map.options.zoomAnimation&&L.Browser.any3d;L.DomUtil.addClass(t,"leaflet-zoom-"+(n?"animated":"hide")),this._heat=simpleheat(t),this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur),this.options.gradient&&this._heat.gradient(this.options.gradient),this.options.max&&this._heat.max(this.options.max)},_reset:function(){var t=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,t);var e=this._map.getSize();this._heat._width!==e.x&&(this._canvas.width=this._heat._width=e.x),this._heat._height!==e.y&&(this._canvas.height=this._heat._height=e.y),this._redraw()},_redraw:function(){var t,e,i,n,a,r,o,s,l,u=[],c=this._heat._r,d=this._map.getSize(),h=new L.Bounds(L.point([-c,-c]),d.add([c,c])),p=void 0===this.options.max?1:this.options.max,f=void 0===this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom,g=1/Math.pow(2,Math.max(0,Math.min(f-this._map.getZoom(),12))),_=c/2,m=[],y=this._map._getMapPanePos(),v=y.x%_,x=y.y%_;for(t=0,e=this._latlngs.length;e>t;t++)if(i=this._map.latLngToContainerPoint(this._latlngs[t]),h.contains(i)){a=Math.floor((i.x-v)/_)+2,r=Math.floor((i.y-x)/_)+2;var b=void 0!==this._latlngs[t].alt?this._latlngs[t].alt:void 0!==this._latlngs[t][2]?+this._latlngs[t][2]:1;l=b*g,m[r]=m[r]||[],n=m[r][a],n?(n[0]=(n[0]*n[2]+i.x*l)/(n[2]+l),n[1]=(n[1]*n[2]+i.y*l)/(n[2]+l),n[2]+=l):m[r][a]=[i.x,i.y,l]}for(t=0,e=m.length;e>t;t++)if(m[t])for(o=0,s=m[t].length;s>o;o++)(n=m[t][o])&&u.push([Math.round(n[0]),Math.round(n[1]),Math.min(n[2],p)]);this._heat.data(u).draw(this.options.minOpacity),this._frame=null},_animateZoom:function(t){var e=this._map.getZoomScale(t.zoom),i=this._map._getCenterOffset(t.center)._multiplyBy(-e).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,i,e):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(i)+" scale("+e+")"}}),L.heatLayer=function(t,e){return new L.HeatLayer(t,e)}},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(1),a=_interopRequireDefault(n),r=i(0),o=i(2),s=_interopRequireDefault(o);(0,r.extend)(a.default.prototype,{updateStyleChart:function(){var t=this;t.setBackgroundColor(),t.setBorderColor(),t.setBorderWidth(),t.setBorderType(),t.setBorderRadius(),t.setBorderStyle(),t.setBackgroundImage()},setBackgroundImage:function(){var t=this,e=t.config;(0,r.notEmpty)(e.charts_background_image)&&t.makeBackgroundImage().attr("xlink:href",e.charts_background_image),(0,r.notEmpty)(e.charts_plotBackground_image)&&t.makePlotBackgroundImage().attr("xlink:href",e.charts_plotBackground_image)},setBackgroundColor:function(){var t=this,e=t.config;(0,r.notEmpty)(e.charts_background_color)&&t.makeChartStyle().style("fill",e.charts_background_color),(0,r.notEmpty)(e.charts_plotBackground_color)&&t.makeChartPlotStyle().style("fill",e.charts_plotBackground_color)},setBorderColor:function(){var t=this,e=t.config;(0,r.notEmpty)(e.charts_border_color)&&(0,r.notEmpty)(e.charts_border_width)&&t.makeChartStyle().style("stroke",e.charts_border_color),(0,r.notEmpty)(e.charts_plotBorder_color)&&(0,r.notEmpty)(e.charts_plotBorder_width)&&t.makeChartPlotStyle().style("stroke",e.charts_plotBorder_color)},setBorderType:function(){var t=this,e=t.config;(0,r.notEmpty)(e.charts_border_type)&&(0,r.notEmpty)(e.charts_border_width)&&t.makeChartStyle().style("stroke-dasharray",(0,r.borderStyle)(e.charts_border_type)),(0,r.notEmpty)(e.charts_border_types)&&(0,r.notEmpty)(e.charts_border_width)&&t.makeChartStyle().style("stroke-dasharray",e.charts_border_types),(0,r.notEmpty)(e.charts_plotBorder_type)&&(0,r.notEmpty)(e.charts_plotBorder_width)&&t.makeChartPlotStyle().style("stroke-dasharray",(0,r.borderStyle)(e.charts_plotBorder_type)),(0,r.notEmpty)(e.charts_plotBorder_types)&&(0,r.notEmpty)(e.charts_plotBorder_width)&&t.makeChartPlotStyle().style("stroke-dasharray",e.charts_plotBorder_types)},setBorderStyle:function(){var t=this,e=t.config;if((0,r.notEmpty)(e.charts_border_style))for(var i in e.charts_border_style)t.makeChartStyle().style(i,e.charts_border_style[i]);if((0,r.notEmpty)(e.charts_plotBorder_style))for(var n in e.charts_plotBorder_style)t.makeChartPlotStyle().style(n,e.charts_plotBorder_style[n])},setBorderWidth:function(){var t=this,e=t.config;(0,r.notEmpty)(e.charts_border_width)&&t.makeChartStyle().style("stroke-width",e.charts_border_width+"px"),(0,r.notEmpty)(e.charts_plotBorder_width)&&t.makeChartPlotStyle().style("stroke-width",e.charts_plotBorder_width+"px")},setBorderRadius:function(){var t=this,e=t.config;(0,r.notEmpty)(e.charts_border_radius)&&t.makeChartStyle().attr("rx",e.charts_border_radius).attr("ry",e.charts_border_radius),(0,r.notEmpty)(e.charts_plotBorder_radius)&&t.makeChartPlotStyle().attr("rx",e.charts_plotBorder_radius).attr("ry",e.charts_plotBorder_radius)},makeChartStyle:function(){var t=this,e=t.config,i=(0,r.notEmpty)(e.charts_border_width)&&e.charts_border_width>2?e.charts_border_width:2;return t.rectBackground?t.rectBackground:(t.rectBackground=t.svg.insert("rect","g."+s.default.chartGroup).attr("class",s.default.chartBackground).attr("x",Math.ceil(i/2)).attr("y",Math.ceil(i/2)).attr("width",t.getCurrentWidth()-i).attr("height",t.getCurrentHeight()-i).style("fill","none"),t.rectBackground)},makeChartPlotStyle:function(){var t=this,e=t.config,i=(0,r.notEmpty)(e.charts_plotBorder_width)&&e.charts_plotBorder_width>2?e.charts_plotBorder_width:2,n=(0,r.asHalfPixel)(t.margin.left),a=(0,r.asHalfPixel)(t.margin.top);return t.rectPlotBackground?t.rectPlotBackground:(t.rectPlotBackground=t.svg.insert("rect","g."+s.default.chartGroup).attr("class",s.default.chartPlotBackground).attr("x",n+Math.ceil(i/2)).attr("y",a+Math.ceil(i/2)).attr("width",t.width-i).attr("height",t.height-i).style("fill","none"),t.rectPlotBackground)},makeBackgroundImage:function(){var t=this,e=t.config,i=(0,r.notEmpty)(e.charts_border_width)&&e.charts_border_width>2?e.charts_border_width:2;if(t.rectBackgroundImage)return t.rectBackgroundImage;if((0,r.notEmpty)(e.charts_border_radius)){t.clipIdForBackgroundImage=t.clipId+"-background-image";t.svg.select("defs").append("clipPath").attr("id",""+t.clipIdForBackgroundImage).append("rect").attr("x",Math.ceil(i/2)).attr("y",Math.ceil(i/2)).attr("width",t.getCurrentWidth()-i).attr("height",t.getCurrentHeight()-i).attr("rx",e.charts_border_radius).attr("ry",e.charts_border_radius).attr("fill","none")}return t.rectBackgroundImage=t.svg.insert("image","g."+s.default.chartGroup).attr("class",s.default.chartBackgroundImage).attr("preserveAspectRatio","none").attr("clip-path",t.getClipPath(t.clipIdForBackgroundImage)).attr("x",Math.ceil(i/2)).attr("y",Math.ceil(i/2)).attr("width",t.getCurrentWidth()-i).attr("height",t.getCurrentHeight()-i),t.rectBackgroundImage},makePlotBackgroundImage:function(){var t=this,e=t.config,i=(0,r.notEmpty)(e.charts_plotBorder_width)&&e.charts_plotBorder_width>2?e.charts_plotBorder_width:2,n=(0,r.asHalfPixel)(t.margin.left),a=(0,r.asHalfPixel)(t.margin.top);if(t.rectPlotBackgroundImage)return t.rectPlotBackgroundImage;if((0,r.notEmpty)(e.charts_plotBorder_radius)){t.clipIdForPlotBackgroundImage=t.clipId+"-plot-background-image";t.svg.select("defs").append("clipPath").attr("id",""+t.clipIdForPlotBackgroundImage).append("rect").attr("x",n+Math.ceil(i/2)).attr("y",a+Math.ceil(i/2)).attr("width",t.width-i).attr("height",t.height-i).attr("rx",e.charts_plotBorder_radius).attr("ry",e.charts_plotBorder_radius).attr("fill","none")}return t.rectPlotBackgroundImage=t.svg.insert("image","g."+s.default.chartGroup).attr("class",s.default.chartPlotBackgroundImage).attr("preserveAspectRatio","none").attr("clip-path",t.getClipPath(t.clipIdForPlotBackgroundImage)).attr("x",n+Math.ceil(i/2)).attr("y",a+Math.ceil(i/2)).attr("width",t.width-i).attr("height",t.height-i),t.rectPlotBackgroundImage},updateBackgroundSize:function(){var t=this,e=t.config,i=(0,r.notEmpty)(e.charts_border_width)&&e.charts_border_width>2?e.charts_border_width:2,n=(0,r.notEmpty)(e.charts_plotBorder_width)&&e.charts_plotBorder_width>2?e.charts_plotBorder_width:2;t.getCurrentWidth()>0&&t.getCurrentHeight()>0&&(t.rectBackground&&t.rectBackground.attr("width",t.getCurrentWidth()-i).attr("height",t.getCurrentHeight()-i),t.rectBackgroundImage&&t.rectBackgroundImage.attr("width",t.getCurrentWidth()-i).attr("height",t.getCurrentHeight()-i),t.svg.select("#"+t.clipIdForBackgroundImage).select("rect").attr("width",t.getCurrentWidth()-i).attr("height",t.getCurrentHeight()-i)),t.width>0&&t.height>0&&(t.rectPlotBackground&&t.rectPlotBackground.attr("width",t.width-n).attr("height",t.height-n),t.rectPlotBackgroundImage&&t.rectPlotBackgroundImage.attr("width",t.width-n).attr("height",t.height-n),t.svg.select("#"+t.clipIdForPlotBackgroundImage).select("rect").attr("width",t.width-n).attr("height",t.height-n))}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initText:function(){var t=this;t.main.select("."+s.default.chart).append("g").attr("class",s.default.chartTexts),t.mainLabelText=(0,n.selectAll)([]),t.mainLabelRect=(0,n.selectAll)([]),t.mainLabelGroup=(0,n.selectAll)([])},updateTargetsForText:function(t){var e=this,i=e.classChartText.bind(e),n=e.classTexts.bind(e),a=e.classFocus.bind(e),r=e.main.select("."+s.default.chartTexts).selectAll("."+s.default.chartText).data(t).attr("class",function(t){return i(t)+a(t)});e.mainGroupLabelEnter=r.enter().append("g").attr("class",i).style("opacity","0").style("pointer-events","none"),e.mainGroupLabelEnter.append("g").attr("class",n)},updateText:function(t){var e=this,i=e.config,n=e.barLineBubbleData.bind(e),a=e.classText.bind(e);e.mainLabelGroup=e.main.selectAll("."+s.default.texts).selectAll("."+s.default.labelGroup).data(n),e.mainLabelGroup.exit().transition().duration(t).style("fill-opacity","0").remove(),e.mainLabelGroup=e.mainLabelGroup.enter().append("g").attr("class",""+s.default.labelGroup),e.mainLabelRect=e.mainLabelGroup.append("rect").attr("class",function(t,e){return s.default.labelRect+" "+s.default.labelRect+"-"+e}).merge(e.mainLabelRect).style("fill","none"),e.mainLabelText=e.mainLabelGroup.append("text").attr("class",a).attr("text-anchor",function(t){return i.axis_rotated?t.value<0?"end":"start":"middle"}).style("stroke","none").style("fill-opacity","0").merge(e.mainLabelText).text(function(t,i,n){return e.dataLabelFormat(t.id)(t.value,t.id,i,n)}),e.setLabelColor(),e.setLabelText(),e.setLabelBackgroundColor(),e.setLabelBorder(),e.setLabelVisibled(),e.setLabelStyle(),e.setLabelData()},setLabelColor:function(){var t=this,e=t.config;t.mainLabelText.style("fill",function(i){return(0,l.notEmpty)(e.data_labels_color)?e.data_labels_color:(0,l.notEmpty)(e.data_labels_colors)&&(0,l.notEmpty)(e.data_labels_colors[i.id])?e.data_labels_colors[i.id]:t.color(i)})},setLabelBackgroundColor:function(){var t=this,e=t.config;(0,l.notEmpty)(e.data_labels_background_color)&&t.mainLabelRect.style("fill",e.data_labels_background_color),(0,l.notEmpty)(e.data_labels_background_opacity)&&(0,l.notEmpty)(e.data_labels_background_color)&&t.mainLabelRect.style("fill-opacity",e.data_labels_background_opacity.toString()),(0,l.notEmpty)(e.data_labels_backgrounds)&&t.mainLabelRect.style("fill",function(t){return(0,l.notEmpty)(e.data_labels_backgrounds[t.id])&&(0,l.notEmpty)(e.data_labels_backgrounds[t.id].color)?e.data_labels_backgrounds[t.id].color:"none"}).style("fill-opacity",function(t){return(0,l.notEmpty)(e.data_labels_backgrounds[t.id])&&(0,l.notEmpty)(e.data_labels_backgrounds[t.id].color)&&(0,l.notEmpty)(e.data_labels_backgrounds[t.id].opacity)?e.data_labels_backgrounds[t.id].opacity.toString():"0.7"})},setLabelBorder:function(){var t=this,e=t.config;(0,l.notEmpty)(e.data_labels_border_color)&&(0,l.notEmpty)(e.data_labels_border_width)&&t.mainLabelRect.style("stroke",e.data_labels_border_color),(0,l.notEmpty)(e.data_labels_border_radius)&&t.mainLabelRect.attr("rx",e.data_labels_border_radius).attr("ry",e.data_labels_border_radius),(0,l.notEmpty)(e.data_labels_border_width)&&t.mainLabelRect.style("stroke-width",e.data_labels_border_width+"px"),(0,l.notEmpty)(e.data_labels_border_type)&&(0,l.notEmpty)(e.data_labels_border_width)&&t.mainLabelRect.style("stroke-dasharray",(0,l.borderStyle)(e.data_labels_border_type)),(0,l.notEmpty)(e.data_labels_border_types)&&(0,l.notEmpty)(e.data_labels_border_width)&&t.mainLabelRect.style("stroke-dasharray",e.data_labels_border_types)},setLabelText:function(){var t=this,e=t.config;t.mainLabelText.style("font-size",e.data_labels_font_size+"px"),t.mainLabelText.style("font-family",e.data_labels_font_family+"px"),(0,l.notEmpty)(e.data_labels_font_weight)&&t.mainLabelText.style("font-weight",e.data_labels_font_weight)},setLabelStyle:function(){var t=this,e=t.config;if((0,l.notEmpty)(e.data_labels_style))for(var i in e.data_labels_style)t.mainLabelRect.style(i,e.data_labels_style[i])},setLabelVisibled:function(){var t=this,e=t.config;(0,l.notEmpty)(e.data_labels_visibled)&&(t.mainLabelRect.style("visibility",function(t){return e.data_labels_visibled[t.id]?"visible":"hidden"}),t.mainLabelText.style("visibility",function(t){return e.data_labels_visibled[t.id]?"visible":"hidden"}))},setLabelData:function(){var t=this,e=t.config;if((0,l.notEmpty)(e.data_labels_dataLabels)){var i=0;t.mainLabelRect.attr("style-labels",function(a){var r=e.data_labels_dataLabels[a.id];if((0,l.notEmpty)(r)){var o=t.getDataLabel(r,a),s=(0,n.select)(t.mainLabelRect.nodes()[i]),u=(0,n.select)(t.mainLabelText.nodes()[i]);t.setLabelStyleItems(s,o,!0),t.setLabelStyleItems(u,o,!1)}i++})}},setLabelStyleItems:function(t,e,i){(0,l.notEmpty)(e)&&((0,l.notEmpty)(e.visibled)&&t.style("visibility",e.visibled?"visible":"hidden"),(0,l.notEmpty)(e.color)&&!i&&t.style("fill",e.color),(0,l.notEmpty)(e.font)&&!i&&((0,l.notEmpty)(e.font.size)&&!i&&t.style("font-size",e.font.size+"px"),(0,l.notEmpty)(e.font.weight)&&!i&&t.style("font-weight",e.font.weight),(0,l.notEmpty)(e.font.family)&&!i&&t.style("font-family",e.font.family)),(0,l.notEmpty)(e.background)&&i&&((0,l.notEmpty)(e.background.color)&&i&&t.style("fill",e.background.color),(0,l.notEmpty)(e.background.opacity)&&i&&t.style("fill-opacity",e.background.opacity.toString())),(0,l.notEmpty)(e.border)&&i&&((0,l.notEmpty)(e.border.color)&&(0,l.notEmpty)(e.border.width)&&i&&t.style("stroke",e.border.color),(0,l.notEmpty)(e.border.width)&&i&&t.style("stroke-width",e.border.width+"px"),(0,l.notEmpty)(e.border.radius)&&i&&t.attr("rx",e.border.radius).attr("ry",e.border.radius),(0,l.notEmpty)(e.border.type)&&(0,l.notEmpty)(e.border.width)&&i&&t.style("stroke-dasharray",(0,l.borderStyle)(e.border.type)),(0,l.notEmpty)(e.border.types)&&(0,l.notEmpty)(e.border.width)&&i&&t.style("stroke-dasharray",e.border.types)))},getDataLabel:function(t,e){var i=[];return t.forEach(function(t){(0,l.notEmpty)(t.value)&&t.value===e.value&&(i=t),(0,l.notEmpty)(t.values)&&t.values.indexOf(e.value)>=0&&(i=t)}),i},calculatorPaddingLabel:function(t,e){var i=this,n=i.config,a=n.data_labels_padding+e,r=n.data_labels_dataLabels[t.id];if((0,l.notEmpty)(r)){var o=i.getDataLabel(r,t);(0,l.notEmpty)(o.padding)&&(a+=o.padding)}return a},setHiddenLayoutOverlap:function(){var t=this,e=t.mainLabelRect.nodes(),i=[];e.forEach(function(e){var a=e.getBoundingClientRect().top,r=e.getBoundingClientRect().left,o=!1;"visible"===(0,n.select)(e).style("visibility")&&(i.length>0&&(i.forEach(function(e){t.checkOverlapRectangle(a,r,e.top,e.left,e.width,e.height)&&(o=!0)}),o&&(0,n.select)(e.parentNode).style("opacity","0")),i.push(e.getBoundingClientRect()))})},setHiddenLayoutOverlapTarget:function(t,e){var i=this,a=i.mainLabelRect.nodes(),r=[];t.select("."+s.default.texts).selectAll("."+s.default.labelGroup).attr("data-opacity",e),a.forEach(function(t){var e=t.getBoundingClientRect().top,a=t.getBoundingClientRect().left,o=!1,s=(0,n.select)(t.parentNode).attr("data-opacity"),u=(0,n.select)(t).style("visibility");"visible"!==s&&(0,l.notEmpty)(s)||"visible"!==u||((0,n.select)(t.parentNode).style("opacity","1"),r.length>0&&(r.forEach(function(t){i.checkOverlapRectangle(e,a,t.top,t.left,t.width,t.height)&&(o=!0)}),o&&(0,n.select)(t.parentNode).style("opacity","0")),r.push(t.getBoundingClientRect()))})},checkOverlapRectangle:function(t,e,i,n,a,r){var o=i-t>=0?i-t:-1*(i-t),s=n-e>=0?n-e:-1*(n-e);return o<=r&&s<=a},redrawText:function(t,e,i,a){var r=this;this.mainLabelText.attr("x",t).attr("y",e).style("fill-opacity",i?"0":this.opacityForText.bind(this));var o=this.mainLabelRect.nodes();return this.mainLabelText.nodes().forEach(function(t,e){(0,n.select)(o[e]).attr("x",function(e){var i=t.getAttribute("x"),n=r.calculatorPaddingLabel(e,5);return i-(t.getBoundingClientRect().width+n)/2}).attr("y",function(e){var i=t.getAttribute("y"),a=(0,n.select)(t).style("font-size").replace("px",""),o=r.calculatorPaddingLabel(e,1);return i-(t.getBoundingClientRect().height+o+parseFloat(a))/2}).attr("width",function(e){var i=r.calculatorPaddingLabel(e,5);return t.getBoundingClientRect().width+i}).attr("height",function(e){var i=r.calculatorPaddingLabel(e,5);return t.getBoundingClientRect().height+i})}),r.hasType("bubble")||r.setHiddenLayoutOverlap(),[a?this.mainLabelGroup.transition():this.mainLabelGroup]},getTextRect:function(t,e,i){var a=(0,n.select)("body").append("div").classed("rb",!0),r=a.append("svg").style("visibility","hidden").style("position","fixed").style("top","0px").style("left","0px"),o=(0,n.select)(i).style("font"),s=void 0;return r.selectAll(".dummy").data([t]).enter().append("text").classed(e||"",!0).style("font",o).text(t).each(function(){s=this.getBoundingClientRect()}),a.remove(),s},generateXYForText:function(t,e,i,n){var a=this,r=a.generateGetAreaPoints(t,!1),o=a.generateGetBarPoints(e,!1),s=a.generateGetLinePoints(i,!1),l=n?a.getXForText:a.getYForText;return function(t,e){var i=a.isAreaType(t)&&r||a.isBarType(t)&&o||s;return l.call(a,i(t,e),t,this)}},getXForText:function(t,e,i){var n=this,a=n.config,r=void 0,o=void 0;return a.axis_rotated?(o=n.isBarType(e)?4:6,r=t[2][1]+o*(e.value<0?-1:1)):r=n.hasType("bar")?(t[2][0]+t[0][0])/2:t[0][0],null===e.value&&(r>n.width?r=n.width-i.getBoundingClientRect().width:r<0&&(r=4)),r+(a.data_labels_position.x||0)},getYForText:function(t,e,i){var n=this,a=n.config,r=void 0;if(a.axis_rotated)r=(t[0][0]+t[2][0]+.6*i.getBoundingClientRect().height)/2;else if(r=t[2][1],e.value<0||0===e.value&&!n.hasPositiveValue)r+=i.getBoundingClientRect().height,n.isBarType(e)&&n.isSafari()?r-=3:!n.isBarType(e)&&n.isChrome()&&(r+=3);else{var o=-6;n.isBarType(e)?o=-3:n.isBubbleType(e)&&(o=3),r+=o}if(null===e.value&&!a.axis_rotated){var s=i.getBoundingClientRect().height;r<s?r=s:r>this.height&&(r=this.height-4)}return r+(a.data_labels_position.y||0)}})},function(t,e,i){"use strict";var n=i(1),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=i(0);(0,r.extend)(a.default.prototype,{setTargetType:function(t,e){var i=this,n=i.config;i.mapToTargetIds(t).forEach(function(t){i.withoutFadeIn[t]=e===n.data_types[t],n.data_types[t]=e}),t||(n.data_type=e)},hasType:function(t,e){var i=this,n=i.config.data_types,a=e||i.data.targets,r=!1;return a&&a.length?a.forEach(function(e){var i=n[e.id];(i&&i.indexOf(t)>=0||!i&&"line"===t)&&(r=!0)}):Object.keys(n).length?Object.keys(n).forEach(function(e){n[e]===t&&(r=!0)}):r=i.config.data_type===t,r},hasArcType:function(t){return this.hasType("pie",t)||this.hasType("donut",t)||this.hasType("gauge",t)||this.hasType("wordcloud",t)||this.hasType("network",t)||this.hasType("topicrank",t)||this.hasType("sunburst",t)||this.hasType("bubble-cluster",t)||this.hasType("pack",t)||this.hasType("map",t)||this.hasType("treemap",t)||this.hasType("dendrogram",t)},hasWordCloud:function(t){return this.hasType("wordcloud",t)},hasTopicRank:function(t){return this.hasType("topicrank",t)},hasNetwork:function(t){return this.hasType("network",t)},hasRadar:function(t){return this.hasType("radar",t)},hasChord:function(t){return this.hasType("chord",t)},hasDendrogram:function(t){return this.hasType("dendrogram",t)},hasSunburst:function(t){return this.hasType("sunburst",t)},hasPack:function(t){return this.hasType("pack",t)},hasTreemap:function(t){return this.hasType("treemap",t)},hasBoxplot:function(t){return this.hasType("boxplot",t)},hasCandlestick:function(t){return this.hasType("candlestick",t)},hasBubbleCluster:function(t){return this.hasType("bubble-cluster",t)},hasMap:function(t){return this.hasType("map",t)},isLineType:function(t){var e=(0,r.isString)(t)?t:t.id;return!this.config.data_types[e]||this.isTypeOf(e,["line","spline","area","area-spline","step","area-step"])},isTypeOf:function(t,e){var i=(0,r.isString)(t)?t:t.id,n=this.config.data_types[i];return(0,r.isArray)(e)?e.indexOf(n)>=0:n===e},isStepType:function(t){return this.isTypeOf(t,["step","area-step"])},isSplineType:function(t){return this.isTypeOf(t,["spline","area-spline"])},isAreaType:function(t){return this.isTypeOf(t,["area","area-spline","area-step"])},isBarType:function(t){return this.isTypeOf(t,"bar")},isScatterType:function(t){return this.isTypeOf(t,"scatter")},isPieType:function(t){return this.isTypeOf(t,"pie")},isGaugeType:function(t){return this.isTypeOf(t,"gauge")},isDonutType:function(t){return this.isTypeOf(t,"donut")},isBubbleType:function(t){return this.isTypeOf(t,"bubble")},isArcType:function(t){return this.isPieType(t)||this.isDonutType(t)||this.isGaugeType(t)},isBoxplotType:function(t){return this.isTypeOf(t,"boxplot")},lineData:function(t){return this.isLineType(t)?[t]:[]},arcData:function(t){return this.isArcType(t.data)?[t]:[]},barData:function(t){return this.isBarType(t)?t.values:[]},boxplotData:function(t){return this.isBoxplotType(t)?t.values:[]},lineScatterBubbleData:function(t){return this.isLineType(t)||this.isScatterType(t)||this.isBubbleType(t)?t.values:[]},barLineBubbleData:function(t){return this.isBarType(t)||this.isLineType(t)||this.isBubbleType(t)?t.values:[]},isInterpolationType:function(t){return["basis","basis-closed","basis-open","bundle","cardinal","cardinal-closed","cardinal-open","catmull-rom","catmull-rom-closed","catmull-rom-open","linear","linear-closed","monotone-x","monotone-y","natural"].indexOf(t)>=0}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initGrid:function(){var t=this,e=t.config;t.grid=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",s.default.grid),e.grid_x_show&&t.grid.append("g").attr("class",s.default.xgrids),e.grid_y_show&&t.grid.append("g").attr("class",s.default.ygrids),e.grid_focus_show&&t.grid.append("g").attr("class",s.default.xgridFocus).append("line").attr("class",s.default.xgridFocus),e.grid_focus_show&&t.grid.append("g").attr("class",s.default.ygridFocus).append("line").attr("class",s.default.ygridFocus),t.xgrid=(0,n.selectAll)([]),e.grid_lines_front||t.initGridLines()},initGridLines:function(){var t=this;t.gridLines=t.main.append("g").attr("clip-path",t.clipPathForGrid).attr("class",s.default.grid+" "+s.default.gridLines),t.gridLines.append("g").attr("class",s.default.xgridLines),t.gridLines.append("g").attr("class",s.default.ygridLines),t.xgridLines=(0,n.selectAll)([])},updateXGrid:function(t){var e=this,i=e.config,a=e.generateGridData(i.grid_x_type,e.x),r=e.isCategorized()?e.xAxis.tickOffset():0;e.xgridAttr=i.axis_rotated?{x1:0,x2:e.width,y1:function(t){return e.x(t)-r},y2:function(t){return e.x(t)-r}}:{x1:function(t){return e.x(t)+r},x2:function(t){return e.x(t)+r},y1:0,y2:e.height},e.xgrid=e.main.select("."+s.default.xgrids).selectAll("."+s.default.xgrid).data(a),e.xgrid.exit().remove(),e.xgrid=e.xgrid.enter().append("line").attr("class",s.default.xgrid).merge(e.xgrid),t||e.xgrid.each(function(){var t=(0,n.select)(this);Object.keys(e.xgridAttr).forEach(function(n){t.attr(n,e.xgridAttr[n]).style("opacity",function(){return t.attr(i.axis_rotated?"y1":"x1")===(i.axis_rotated?e.height:0)?"0":"1"})})})},updateYGrid:function(){var t=this,e=t.config,i=t.yAxis.tickValues()||t.y.ticks(e.grid_y_ticks);t.ygrid=t.main.select("."+s.default.ygrids).selectAll("."+s.default.ygrid).data(i),t.ygrid.exit().remove(),t.ygrid=t.ygrid.enter().append("line").attr("class",s.default.ygrid).style("fill","none").style("stroke","#ccc").merge(t.ygrid),t.ygrid.attr("x1",e.axis_rotated?t.y:0).attr("x2",e.axis_rotated?t.y:t.width).attr("y1",e.axis_rotated?0:t.y).attr("y2",e.axis_rotated?t.height:t.y),t.smoothLines(t.ygrid,"grid")},gridTextAnchor:function(t){return t.position?t.position:"end"},gridTextDx:function(t){return"start"===t.position?4:"middle"===t.position?0:-4},xGridTextX:function(t){return"start"===t.position?-this.height:"middle"===t.position?-this.height/2:0},yGridTextX:function(t){return"start"===t.position?0:"middle"===t.position?this.width/2:this.width},updateGrid:function(t){var e=this,i=e.main,n=e.config;e.grid.style("visibility",e.hasArcType()?"hidden":"visible"),i.select("line."+s.default.xgridFocus).style("visibility","hidden"),n.grid_x_show&&e.updateXGrid(),e.xgridLines=i.select("."+s.default.xgridLines).selectAll("."+s.default.xgridLine).data(n.grid_x_lines),e.xgridLines.exit().transition().duration(t).style("opacity","0").remove();var a=e.xgridLines.enter().append("g").attr("class",function(t){return s.default.xgridLine+(t.class?" "+t.class:"")});a.append("line").style("opacity","0").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.width}).style("stroke-dasharray",function(t){return t.dasharray}),a.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",n.axis_rotated?"":"rotate(-90)").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity","0"),e.xgridLines=a.merge(e.xgridLines),n.grid_y_show&&e.updateYGrid(),e.ygridLines=i.select("."+s.default.ygridLines).selectAll("."+s.default.ygridLine).data(n.grid_y_lines),e.ygridLines.exit().transition().duration(t).style("opacity","0").remove();var r=e.ygridLines.enter().append("g").attr("class",function(t){return s.default.ygridLine+(t.class?" "+t.class:"")});r.append("line").style("opacity","0").style("stroke",function(t){return t.color}).style("stroke-width",function(t){return t.width}).style("stroke-dasharray",function(t){return t.dasharray}),r.append("text").attr("text-anchor",e.gridTextAnchor).attr("transform",n.axis_rotated?"rotate(-90)":"").attr("dx",e.gridTextDx).attr("dy",-5).style("opacity","0"),e.ygridLines=r.merge(e.ygridLines);var o=e.yv.bind(e);e.ygridLines.select("line").transition().duration(t).attr("x1",n.axis_rotated?o:0).attr("x2",n.axis_rotated?o:e.width).attr("y1",n.axis_rotated?0:o).attr("y2",n.axis_rotated?e.height:o).transition().style("opacity","1"),e.ygridLines.select("text").transition().duration(t).attr("x",n.axis_rotated?e.xGridTextX.bind(e):e.yGridTextX.bind(e)).attr("y",o).text(function(t){return t.text}).transition().style("opacity","1")},redrawGrid:function(t){var e=this,i=e.config.axis_rotated,n=e.xv.bind(e),a=e.xgridLines.select("line"),r=e.xgridLines.select("text");return a=(t?a.transition():a).attr("x1",i?0:n).attr("x2",i?e.width:n).attr("y1",i?n:0).attr("y2",i?n:e.height),r=(t?r.transition():r).attr("x",i?e.yGridTextX.bind(e):e.xGridTextX.bind(e)).attr("y",n).style("font-size",function(t){return(0,l.notEmpty)(t.font_size)?t.font_size:"11px"}).style("fill",function(t){return(0,l.notEmpty)(t.font_color)?t.font_color:"black"}).style("font-weight",function(t){return(0,l.notEmpty)(t.font_weight)?t.font_weight:"normal"}).text(function(t){return t.text}),[(t?a.transition():a).style("opacity","1"),(t?r.transition():r).style("opacity","1")]},showXGridFocus:function(t){var e=this,i=e.config,n=t.filter(function(t){return t&&(0,l.isValue)(t.value)}),a=e.main.selectAll("line."+s.default.xgridFocus),r=e.xx.bind(e);if(i.tooltip_show&&!(e.hasType("bubble")||e.hasType("scatter")||this.hasType("radar")||this.hasType("chord")||this.hasType("pack")||this.hasType("treemap")||e.hasArcType())){var o=e.color(n[0].id);a.style("visibility","visible").data([n[0]]).attr(i.axis_rotated?"y1":"x1",r).attr(i.axis_rotated?"y2":"x2",r).style("stroke",o).style("stroke-width","40px").style("stroke-opacity","0.1"),e.smoothLines(a,"grid")}},hideXGridFocus:function(){this.main.select("line."+s.default.xgridFocus).style("visibility","hidden")},showYGridFocus:function(t){var e=this,i=e.config,n=t.filter(function(t){return t&&(0,l.isValue)(t.value)}),a=e.main.selectAll("line."+s.default.ygridFocus);if(i.tooltip_show&&!e.hasType("scatter")&&!e.hasArcType()){var r=n,o=e.y(r[0].value),u=e.color(r[0].id);a.style("visibility","visible").data([n[0]]).attr("x1",e.xMin).attr("y1",o).attr("x2",e.xMax).attr("y2",o).style("stroke",u).style("stroke-width","0px").style("stroke-opacity","0.1")}},hideYGridFocus:function(){this.main.select("line."+s.default.ygridFocus).style("visibility","hidden")},showXDataFocus:function(){},hideXDataFocus:function(){},showYDataFocus:function(){},hideYDataFocus:function(){},updateXgridFocus:function(){var t=this,e=t.config;t.main.select("line."+s.default.xgridFocus).attr("x1",e.axis_rotated?0:-10).attr("x2",e.axis_rotated?t.width:-10).attr("y1",e.axis_rotated?-10:0).attr("y2",e.axis_rotated?-10:t.height)},generateGridData:function(t,e){var i=this,n=i.main.select("."+s.default.axisX).selectAll(".tick").size(),a=[];if("year"===t)for(var r=i.getXDomain(),o=r[0].getFullYear(),l=r[1].getFullYear(),u=o;u<=l;u++)a.push(new Date(u+"-01-01 00:00:00"));else a=e.ticks(10),a.length>n&&(a=a.filter(function(t){return(t+"").indexOf(".")<0}));return a},getGridFilterToRemove:function(t){return t?function(e){var i=!1;return((0,l.isArray)(t)?t.concat():[t]).forEach(function(t){("value"in t&&e.value===t.value||"class"in t&&e.class===t.class)&&(i=!0)}),i}:function(){return!0}},removeGridLines:function(t,e){var i=this,n=i.config,a=i.getGridFilterToRemove(t),r=function(t){return!a(t)},o=e?s.default.xgridLines:s.default.ygridLines,l=e?s.default.xgridLine:s.default.ygridLine;i.main.select("."+o).selectAll("."+l).filter(a).transition().duration(n.transition_duration).style("opacity","0").remove(),e?n.grid_x_lines=n.grid_x_lines.filter(r):n.grid_y_lines=n.grid_y_lines.filter(r)}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initTooltip:function(){var t=this,e=t.config,i=void 0;if(t.tooltip=t.selectChart.style("position","relative").append("div").attr("class",s.default.tooltipContainer).style("position","absolute").style("pointer-events","none").style("display","none"),e.tooltip_init_show){if(t.isTimeSeries()&&(0,l.isString)(e.tooltip_init_x)){for(e.tooltip_init_x=t.parseDate(e.tooltip_init_x),i=0;i<t.data.targets[0].values.length&&t.data.targets[0].values[i].x-e.tooltip_init_x!=0;i++);e.tooltip_init_x=i}t.tooltip.html(e.tooltip_contents.call(t,t.data.targets.map(function(i){return t.addName(i.values[e.tooltip_init_x])}),t.axis.getXAxisTickFormat(),t.getYFormat(t.hasArcType()),t.color))}},getTooltipContent:function(t,e,i,n){var a=this,r=a.config,o=r.tooltip_format_title||e,s=r.tooltip_format_name||function(t){return t},u=r.tooltip_format_value||i,c=r.tooltip_order,d={prefix:r.tooltip_value_prefix,suffix:r.tooltip_value_suffix,format:r.tooltip_value_format},h={color:r.tooltip_data_color,format:r.tooltip_data_format},p={display:r.tooltip_header_display,color:r.tooltip_header_color},f={color:r.tooltip_background_color},g={color:r.tooltip_border_color,width:r.tooltip_border_width,style:r.tooltip_border_style},_="",m=void 0,y=void 0,v=void 0;if(null===c&&r.data_groups.length){var x=a.orderTargets(a.data.targets).map(function(t){return t.id}).reverse();t.sort(function(t,e){var i=t?t.value:null,n=e?e.value:null;return i>0&&n>0&&(i=t.id?x.indexOf(t.id):null,n=e.id?x.indexOf(e.id):null),i-n})}else/^(asc|desc)$/.test(c)?t.sort(function(t,e){var i=t?t.value:null,n=e?e.value:null;return"asc"===c?i-n:n-i}):(0,l.isFunction)(c)&&t.sort(c);for(var b,w=0,L=t.length;w<L;w++)if((b=t[w])&&(b.value||0===b.value)&&(h.color=a.levelColor?a.levelColor(b.value):n(b.id),_||(!0===p.display&&(m=(0,l.sanitise)(o?o(b.x):b.x),_=!0===r.tooltip_grouped?m||0===m?'<tr><th style="background-color:'+p.color+' ; border: none;" colspan="2">'+m+"</th></tr>":"":m||0===m?'<tr><th style="border: none; background-color:'+h.color+';" colspan="2">'+m+"</th></tr>":""),r.tooltip_grouped?_='<table \n\t\t\t\t\t\tstyle="background-color: '+f.color+"; border: "+g.width+" "+g.style+" "+h.color+'; border-radius: 6px;" \n\t\t\t\t\t\tclass="'+a.CLASS.tooltip.grouped+'">'+_:(g.width="2px",g.style="solid",_='<table \n\t\t\t\t\t\tstyle="display: block; background-color: '+f.color+"; border: "+g.width+" "+g.style+" "+h.color+'; border-radius: 6px" \n\t\t\t\t\t\tclass="'+a.CLASS.tooltip.single+'">'+_)),void 0!==(y=(0,l.sanitise)(u(b.value,b.ratio,b.id,b.index,t))))){if(null===b.name)continue;v=(0,l.sanitise)(s(b.name,b.ratio,b.id,b.index)),_+='<tr class="'+a.CLASS.tooltipName+a.getTargetSelectorSuffix(b.id)+'">\n\t\t\t\t\t\t\t<td class="name" style="background-color: '+f.color+'"><span style="background-color:'+h.color+'"></span>'+v+':</td>\n\t\t\t\t\t\t\t<td class="value" style="background-color: '+f.color+'">'+d.prefix+" "+y+" "+d.suffix+"</td>\n\t\t\t\t\t\t</tr>"}return _+"</table>"},tooltipPosition:function(t,e,i,a){var r=this,o=r.config,s=r.hasArcType(),l="touch"===r.inputType,u=(0,n.mouse)(a),c=r.svg._groups[0][0].clientWidth,d=r.width,h=void 0,p=void 0,f=void 0,g=void 0,_=void 0;return s?(p=l?u[0]:(r.width-(r.isLegendRight?r.getLegendWidth():0))/2+u[0],g=l?u[1]+20:r.height/2+u[1]+20):(h=r.getSvgLeft(!0),o.axis_rotated?(p=h+u[0]+100,f=p+e,_=r.currentWidth-r.getCurrentPaddingRight(),g=r.x(t[0].x)+20,1===t.length&&(p=r.x(t[0].x)-Math.round(e/2)+(c-d)-2,g=r.y(t[0].value)-60,f=p+e,"bar"===r.isBarType(t[0].id)&&(p=t[0].topCoordinates.y+(c-d),f=p+e,g=t[0].topCoordinates.x-20))):(p=h+r.getCurrentPaddingLeft(!0)+r.x(t[0].x)+20,f=p+e,_=h+r.currentWidth-r.getCurrentPaddingRight(),g=u[1]+15,1===t.length&&(p=r.x(t[0].x)-Math.round(e/2)+(c-d)-2,f=p+e,g=r.y(t[0].value)-i-10,!0===r.isBarType(t[0].id)&&(p=t[0].topCoordinates.x-Math.round(e/2)+(c-d),g=t[0].topCoordinates.y-i-10,f=p+e))),f>_&&!o.axis_rotated&&(o.tooltip_grouped?p=p-(f-_)-20:!0===r.isBarType(t[0].id)&&(p=t[0].topCoordinates.x-Math.round(e/2)+(c-d),g=t[0].topCoordinates.y-i-10,f=p+e)),g+i>r.currentHeight&&(g-=i+30,1===t.length&&(g=r.y(t[0].value)+20))),r.isLogarithmicY()||r.isLogarithmicX()?(p<0&&(p=u[0]+20),g<0&&(g=u[1]+20)):g<0&&(g=0),{top:g,left:p}},showTooltip:function(t,e){var i=this,a=i.config,r=i.hasArcType(),o=t.filter(function(t){return t&&(0,l.isValue)(t.value)}),s=a.tooltip_position||i.tooltipPosition;if(0!==o.length&&a.tooltip_show){i.tooltip.html(a.tooltip_contents.call(i,t,i.axis.getXAxisTickFormat(),i.getYFormat(r),i.color)).style("display","block");var u=i.tooltip.property("offsetWidth"),c=i.tooltip.property("offsetHeight"),d=s.call(this,o,u,c,e);i.tooltip.transition().ease(n.easeLinear).duration(200).style("top",d.top+"px").style("left",d.left+"px")}},showTooltipApi:function(t,e){var i=this,n=i.config,a=i.hasArcType();0!==t.filter(function(t){return t&&(0,l.isValue)(t.value)}).length&&n.tooltip_show&&(i.tooltip.html(n.tooltip_contents.call(i,t,i.axis.getXAxisTickFormat(),i.getYFormat(a),i.color)).style("display","block").style("fill","red"),i.tooltip.style("top",e.getBoundingClientRect().top/2-50+"px").style("left",e.getBoundingClientRect().left-140+"px"))},hideTooltip:function(){this.tooltip.style("display","none")},tooltipRect:function(t,e){var i=this,n=i.svg._groups[0][0].clientWidth,a=i.width,r={x:t.x-e.width/2+(n-a)/2,y:t.y-5};return"M "+r.x+" "+r.y+" \n\t\t\t\t   L "+r.x+" "+(r.y-e.height)+"\n\t\t\t\t   L "+(r.x+e.width)+" "+(r.y-e.height)+"\n\t\t\t\t   L "+(r.x+e.width)+" "+r.y+"\n\t\t\t\t   Z"}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initLegend:function(){var t=this;return t.legendItemTextBox={},t.legendHasRendered=!1,t.legend=t.svg.append("g"),t.legendGroupItems=t.legend.append("g").attr("class",""+s.default.legendItems),t.config.legend_show?void t.updateLegendWithDefaults():(t.legend.style("visibility","hidden"),void(t.hiddenLegendIds=t.mapToIds(t.data.targets)))},updateLegendWithDefaults:function(){var t=this;t.updateLegend(t.mapToIds(t.data.targets),{withTransform:!1,withTransitionForTransform:!1,withTransition:!1})},updateSizeForLegend:function(t,e){var i=this,n=i.config,a={top:i.isLegendTop?i.getCurrentPaddingTop()+n.legend_inset_y+5.5:i.currentHeight-t-i.getCurrentPaddingBottom()-n.legend_inset_y,left:i.isLegendLeft?i.getCurrentPaddingLeft()+n.legend_inset_x+.5:i.currentWidth-e-i.getCurrentPaddingRight()-n.legend_inset_x+.5};i.margin3={top:i.isLegendRight?0:i.isLegendInset?a.top:i.currentHeight-t,right:NaN,bottom:0,left:i.isLegendRight?i.currentWidth-e:i.isLegendInset?a.left:0}},transformLegend:function(t){var e=this;(t?e.legend.transition():e.legend).attr("transform",e.getTranslate("legend")),e.updateLegendAlign(),e.updateLegendVAlign(),e.updateLegendBackgroundRect(t)},updateLegendStep:function(t){this.legendStep=t},updateLegendItemWidth:function(t){this.legendItemWidth=t},updateLegendItemHeight:function(t){this.legendItemHeight=t},getLegendWidth:function(){var t=this;return t.config.legend_show?t.isLegendRight||t.isLegendInset?t.legendItemWidth*(t.legendStep+1):t.currentWidth:0},getLegendHeight:function(){var t=this,e=0;return t.config.legend_show&&(e=t.isLegendRight?t.currentHeight:Math.max(20,t.legendItemHeight)*(t.legendStep+1)),e},opacityForLegend:function(t){return t.classed(s.default.legendItemHidden)?null:"1"},opacityForUnfocusedLegend:function(t){return t.classed(s.default.legendItemHidden)?null:"0.3"},toggleFocusLegend:function(t,e){var i=this,a=i.mapToTargetIds(t);i.legend.selectAll("."+s.default.legendItem).filter(function(t){return a.indexOf(t)>=0}).classed(s.default.legendItemFocused,e).transition().duration(100).style("opacity",function(){return(e?i.opacityForLegend:i.opacityForUnfocusedLegend).call(i,(0,n.select)(this))})},revertLegend:function(){var t=this;t.legend.selectAll("."+s.default.legendItem).classed(s.default.legendItemFocused,!1).transition().duration(100).style("opacity",function(){return t.opacityForLegend((0,n.select)(this))})},showLegend:function(t){var e=this,i=e.config;i.legend_show||(i.legend_show=!0,e.legend.style("visibility","visible"),!e.legendHasRendered&&e.updateLegendWithDefaults()),e.removeHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("visibility","visible").transition().style("opacity",function(){return e.opacityForLegend((0,n.select)(this))})},hideLegend:function(t){var e=this,i=e.config;i.legend_show&&(0,l.isEmpty)(t)&&(i.legend_show=!1,e.legend.style("visibility","hidden")),e.addHiddenLegendIds(t),e.legend.selectAll(e.selectorLegends(t)).style("opacity","0").style("visibility","hidden")},clearLegendItemTextBoxCache:function(){this.legendItemTextBox={}},updateLegend:function(t,e){var i=this,a=i.config,r="touch"===i.inputType,o=0,u=0,c=void 0,d=void 0,h=0,p={},f={},g={},_=[0],m={},y=0,v=t.filter(function(t){return!(0,l.isDefined)(a.data_names[t])||null!==a.data_names[t]}),x=(0,l.getOption)(e||{},"withTransition",!0),b=function(t,e){return i.legendItemTextBox[e]||(i.legendItemTextBox[e]=i.getTextRect(t.textContent,s.default.legendItem,t)),i.legendItemTextBox[e]},w=function(t,e,n){var r=n===v.length-1,s=b(t,e),l=s.width+15+(!r||i.isLegendRight||i.isLegendInset?10:0)+a.legend_padding,c=s.height+4,d=i.isLegendRight||i.isLegendInset?c:l,x=i.isLegendRight||i.isLegendInset?i.getLegendHeight():i.getLegendWidth(),w=void 0,L=function(t,e){e||(w=(x-h-d)/2)<10&&(w=(x-d)/2,h=0,y++),m[t]=y,_[y]=i.isLegendInset?10:w,p[t]=h,h+=d};if(0===n&&(h=0,y=0,o=0,u=0),a.legend_show&&!i.isLegendToShow(e))return f[e]=0,g[e]=0,m[e]=0,void(p[e]=0);f[e]=l,g[e]=c,(!o||l>=o)&&(o=l),(!u||c>=u)&&(u=c);var T=i.isLegendRight||i.isLegendInset?u:o;a.legend_equally?(Object.keys(f).forEach(function(t){return f[t]=o}),Object.keys(g).forEach(function(t){return g[t]=u}),w=(x-T*v.length)/2,w<10?(h=0,y=0,v.forEach(function(t){return L(t)})):L(e,!0)):L(e)};i.isLegendInset&&(y=a.legend_inset_step?a.legend_inset_step:v.length,i.updateLegendStep(y)),i.isLegendRight?(c=function(t){return o*m[t]},d=function(t){return _[m[t]]+p[t]}):i.isLegendInset?(c=function(t){return o*m[t]+10},d=function(t){return _[m[t]]+p[t]}):(c=function(t){return _[m[t]]+p[t]},d=function(t){return u*m[t]});var L=function(t,e){return c(t,e)+14},T=function(t,e){return d(t,e)+9},k=function(t,e){return c(t,e)},C=function(t,e){return d(t,e)-5},A=function(t,e){return c(t,e)+5},P=function(t,e){return d(t,e)+5},M=function(t,e){return c(t,e)-2},S=function(t,e){return d(t,e)-5},E=i.legend.select("."+s.default.legendItems).selectAll("."+s.default.legendItem).data(v).enter().append("g").attr("class",function(t){return i.generateClass(s.default.legendItem,t)}).style("visibility",function(t){return i.isLegendToShow(t)?"visible":"hidden"}).style("cursor","pointer").on(r?"touchstart":"click",function(t){a.legend_item_onclick?a.legend_item_onclick.call(i,t):n.event.altKey?(i.api.hide(),i.api.show(t)):(i.api.toggle(t),i.isTargetToShow(t)?i.api.focus(t):i.api.revert()),r&&i.hideTooltip()}).on(r?void 0:"mouseover",function(t){a.legend_item_onover?a.legend_item_onover.call(i,t):((0,n.select)(this).classed(s.default.legendItemFocused,!0),!i.transiting&&i.isTargetToShow(t)&&i.api.focus(t))}).on(r?"touchend":"mouseout",function(t){a.legend_item_onout?a.legend_item_onout.call(i,t):((0,n.select)(this).classed(s.default.legendItemFocused,!1),i.api.revert())});E.append("text").text(function(t){return(0,l.isDefined)(a.data_names[t])?a.data_names[t]:t}).each(function(t,e){w(this,t,e)}).style("pointer-events","none").attr("x",i.isLegendRight||i.isLegendInset?L:-200).attr("y",i.isLegendRight||i.isLegendInset?-200:T),E.append("rect").attr("class",s.default.legendItemEvent).style("fill-opacity","0").attr("x",i.isLegendRight||i.isLegendInset?k:-200).attr("y",i.isLegendRight||i.isLegendInset?-200:C),E.each(function(t){if((0,l.notEmpty)(a.legend_images)&&(0,l.notEmpty)(a.legend_images[t]))(0,n.select)(this).append("image").attr("class",s.default.legendItemImage).style("pointer-events","none").attr("x",i.isLegendRight||i.isLegendInset?k:-200).attr("y",i.isLegendRight||i.isLegendInset?-200:C).attr("width","15px").attr("height","20px").attr("xmlns:xlink","http://www.w3.org/1999/xlink");else{var e=(0,l.shapeSymbol)(a.legend_item_tile_size);(0,n.select)(this).append("path").attr("class",s.default.legendItemTile).style("pointer-events","none").attr("d",function(t){if((0,l.notEmpty)(a.point_series)&&(0,l.notEmpty)(a.point_series[t])){var i=a.point_series[t],n=(0,l.isEmpty)(i.type)&&(0,l.isString)(i)?i:i.type;if(Object.prototype.hasOwnProperty.call(e,n))return e[n]()}return e.square()}).style("fill",i.color).style("stroke",i.color)}}),0===i.legend.select("."+s.default.legendBackground+" rect").size()&&i.legend.insert("g","."+s.default.legendItems).attr("class",s.default.legendBackground).style("fill","none").append("rect");var B=i.legend.selectAll("text").data(v).text(function(t){return(0,l.isDefined)(a.data_names[t])?a.data_names[t]:t}).each(function(t,e){w(this,t,e)});(x?B.transition():B).attr("x",L).attr("y",T);var D=i.legend.selectAll("rect."+s.default.legendItemEvent).data(v);if((x?D.transition():D).attr("width",function(t){return f[t]}).attr("height",function(t){return g[t]}).attr("x",k).attr("y",C),(0,l.notEmpty)(a.legend_images)){var I=i.legend.selectAll("image."+s.default.legendItemImage).data(v);(x?I.transition():I).attr("x",M).attr("y",S).attr("xlink:href",function(t){return(0,l.notEmpty)(a.legend_images[t])?a.legend_images[t]:""})}var z=i.legend.selectAll("path."+s.default.legendItemTile);if((0,l.notEmpty)(a.legend_images)){var R=v.filter(function(t){return!a.legend_images[t]});z.data(R)}else z.data(v);(x?z.transition():z).style("stroke",i.color).attr("transform",function(t){return"translate("+A(t)+","+P(t)+")"}),i.legend.selectAll("."+s.default.legendItem).classed(s.default.legendItemHidden,function(t){return!i.isTargetToShow(t)}),(x?i.legend.transition():i.legend).on("end",function(){i.updateLegendBackgroundRect(x)}),i.updateLegendItemWidth(o),i.updateLegendItemHeight(u),i.updateLegendStep(y),i.updateSizes(),i.updateScales(!x),i.updateSvgSize(),i.setLegendBackgroundColor(),i.setLegendBorder(),i.legendHasRendered=!0},setLegendBackgroundColor:function(){var t=this,e=t.config,i=t.legend.select("."+s.default.legendBackground+" rect");if((0,l.notEmpty)(i)&&((0,l.notEmpty)(e.legend_background_color)&&i.style("fill",e.legend_background_color),(0,l.notEmpty)(e.legend_background_opacity)&&i.style("fill-opacity",e.legend_background_opacity.toString()),(0,l.notEmpty)(e.legend_style)))for(var n in e.legend_style)i.style(n,e.legend_style[n])},setLegendBorder:function(){var t=this,e=t.config,i=t.legend.select("."+s.default.legendBackground+" rect");(0,l.notEmpty)(e.legend_border_color)&&(0,l.notEmpty)(e.legend_border_width)&&i.style("stroke",e.legend_border_color),(0,l.notEmpty)(e.legend_border_radius)&&i.attr("rx",e.legend_border_radius).attr("ry",e.legend_border_radius),(0,l.notEmpty)(e.legend_border_width)&&i.style("stroke-width",e.legend_border_width+"px"),(0,l.notEmpty)(e.legend_border_type)&&(0,l.notEmpty)(e.legend_border_width)&&i.style("stroke-dasharray",(0,l.borderStyle)(e.legend_border_type)),(0,l.notEmpty)(e.legend_border_types)&&(0,l.notEmpty)(e.legend_border_width)&&i.style("stroke-dasharray",e.legend_border_types)},updateLegendVAlign:function(){var t=this,e=t.config;if((0,l.notEmpty)(e.legend_valign)){var i=t.getTranslate("legend").replace("translate(","").replace(")","").split(","),n=i[0]-8,a=i[1],r=t.legend.node().getBoundingClientRect().top-t.svg.node().getBoundingClientRect().top;"top"===e.legend_valign?t.legend.attr("transform","translate("+n+", "+-1*(r-2)+")"):"bottom"===e.legend_valign?t.legend.attr("transform","translate("+n+", "+(r-15)+")"):t.legend.attr("transform","translate("+n+", "+a+")")}},updateLegendAlign:function(){var t=this,e=t.config;if((0,l.notEmpty)(e.legend_align)){var i=t.getTranslate("legend").replace("translate(","").replace(")","").split(","),n=i[0],a=i[1],r=t.legend.node().getBoundingClientRect().left-t.svg.node().getBoundingClientRect().left;"left"===e.legend_align?t.legend.attr("transform","translate("+-1*(r-t.getHorizontalAxisHeight("y")-10)+", "+a+")"):"right"===e.legend_align?t.legend.attr("transform","translate("+r+", "+a+")"):t.legend.attr("transform","translate("+-1*(n-t.getHorizontalAxisHeight("y"))+", "+a+")")}},updateLegendBackgroundRect:function(t){var e=this,i=e.legend.select("."+s.default.legendBackground+" rect"),n=e.legendGroupItems.node().getBBox();(t?i.transition():i).attr("height",n.height+10).attr("width",n.width+15).attr("x",n.x-8).attr("y",n.y-6)}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(1),a=_interopRequireDefault(n),r=i(2),o=_interopRequireDefault(r),s=i(0);(0,s.extend)(a.default.prototype,{initTitle:function(){var t=this;t.title=t.svg.append("text").text(t.config.title_text).attr("class",o.default.title),t.subTitle=t.svg.append("text").text(t.config.subtitle_text).attr("class",o.default.subTitle)},updateTitle:function(){var t=this,e=t.config;t.title.style("font-family",e.title_font_family).style("font-weight",(0,s.notEmpty)(e.title_font_weight)?e.title_font_weight:"normal").style("font-size",e.title_font_size+"px").style("fill",e.title_color),t.subTitle.style("font-family",e.subtitle_font_family).style("font-weight",(0,s.notEmpty)(e.subtitle_font_weight)?e.subtitle_font_weight:"normal").style("font-size",e.subtitle_font_size+"px").style("fill",e.subtitle_color)},redrawTitle:function(){var t=this;t.title.attr("x",t.xForTitle.bind(t)).attr("y",t.yForTitle.bind(t)),t.subTitle.attr("x",t.xForSubTitle.bind(t)).attr("y",t.yForSubTitle()+t.yForTitle())},xForTitle:function(){var t=this,e=t.config,i=e.title_position||"left",n=t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).width;return i.indexOf("right")>=0?t.currentWidth-n-e.title_padding.right:i.indexOf("center")>=0?(t.currentWidth-n)/2:e.title_padding.left},yForTitle:function(){var t=this;return t.config.title_padding.top+t.getTextRect(t.title.node().textContent,t.CLASS.title,t.title.node()).height},xForSubTitle:function(){var t=this,e=t.config,i=e.subtitle_position||"left",n=t.getTextRect(t.subTitle.node().textContent,t.CLASS.subTitle,t.subTitle.node()).width;return i.indexOf("right")>=0?t.currentWidth-n-e.subtitle_padding.right:i.indexOf("center")>=0?(t.currentWidth-n)/2:e.subtitle_padding.left},yForSubTitle:function(){var t=this;return t.config.subtitle_padding.top+t.getTextRect(t.subTitle.node().textContent,t.CLASS.subTitle,t.subTitle.node()).height},getTitlePadding:function(){var t=this;return t.yForTitle()+t.config.title_padding.bottom},getSubTitlePadding:function(){var t=this;return t.yForSubTitle()+t.config.subtitle_padding.bottom}})},function(t,e,i){"use strict";var n=i(1),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{getClipPath:function(t){return"url("+(window.navigator.appVersion.toLowerCase().indexOf("msie 9.")>=0?"":document.URL.split("#")[0])+"#"+t+")"},appendClip:function(t,e){return t.append("clipPath").attr("id",e).append("rect")},getAxisClipX:function(t){var e=Math.max(30,this.margin.left);return t?-(1+e):-(e-1)},getAxisClipY:function(t){return t?-20:-this.margin.top},getXAxisClipX:function(){var t=this;return t.getAxisClipX(!t.config.axis_rotated)},getXAxisClipY:function(){var t=this;return t.getAxisClipY(!t.config.axis_rotated)},getYAxisClipX:function(){var t=this;return t.config.axis_y_inner?-1:t.getAxisClipX(t.config.axis_rotated)},getYAxisClipY:function(){var t=this;return t.getAxisClipY(t.config.axis_rotated)},getAxisClipWidth:function(t){var e=this,i=Math.max(30,e.margin.left),n=Math.max(30,e.margin.right);return t?e.width+2+i+n:e.margin.left+20},getAxisClipHeight:function(t){return(t?this.margin.bottom:this.margin.top+this.height)+20},getXAxisClipWidth:function(){var t=this;return t.getAxisClipWidth(!t.config.axis_rotated)},getXAxisClipHeight:function(){var t=this;return t.getAxisClipHeight(!t.config.axis_rotated)},getYAxisClipWidth:function(){var t=this;return t.getAxisClipWidth(t.config.axis_rotated)+(t.config.axis_y_inner?20:0)},getYAxisClipHeight:function(){var t=this;return t.getAxisClipHeight(t.config.axis_rotated)}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initPie:function(){var t=this,e=t.config,i={start:(e[e.data_type+"_startAngle"]||0)/180*Math.PI,end:(e[e.data_type+"_endAngle"]||360)/180*Math.PI};t.pie=(0,n.pie)().padAngle(e[e.data_type+"_padAngle"]||0).value(function(t){return t.values.reduce(function(t,e){return t+e.value},0)}).startAngle(i.start).endAngle(i.end),e.data_order||t.pie.sort(null)},updateRadius:function(){var t=this,e=t.config,i=e.gauge_width||e.donut_width,n=(0,l.isDefined)(i),a=!(t.hasType("donut")||t.hasType("gauge")),r={},o={};t.radiusExpanded=Math.min(t.arcWidth,t.arcHeight)/2,o.outer=.95*t.radiusExpanded,r.outer=e[e.data_type+"_outerRadius"],t.radius=Math.min(o.outer,(0,l.isUndefined)(r.outer)?o.outer:r.outer),t.defaultInnerRadiusRatio=n?(t.radius-i)/t.radius:.6,o.inner=a?0:t.radius*t.defaultInnerRadiusRatio;var s=(0,l.isDefined)(e[e.data_type+"_innerRadius"]),u=(0,l.isPercentage)(r.inner)||(0,l.isNumber)(r.inner),c=t.radius-5;!n&&s&&u?((0,l.isPercentage)(r.inner)&&(r.inner=Math.min((0,l.convertPercentage)(r.inner)*t.radius,c)),(0,l.isNumber)(r.inner)&&(r.inner=Math.min(r.inner,c))):r.inner=o.inner,t.innerRadius=r.inner},updateArc:function(){var t=this;t.svgArc=t.getSvgArc(),t.svgArcExpanded=t.getSvgArcExpanded(),t.svgArcExpandedSub=t.getSvgArcExpanded(.98)},updateAngle:function(t){var e=this,i=e.config,n=t,a=!1,r=0,o=void 0,s=void 0,l=void 0,u=void 0;return i?(e.pie(e.filterTargetsToShow(e.data.targets)).forEach(function(t){a||t.data.id!==n.data.id||(a=!0,n=t,n.index=r),r++}),isNaN(n.startAngle)&&(n.startAngle=0),isNaN(n.endAngle)&&(n.endAngle=n.startAngle),e.isGaugeType(n.data)&&(o=i.gauge_min,s=i.gauge_max,l=Math.PI*(i.gauge_fullCircle?2:1)/(s-o),u=n.value<o?0:n.value<s?n.value-o:s-o,n.startAngle=i.gauge_startingAngle,n.endAngle=n.startAngle+l*u),a?n:null):null},getSvgArc:function(){var t=this,e=t.config,i=e[e.data_type+"_cornerRadius"],a=(0,n.arc)().outerRadius(t.radius).innerRadius(t.innerRadius).cornerRadius(i),r=function(e,i){if(i)return a(e);var n=t.updateAngle(e);return n?a(n):"M 0 0"};return r.centroid=a.centroid,r},getSvgArcExpanded:function(t){var e=this,i=e.config,a=i[i.data_type+"_cornerRadius"],r=(0,n.arc)().outerRadius(e.radiusExpanded*(t||1)).innerRadius(e.innerRadius).cornerRadius(a);return function(t){var i=e.updateAngle(t);return i?r(i):"M 0 0"}},getArc:function(t,e,i){return i||this.isArcType(t.data)?this.svgArc(t,e):"M 0 0"},transformForArcLabel:function(t){var e=this,i=e.config,n=e.updateAngle(t),a=void 0,r=void 0,o=void 0,s=void 0,u=void 0,c="";return n&&!e.hasType("gauge")&&(a=this.svgArc.centroid(n),r=isNaN(a[0])?0:a[0],o=isNaN(a[1])?0:a[1],s=Math.sqrt(r*r+o*o),u=e.hasType("donut")&&i.donut_label_ratio?(0,l.isFunction)(i.donut_label_ratio)?i.donut_label_ratio(t,e.radius,s):i.donut_label_ratio:e.hasType("pie")&&i.pie_label_ratio?(0,l.isFunction)(i.pie_label_ratio)?i.pie_label_ratio(t,e.radius,s):i.pie_label_ratio:e.radius&&(s?(36/e.radius>.375?1.175-36/e.radius:.8)*e.radius/s:0),c="translate("+r*u+","+o*u+")",e.hasType("pie")&&(0,l.notEmpty)(i.pie_label_rotate)&&(c+="rotate("+i.pie_label_rotate+")")),c},getArcRatio:function(t){var e=this,i=e.config,n=Math.PI*(e.hasType("gauge")&&!i.gauge_fullCircle?1:2);return t?(t.endAngle-t.startAngle)/n:null},convertToArcData:function(t){return this.addName({id:t.data.id,value:t.value,ratio:this.getArcRatio(t),index:t.index})},textForArcLabel:function(t){var e=this;if(!e.shouldShowArcLabel())return"";var i=e.updateAngle(t),n=i?i.value:null,a=e.getArcRatio(i),r=t.data.id;if(!e.hasType("gauge")&&!e.meetsArcLabelThreshold(a))return"";var o=e.getArcLabelFormat();return o?o(n,a,r):e.defaultArcValueFormat(n,a)},textForGaugeMinMax:function(t,e){var i=this.getGaugeLabelExtents();return i?i(t,e):t},expandArc:function(t){var e=this,i=void 0;if(e.transiting)return void(i=window.setInterval(function(){e.transiting||(window.clearInterval(i),e.legend.selectAll(".rb-legend-item-focused").size()>0&&e.expandArc(t))},10));var a=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(a,"."+s.default.chartArc)).each(function(t){e.shouldExpand(t.data.id)&&(0,n.select)(this).selectAll("path").transition().duration(e.expandDuration(t.data.id)).attr("d",e.svgArcExpanded).transition().duration(2*e.expandDuration(t.data.id)).attr("d",e.svgArcExpandedSub)})},unexpandArc:function(t){var e=this;if(!e.transiting){var i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i,"."+s.default.chartArc)).selectAll("path").transition().duration(function(t){return e.expandDuration(t.data.id)}).attr("d",e.svgArc),e.svg.selectAll(""+s.default.arc).style("opacity","1")}},expandDuration:function(t){var e=this,i=e.config;return e.isDonutType(t)?i.donut_expand_duration:e.isGaugeType(t)?i.gauge_expand_duration:e.isPieType(t)?i.pie_expand_duration:50},shouldExpand:function(t){var e=this,i=e.config;return e.isDonutType(t)&&i.donut_expand||e.isGaugeType(t)&&i.gauge_expand||e.isPieType(t)&&i.pie_expand},shouldShowArcLabel:function(){var t=this,e=t.config,i=!0;return t.hasType("donut")?i=e.donut_label_show:t.hasType("pie")&&(i=e.pie_label_show),i},meetsArcLabelThreshold:function(t){var e=this,i=e.config;return t>=(e.hasType("donut")?i.donut_label_threshold:i.pie_label_threshold)},getArcLabelFormat:function(){var t=this,e=t.config,i=e.pie_label_format;return t.hasType("gauge")?i=e.gauge_label_format:t.hasType("donut")&&(i=e.donut_label_format),i},getGaugeLabelExtents:function(){return this.config.gauge_label_extents},getArcTitle:function(){var t=this;return t.hasType("donut")?t.config.donut_title:""},updateTargetsForArc:function(t){var e=this,i=e.main,n=e.classChartArc.bind(e),a=e.classArcs.bind(e),r=e.classFocus.bind(e),o=i.select("."+s.default.chartArcs).selectAll("."+s.default.chartArc).data(e.pie(t)).attr("class",function(t){return n(t)+r(t.data)}),l=o.enter().append("g").attr("class",n);l.append("g").attr("class",a).merge(o),l.append("text").attr("dy",e.hasType("gauge")?"-.1em":".35em").style("opacity","0").style("text-anchor","middle").style("pointer-events","none")},initArc:function(){var t=this;t.arcs=t.main.select("."+s.default.chart).append("g").attr("class",s.default.chartArcs).attr("transform",t.getTranslate("arc")),t.setArcTitle()},setArcTitle:function(){var t=this,e=t.getArcTitle();if(e){var i=e.split("\n"),n=t.arcs.append("text").attr("class",s.default.chartArcsTitle).style("text-anchor","middle");if(i.length>1){var a=+n.style("font-size").replace("px",""),r=Math.floor(n.text(".").node().getBBox().height,n.text(""));i.forEach(function(t,e){return n.insert("tspan").text(t).attr("x",0).attr("dy",e?r:0)}),n.attr("y","-"+(a*(i.length-2)||a/2))}else n.text(e)}},redrawArc:function(t,e,i){function selectArc(t,e,i){a.expandArc(i),a.api.focus(i),a.toggleFocusLegend(i,!0),a.showTooltip([e],t)}function unselectArc(t){var e=t&&t.id||void 0;a.unexpandArc(e),a.api.revert(),a.revertLegend(),a.hideTooltip()}var a=this,r=a.config,o=a.main,u="touch"===a.inputType,c="mouse"===a.inputType,d=o.selectAll("."+s.default.arcs).selectAll("."+s.default.arc).data(a.arcData.bind(a));if(d.exit().transition().duration(e).style("opacity","0").remove(),d=d.enter().append("path").attr("class",a.classArc.bind(a)).style("fill",function(t){return a.color(t.data)}).style("cursor",function(t){var e=r.point_series[t.data.id],i=r.point_cursor,n=(0,l.notEmpty)(i)?i:"default";if((0,l.notEmpty)(e)){var a=(0,l.isURL)(e.cursor),o="url("+e.cursor+"), auto";n=a?o:e.cursor}return n}).style("opacity","0").each(function(t){a.isGaugeType(t.data)&&(t.startAngle=r.gauge_startingAngle,t.endAngle=r.gauge_startingAngle),this._current=t}).merge(d),d.attr("transform",function(t){return!a.isGaugeType(t.data)&&i?"scale(0)":""}).style("opacity",function(t){return t===this._current?"0":"1"}).each(function(){a.transiting=!0}).transition().duration(t).attrTween("d",function(t){var e=a.updateAngle(t);if(!e)return function(){return"M 0 0"};isNaN(this._current.startAngle)&&(this._current.startAngle=0),isNaN(this._current.endAngle)&&(this._current.endAngle=this._current.startAngle);var i=(0,n.interpolate)(this._current,e);return this._current=i(0),function(e){var n=i(e);return n.data=t.data,a.getArc(n,!0)}}).attr("transform",i?"scale(1)":"").style("fill",function(t){return a.levelColor?a.levelColor(t.data.values[0].value):a.color(t.data.id)}).style("opacity","1").call(a.endall,function(){a.transiting=!1}),r.interaction_enabled&&(d.on("click",function(t,e){var i=a.updateAngle(t),n=void 0;i&&(n=a.convertToArcData(i),a.toggleShape&&a.toggleShape(this,n,e),a.config.data_onclick.call(a.api,n,this)),r.pie_sliced&&a.clickSliced(this),a.drillDownDraw(n)}),c&&d.on("mouseover",function(t){if(!a.transiting){var e=a.updateAngle(t),i=e?a.convertToArcData(e):null;selectArc(this,i,i&&i.id||void 0),a.config.data_onover(i,this)}}).on("mouseout",function(t){if(!a.transiting){var e=a.updateAngle(t),i=e?a.convertToArcData(e):null;unselectArc(),a.config.data_onout(i,this)}}).on("mousemove",function(t){var e=a.updateAngle(t),i=e?a.convertToArcData(e):null;a.showTooltip([i],this)}),u&&a.hasArcType())){var h=function(){var t=n.event.changedTouches[0];return(0,n.select)(document.elementFromPoint(t.clientX,t.clientY))};a.svg.on("touchstart",function(){if(!a.transiting){var t=h(),e=t.datum(),i=e&&e.data&&e.data.id?a.updateAngle(e):null,n=i?a.convertToArcData(i):null,r=n&&n.id||void 0;void 0===r?unselectArc():selectArc(this,n,r),a.config.data_onover(n,this)}}).on("touchend",function(){if(!a.transiting){var t=h(),e=t.datum(),i=e&&e.data&&e.data.id?a.updateAngle(e):null,n=i?a.convertToArcData(i):null,r=n&&n.id||void 0;void 0===r?unselectArc():selectArc(this,n,r),a.config.data_onout(n,this)}}).on("touchmove",function(){var t=h(),e=t.datum(),i=e&&e.data&&e.data.id?a.updateAngle(e):null,n=i?a.convertToArcData(i):null,r=n&&n.id||void 0;void 0===r?unselectArc():selectArc(this,n,r)})}o.selectAll("."+s.default.chartArc).select("text").style("opacity","0").attr("class",function(t){return a.isGaugeType(t.data)?s.default.gaugeValue:""}).text(a.textForArcLabel.bind(a)).attr("transform",a.transformForArcLabel.bind(a)).style("font-size",function(t){return a.isGaugeType(t.data)?Math.round(a.radius/5)+"px":""}).transition().duration(t).style("opacity",function(t){return a.isTargetToShow(t.data.id)&&a.isArcType(t.data)?"1":"0"}),o.select("."+s.default.chartArcsTitle).style("opacity",a.hasType("donut")||a.hasType("gauge")?"1":"0"),(0,l.notEmpty)(r.pie_series)&&d.each(function(t){(0,l.notEmpty)(r.pie_series[t.data.id])&&r.pie_series[t.data.id].sliced&&a.openSliced(this)}),a.hasType("gauge")&&(a.arcs.select("."+s.default.chartArcsBackground).attr("d",function(){var t={data:[{value:r.gauge_max}],startAngle:r.gauge_startingAngle,endAngle:-1*r.gauge_startingAngle};return a.getArc(t,!0,!0)}),a.arcs.select("."+s.default.chartArcsGaugeUnit).attr("dy",".75em").text(r.gauge_label_show?r.gauge_units:""),a.arcs.select("."+s.default.chartArcsGaugeMin).attr("dx",-1*(a.innerRadius+(a.radius-a.innerRadius)/(r.gauge_fullCircle?1:2))+"px").attr("dy","1.2em").text(r.gauge_label_show?a.textForGaugeMinMax(r.gauge_min,!1):""),a.arcs.select("."+s.default.chartArcsGaugeMax).attr("dx",a.innerRadius+(a.radius-a.innerRadius)/(r.gauge_fullCircle?1:2)+"px").attr("dy","1.2em").text(r.gauge_label_show?a.textForGaugeMinMax(r.gauge_max,!0):""))},clickSliced:function(t){var e=this;e.closeSliced(),("false"===(0,n.select)(t).attr("expanded")||null===(0,n.select)(t).attr("expanded"))&&e.openSliced(t)},openSliced:function(t){var e=this,i=e.config;(0,n.select)(t).transition().ease(n.easeBounce).duration(i.transition_duration).attr("transform",function(t){var i=e.svgArc.centroid(t),n=isNaN(i[0])?0:i[0],a=isNaN(i[1])?0:i[1],r=Math.sqrt(n*n+a*a);return"translate("+n/r*15+","+a/r*15+")"}).on("end",function(){(0,n.select)(this).attr("expanded","true")})},closeSliced:function(){var t=this,e=t.config;t.arcs.selectAll("path").transition().ease(n.easeBounce).duration(e.transition_duration).attr("transform","translate(0,0)").on("end",function(){(0,n.select)(this).attr("expanded","false")})},initGauge:function(){var t=this.arcs;this.hasType("gauge")&&(t.append("path").attr("class",s.default.chartArcsBackground),t.append("text").attr("class",s.default.chartArcsGaugeUnit).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",s.default.chartArcsGaugeMin).style("text-anchor","middle").style("pointer-events","none"),t.append("text").attr("class",s.default.chartArcsGaugeMax).style("text-anchor","middle").style("pointer-events","none"))},getGaugeLabelHeight:function(){return this.config.gauge_label_show?20:0}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initRegion:function(){var t=this;t.region=t.main.append("g").attr("clip-path",t.clipPath).attr("class",s.default.regions)},updateRegion:function(t){var e=this,i=e.config;e.region.style("visibility",e.hasArcType()?"hidden":"visible"),e.mainRegionDefs=e.svg.select("defs").selectAll("."+e.clipId+"-regions-background-image").data(i.regions),e.mainRegionDefs.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegionDefs=e.mainRegionDefs.enter().append("clipPath").merge(e.mainRegionDefs).attr("id",function(t,i){return e.clipId+"-regions-background-image-"+i}).attr("class",e.clipId+"-regions-background-image"),e.mainRegionDefs.append("rect").attr("fill","none").attr("class",s.default.regionsRectClipPath),e.mainRegion=e.main.select("."+s.default.regions).selectAll("."+s.default.region).data(i.regions),e.mainRegion.exit().transition().duration(t).style("opacity","0").remove(),e.mainRegion=e.mainRegion.enter().append("g").merge(e.mainRegion).attr("class",e.classRegion.bind(e)),e.mainRegion.each(function(t,i){var a=(0,n.select)(this);a.append("rect").attr("class",s.default.regionsRect).style("opacity","0").style("fill-opacity","0");var r=a.select("rect");if((0,l.notEmpty)(t.background)&&(0,l.notEmpty)(t.background.image)){var o=e.clipId+"-regions-background-image-"+i,u=e.mainRegionDefs.select("#"+o+" rect");a.append("image").attr("class",s.default.regionsImage).attr("preserveAspectRatio","none").attr("clip-path",e.getClipPath(o)).style("opacity","0").style("fill-opacity","0");var c=a.select("image");r.style("fill","none"),e.setRegionBackgroundImage(c,t),e.setRegionBorderRadiusClipPath(u,t)}e.setRegionBackgroundColor(r,t),e.setRegionBackgroundOpacity(r,t),e.setRegionBorderColor(r,t),e.setRegionBorderType(r,t),e.setRegionBorderWidth(r,t),e.setRegionBorderRadius(r,t),e.setRegionStyle(r,t)})},redrawRegion:function(t){var e=this,i=e.regionX.bind(e),a=e.regionY.bind(e),r=e.regionWidth.bind(e),o=e.regionHeight.bind(e),u=e.mainRegionDefs.select("."+s.default.regionsRectClipPath),c=e.mainRegion.select("."+s.default.regionsRect),d=e.mainRegion.select("."+s.default.regionsImage);return u=(t?u.transition():u).attr("x",i).attr("y",a).attr("width",r).attr("height",o),d=(t?d.transition():d).style("opacity","1").attr("x",i).attr("y",a).attr("width",r).attr("height",o),c=(t?c.transition():c).style("opacity","1").attr("x",i).attr("y",a).attr("width",r).attr("height",o),[(t?c.transition():c).style("fill-opacity",function(t){return(0,l.isValue)(t.opacity)?t.opacity.toString():"0.1"}).on("end",function(){(0,n.select)(this.parentNode).selectAll("rect:not([x])").remove()}),(t?d.transition():d).style("fill-opacity",function(t){return(0,l.isValue)(t.opacity)?t.opacity.toString():"0.1"}).on("end",function(){(0,n.select)(this.parentNode).selectAll("image:not([x])").remove()}),(t?u.transition():u).style("fill-opacity",function(t){return(0,l.isValue)(t.opacity)?t.opacity.toString():"0.1"}).on("end",function(){(0,n.select)(this.parentNode).selectAll("rect:not([x])").remove()})]},regionX:function(t){var e=this,i=e.config,n="y"===t.axis?e.y:e.y2,a=void 0;return"y"===t.axis||"y2"===t.axis?(a=i.axis_rotated&&"start"in t?n(t.start):0,(0,l.notEmpty)(t.border)&&(0,l.notEmpty)(t.border.width)&&(a+=t.border.width),(0,l.notEmpty)(t.style)&&(0,l.notEmpty)(t.style.stroke)&&(a+=(0,l.notEmpty)(t.style["stroke-width"])?parseFloat(t.style["stroke-width"]):1)):a=i.axis_rotated?0:"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0,a},regionY:function(t){var e=this,i=e.config,n="y"===t.axis?e.y:e.y2,a=void 0;return"y"===t.axis||"y2"===t.axis?a=i.axis_rotated?0:"end"in t?n(t.end):0:(a=i.axis_rotated&&"start"in t?e.x(e.isTimeSeries()?e.parseDate(t.start):t.start):0,(0,l.notEmpty)(t.border)&&(0,l.notEmpty)(t.border.width)&&(a+=t.border.width),(0,l.notEmpty)(t.style)&&(0,l.notEmpty)(t.style.stroke)&&(a+=(0,l.notEmpty)(t.style["stroke-width"])?parseFloat(t.style["stroke-width"]):1)),a},regionWidth:function(t){var e=this,i=e.config,n="y"===t.axis?e.y:e.y2,a=e.regionX(t),r=void 0;return"y"===t.axis||"y2"===t.axis?(r=i.axis_rotated&&"end"in t?n(t.end):e.width,(0,l.notEmpty)(t.border)&&(0,l.notEmpty)(t.border.width)&&(r-=Math.ceil(t.border.width/2)),(0,l.notEmpty)(t.style)&&(0,l.notEmpty)(t.style.stroke)&&(r-=Math.ceil(((0,l.notEmpty)(t.style["stroke-width"])?parseFloat(t.style["stroke-width"]):1)/2))):r=i.axis_rotated?e.width:"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.width,r<a?0:r-a},regionHeight:function(t){var e=this,i=e.config,n=this.regionY(t),a=void 0,r="y"===t.axis?e.y:e.y2;return"y"===t.axis||"y2"===t.axis?a=i.axis_rotated?e.height:"start"in t?r(t.start):e.height:(a=i.axis_rotated&&"end"in t?e.x(e.isTimeSeries()?e.parseDate(t.end):t.end):e.height,(0,l.notEmpty)(t.border)&&(0,l.notEmpty)(t.border.width)&&(a-=t.border.width),(0,l.notEmpty)(t.style)&&(0,l.notEmpty)(t.style.stroke)&&(a-=(0,l.notEmpty)(t.style["stroke-width"])?parseFloat(t.style["stroke-width"]):1)),a<n?0:a-n},isRegionOnX:function(t){return!t.axis||"x"===t.axis},setRegionBackgroundImage:function(t,e){(0,l.notEmpty)(e.background)&&(0,l.notEmpty)(e.background.image)&&t.attr("xlink:href",e.background.image)},setRegionBackgroundColor:function(t,e){(0,l.notEmpty)(e.background)&&(0,l.notEmpty)(e.background.color)&&t.style("fill",e.background.color)},setRegionBackgroundOpacity:function(t,e){(0,l.notEmpty)(e.background)&&(0,l.notEmpty)(e.background.opacity)&&t.style("fill-opacity",e.background.opacity.toString())},setRegionBorderColor:function(t,e){(0,l.notEmpty)(e.border)&&(0,l.notEmpty)(e.border.color)&&(0,l.notEmpty)(e.border.width)&&t.style("stroke",e.border.color)},setRegionBorderType:function(t,e){(0,l.notEmpty)(e.border)&&(0,l.notEmpty)(e.border.type)&&(0,l.notEmpty)(e.border.width)&&t.style("stroke-dasharray",(0,l.borderStyle)(e.border.type)),(0,l.notEmpty)(e.border)&&(0,l.notEmpty)(e.border.types)&&(0,l.notEmpty)(e.border.width)&&t.style("stroke-dasharray",e.border.types)},setRegionBorderWidth:function(t,e){(0,l.notEmpty)(e.border)&&(0,l.notEmpty)(e.border.width)&&t.style("stroke-width",e.border.width+"px")},setRegionBorderRadius:function(t,e){(0,l.notEmpty)(e.border)&&(0,l.notEmpty)(e.border.radius)&&t.attr("rx",e.border.radius).attr("ry",e.border.radius)},setRegionBorderRadiusClipPath:function(t,e){(0,l.notEmpty)(e.border)&&(0,l.notEmpty)(e.border.radius)&&t.attr("rx",e.border.radius).attr("ry",e.border.radius)},setRegionStyle:function(t,e){if((0,l.notEmpty)(e.style))for(var i in e.style)t.style(i,e.style[i])}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{drag:function(t){var e=this,i=e.config,a=e.main;if(!e.hasArcType()&&i.data_selection_enabled&&(!i.zoom_enabled||e.zoom.altDomain)&&i.data_selection_multiple){var r=e.dragStart[0],o=e.dragStart[1],u=t[0],c=t[1],d=Math.min(r,u),h=Math.max(r,u),p=i.data_selection_grouped?e.margin.top:Math.min(o,c),f=i.data_selection_grouped?e.height:Math.max(o,c);a.select("."+s.default.dragarea).attr("x",d).attr("y",p).attr("width",h-d).attr("height",f-p),a.selectAll("."+s.default.shapes).selectAll("."+s.default.shape).filter(function(t){return i.data_selection_isselectable(t)}).each(function(t,i){var a=(0,n.select)(this),r=a.classed(s.default.SELECTED),o=a.classed(s.default.INCLUDED),u=void 0,c=void 0,g=void 0,_=void 0,m=void 0,y=!1,v=void 0;if(a.classed(s.default.markerPoint))u=1*a.attr("cx"),c=1*a.attr("cy"),m=e.togglePoint,y=d<u&&u<h&&p<c&&c<f;else{if(!a.classed(s.default.bar))return;v=(0,l.getPathBox)(this),u=v.x,c=v.y,g=v.width,_=v.height,m=e.togglePath,y=!(h<u||u+g<d||f<c||c+_<p)}y^o&&(a.classed(s.default.INCLUDED,!o),a.classed(s.default.SELECTED,!r),m.call(e,!r,a,t,i))})}},dragstart:function(t){var e=this,i=e.config;e.hasArcType()||!i.data_selection_enabled||(e.dragStart=t,e.main.select("."+s.default.chart).append("rect").attr("class",s.default.dragarea).style("opacity","0.1"),e.dragging=!0)},dragend:function(){var t=this,e=t.config;t.hasArcType()||!e.data_selection_enabled||(t.main.select("."+s.default.dragarea).transition().duration(100).style("opacity","0").remove(),t.main.selectAll("."+s.default.shape).classed(s.default.INCLUDED,!1),t.dragging=!1)}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o);(0,i(0).extend)(r.default.prototype,{selectPoint:function(t,e,i){var n=this,a=n.config,r=(a.axis_rotated?n.circleY:n.circleX).bind(n),o=(a.axis_rotated?n.circleX:n.circleY).bind(n),l=n.pointSelectR.bind(n);a.data_onselected.call(n.api,e,t.node()),n.main.select("."+s.default.selectedMarkerPoints+n.getTargetSelectorSuffix(e.id)).selectAll("."+s.default.selectedMarkerPoint+"-"+i).data([e]).enter().append("circle").attr("class",function(){return n.generateClass(s.default.selectedMarkerPoint,i)}).attr("cx",r).attr("cy",o).attr("stroke",function(){return n.color(e)}).attr("r",function(t){return 1.4*n.pointSelectR(t)}).transition().duration(100).attr("r",l)},unselectPoint:function(t,e,i){var n=this;n.config.data_onunselected.call(n.api,e,t.node()),n.main.select("."+s.default.selectedMarkerPoints+n.getTargetSelectorSuffix(e.id)).selectAll("."+s.default.selectedMarkerPoint+"-"+i).transition().duration(100).attr("r",0).remove()},togglePoint:function(t,e,i,n){t?this.selectPoint(e,i,n):this.unselectPoint(e,i,n)},selectPath:function(t,e){var i=this;i.config.data_onselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return(0,n.rgb)(i.color(e)).brighter(.75)})},unselectPath:function(t,e){var i=this;i.config.data_onunselected.call(i,e,t.node()),i.config.interaction_brighten&&t.transition().duration(100).style("fill",function(){return i.color(e)})},togglePath:function(t,e,i,n){t?this.selectPath(e,i,n):this.unselectPath(e,i,n)},getToggle:function(t,e){var i=this,n=void 0;return t.getAttribute("data-type")?n=i.isStepType(e)?function(){}:i.togglePoint:"path"===t.nodeName&&(n=i.togglePath),n},toggleShape:function(t,e,i){var a=this,r=a.config,o=(0,n.select)(t),l=o.classed(s.default.SELECTED),u=a.getToggle(t,e).bind(a),c=void 0;if(r.data_selection_enabled&&r.data_selection_isselectable(e)){if(!r.data_selection_multiple){var d="."+s.default.shapes;r.data_selection_grouped&&(d="."+d+a.getTargetSelectorSuffix(e.id)),a.main.selectAll(""+d).selectAll("."+s.default.shape).each(function(t,e){var i=(0,n.select)(this);i.classed(s.default.SELECTED)&&(c=i,u(!1,i.classed(s.default.SELECTED,!1),t,e))})}c&&c.node()===o.node()||(o.classed(s.default.SELECTED,!l),u(!l,o,e,i))}}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initBrush:function(){var t=this;t.brush=t.config.axis_rotated?(0,n.brushY)():(0,n.brushX)();var e=function(){t.redrawForBrush()};t.brush.on("start",function(){"touch"===t.inputType&&t.hideTooltip(),e()}).on("brush",e),t.brush.update=function(){return 0===this.extent()()[1].filter(function(t){return isNaN(t)}).length&&t.context&&t.context.select("."+s.default.brush).call(this),this},t.brush.scale=function(e,i){var n=t.svg.select(".rb-brush .overlay"),a=[[0,0]];e.range?a.push([e.range()[1],(i||!n.empty())&&~~n.attr("height")||60]):e.constructor===Array&&a.push(e),t.config.axis_rotated&&a.reverse(),this.extent(t.config.axis_x_extent||a),this.update()},t.brush.getSelection=function(){return t.context?t.context.select("."+s.default.brush):(0,n.select)([])}},initSubchart:function(){var t=this,e=t.config,i=e.subchart_show?"visible":"hidden";t.context=t.svg.append("g").attr("transform",t.getTranslate("context"));var n=t.context;n.style("visibility",i),n.append("g").attr("clip-path",t.clipPathForSubchart).attr("class",s.default.chart),n.select("."+s.default.chart).append("g").attr("class",s.default.chartBars),n.select("."+s.default.chart).append("g").attr("class",s.default.chartLines),n.append("g").attr("clip-path",t.clipPath).attr("class",s.default.brush).call(t.brush),t.axes.subx=n.append("g").attr("class",s.default.axisX).attr("transform",t.getTranslate("subx")).attr("clip-path",e.axis_rotated?"":t.clipPathForXAxis).style("visibility",e.subchart_axis_x_show?i:"hidden")},updateTargetsForSubchart:function(t){var e=this,i=e.context,n=e.config,a=e.classChartBar.bind(e),r=e.classBars.bind(e),o=e.classChartLine.bind(e),l=e.classLines.bind(e),u=e.classAreas.bind(e);if(n.subchart_show){var c=i.select("."+s.default.chartBars).selectAll("."+s.default.chartBar).data(t).attr("class",a);c.enter().append("g").style("opacity","0").attr("class",a).merge(c).append("g").attr("class",r);var d=i.select("."+s.default.chartLines).selectAll("."+s.default.chartLine).data(t).attr("class",o),h=d.enter().append("g").style("opacity","0").attr("class",o).merge(d);h.append("g").attr("class",l),h.append("g").attr("class",u),i.selectAll("."+s.default.brush+" rect").attr(n.axis_rotated?"width":"height",n.axis_rotated?e.width2:e.height2)}},updateBarForSubchart:function(t){var e=this;e.contextBar=e.context.selectAll("."+s.default.bars).selectAll("."+s.default.bar).data(e.barData.bind(e)),e.contextBar.exit().transition().duration(t).style("opacity","0").remove(),e.contextBar=e.contextBar.enter().append("path").attr("class",e.classBar.bind(e)).style("stroke","none").style("fill",e.color).merge(e.contextBar).style("opacity",e.initialOpacity.bind(e))},redrawBarForSubchart:function(t,e,i){var n=void 0;n=e?this.contextBar.transition(Math.random().toString()).duration(i):this.contextBar,n.attr("d",t).style("opacity","1")},updateLineForSubchart:function(t){var e=this;e.contextLine=e.context.selectAll("."+s.default.lines).selectAll("."+s.default.line).data(e.lineData.bind(e)),e.contextLine.exit().transition().duration(t).style("opacity","0").remove(),e.contextLine=e.contextLine.enter().append("path").attr("class",e.classLine.bind(e)).style("stroke",e.color).merge(e.contextLine).style("opacity",e.initialOpacity.bind(e))},redrawLineForSubchart:function(t,e,i){var n=void 0;n=e?this.contextLine.transition(Math.random().toString()).duration(i):this.contextLine,n.attr("d",t).style("opacity","1")},updateAreaForSubchart:function(t){var e=this;e.contextArea=e.context.selectAll("."+s.default.areas).selectAll("."+s.default.area).data(e.lineData.bind(e)),e.contextArea.exit().transition().duration(t).style("opacity","0").remove(),e.contextArea=e.contextArea.enter().append("path").attr("class",e.classArea.bind(e)).style("fill",e.color).style("opacity",function(){return e.orgAreaOpacity=(0,n.select)(this).style("opacity"),"0"}).merge(e.contextArea).style("opacity","0")},redrawAreaForSubchart:function(t,e,i){var n=void 0;n=e?this.contextArea.transition(Math.random().toString()).duration(i):this.contextArea,n.attr("d",t).style("fill",this.color).style("opacity",this.orgAreaOpacity)},redrawSubchart:function(t,e,i,a,r,o,s){var l=this,u=l.config;if(l.context.style("visibility",u.subchart_show?"visible":"hidden"),u.subchart_show&&(n.event&&"zoom"===n.event.type&&l.brush.update(),t)){l.brushEmpty()||l.brush.update();var c=l.generateDrawArea(r,!0),d=l.generateDrawBar(o,!0),h=l.generateDrawLine(s,!0);l.updateBarForSubchart(i),l.updateLineForSubchart(i),l.updateAreaForSubchart(i),l.redrawBarForSubchart(d,i,i),l.redrawLineForSubchart(h,i,i),l.redrawAreaForSubchart(c,i,i)}},redrawForBrush:function(){var t=this,e=t.x;t.redraw({withTransition:!1,withY:t.config.zoom_rescale,withSubchart:!1,withUpdateXDomain:!0,withDimension:!1}),t.config.subchart_onbrush.call(t.api,e.originalDomain())},transformContext:function(t,e){var i=this,n=void 0;e&&e.axisSubX?n=e.axisSubX:(n=i.context.select("."+s.default.axisX),t&&(n=n.transition())),i.context.attr("transform",i.getTranslate("context")),n.attr("transform",i.getTranslate("subx"))},getDefaultExtent:function(){var t=this,e=t.config,i=(0,l.isFunction)(e.axis_x_extent)?e.axis_x_extent(t.getXDomain(t.data.targets)):e.axis_x_extent;return t.isTimeSeries()&&(i=[t.parseDate(i[0]),t.parseDate(i[1])]),i}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(1),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(r.default.prototype,{initZoom:function(){var t=this,e=t.config,i=void 0;t.zoomScale=null,t.zoom=(0,n.zoom)().duration(0).on("start",function(){i=n.event.sourceEvent,t.zoom.altDomain=n.event.sourceEvent.altKey?t.x.originalDomain():null,e.zoom_onzoomstart.call(t.api,n.event.sourceEvent)}).on("zoom",function(){t.redrawForZoom.call(t)}).on("end",function(){var a=n.event.sourceEvent;a&&i.clientX===a.clientX&&i.clientY===a.clientY||(t.redrawEventRect(),t.updateZoom(),(0,l.isFunction)(e.zoom_onzoomend)&&e.zoom_onzoomend.call(t.api,t.x.originalDomain()))}),t.zoom.orgScaleExtent=function(){var i=e.zoom_extent?e.zoom_extent:[1,10];return[i[0],Math.max(t.getMaxDataCount()/i[1],i[1])]},t.zoom.updateScaleExtent=function(){var e=(0,l.diffDomain)(t.x.originalDomain())/(0,l.diffDomain)(t.getZoomDomain()),i=this.orgScaleExtent();return this.scaleExtent([i[0]*e,i[1]*e]),this},t.zoom.updateTransformScale=function(e){var i=e.rescaleX(t.x);i.domain(t.trimXDomain(i.domain())),t.zoomScale=i,t.xAxis.scale(t.zoomScale),t.main.select("."+s.default.eventRects).node().__zoom=e}},getZoomDomain:function(){var t=this,e=t.config;return[(0,n.min)([t.orgXDomain[0],e.zoom_x_min]),(0,n.max)([t.orgXDomain[1],e.zoom_x_max])]},updateZoom:function(){var t=this,e=t.config.zoom_enabled?t.zoom:function(){};if(t.zoomScale){var i=t.zoomScale.domain(),n=t.x.domain();(i[0]<=n[0]||i[0]-.015<=n[0])&&(n[1]<=i[1]||n[1]<=i[1]-.015)&&(t.xAxis.scale(t.x),t.zoomScale=null)}t.main.select("."+s.default.eventRects).call(e).on("dblclick.zoom",null)},redrawForZoom:function(){var t=this,e=t.config;if(e.zoom_enabled){var i=t.zoom,a=t.x,r=n.event,o=r.transform;return t.zoom.updateTransformScale(o),0===t.filterTargetsToShow(t.data.targets).length?void 0:"mousemove"===r.sourceEvent.type&&i.altDomain?(a.domain(i.altDomain),void o.scale(t.zoomScale).updateScaleExtent()):(t.isCategorized()&&a.originalDomain()[0]===t.orgXDomain[0]&&a.domain([t.orgXDomain[0]-1e-10,a.originalDomain()[1]]),t.redraw({withTransition:!1,withY:e.zoom_rescale,withSubchart:!1,withEventRect:!1,withDimension:!1}),"mousemove"===r.sourceEvent.type&&(t.cancelClick=!0),void((0,l.isFunction)(e.zoom_onzoom)&&e.zoom_onzoom.call(t.api,a.originalDomain())))}}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(1),a=_interopRequireDefault(n),r=i(2),o=_interopRequireDefault(r);(0,i(0).extend)(a.default.prototype,{initAnimation:function(){var t=this;t.config.animation_enable&&t.startThenEndAnimation()},startThenEndAnimation:function(){var t=this,e={width:t.getCurrentWidth(),height:t.getCurrentHeight()},i=t.svg.node().getBoundingClientRect(),n=t.config,a=n.animation_enable,r=n.animation_duration,s=n.animation_direction,l={x:0,y:0,width:0,height:0};t.animation=t.main.select("."+o.default.chart).append("rect").attr("class",o.default.chartAnimation).attr("x",0).attr("y",0).attr("width",e.width).attr("height",e.height).attr("fill","white"),"left"===s?(l.x=0,l.y=0,l.width=0,l.height=i.height):"right"===s?(l.x=i.width,l.y=0,l.width=0,l.height=i.height):"up"===s?(l.x=0,l.y=0,l.width=i.width,l.height=0):"down"===s&&(l.x=0,l.y=i.height,l.width=i.width,l.height=0),t.animation.transition().duration(function(){return a?r:0}).attr("x",l.x).attr("y",l.y).attr("width",l.width).attr("height",l.height).remove()}})},function(t,e,i){"use strict";var n=i(3),a=i(1),r=function(t){return t&&t.__esModule?t:{"default":t}}(a),o=i(0);(0,o.extend)(r.default.prototype,{generateColor:function(){var t=this,e=t.config,i=e.data_colors,a=e.data_color,r=[],s=(0,o.notEmpty)(e.color_pattern)?e.color_pattern:(0,n.scaleOrdinal)(n.schemeCategory10).range();return function(t){var e=t.id||t.data&&t.data.id||t,n=void 0;return i[e]instanceof Function?n=i[e](t):i[e]?n=i[e]:(r.indexOf(e)<0&&r.push(e),n=s[r.indexOf(e)%s.length],i[e]=n),a instanceof Function?a(n,t):n}},generateLevelColor:function(){var t=this,e=t.config,i=e.color_pattern,n=e.color_threshold,a="value"===n.unit,r=n.max||100,s=n.values&&n.values.length?n.values:[];return(0,o.notEmpty)(n)?function(t){for(var e=i[i.length-1],n=0;n<s.length;n++)if((a?t:100*t/r)<s[n]){e=i[n];break}return e}:null}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(5),a=_interopRequireDefault(n),r=i(1),o=_interopRequireDefault(r),s=i(0),l=function(t,e,i){var n=t.config,a="axis_"+e+"_tick_format";return(n[a]?n[a]:t.defaultValueFormat)(i)};(0,s.extend)(o.default.prototype,{getYFormat:function(t){var e=this,i=e.yFormat,n=e.y2Format;return t&&!e.hasType("gauge")&&(i=e.defaultArcValueFormat,n=e.defaultArcValueFormat),function(t,a,r){return("y2"===e.axis.getId(r)?n:i).call(e,t,a)}},yFormat:function(t){return l(this,"y",t)},y2Format:function(t){return l(this,"y2",t)},defaultValueFormat:function(t){return(0,s.isValue)(t)?+t:""},defaultArcValueFormat:function(t,e){return(100*e).toFixed(1)+"%"},dataLabelFormat:function(t){var e=this,i=e.config.data_labels,n=function(t){return(0,s.isValue)(t)?+t:""};return"function"==typeof i.format?i.format:"object"===(0,a.default)(i.format)?i.format[t]?!0===i.format[t]?n:i.format[t]:function(){return""}:n}})},function(t,e,i){"use strict";var n=i(1),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{hasCaches:function(t){for(var e=0,i=t.length;e<i;e++)if(!(t[e]in this.cache))return!1;return!0},addCache:function(t,e){this.cache[t]=this.cloneTarget(e)},getCaches:function(t){for(var e,i=[],n=0;e=t[n];n++)e in this.cache&&i.push(this.cloneTarget(this.cache[e]));return i},resetCache:function(t){var e=this;for(var i in e.cache)(t||/^\$/.test(i))&&(e.cache[i]=null)}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(1),a=_interopRequireDefault(n),r=i(2),o=_interopRequireDefault(r);(0,i(0).extend)(a.default.prototype,{CLASS:o.default,generateClass:function(t,e){return" "+t+" "+(t+this.getTargetSelectorSuffix(e))},classText:function(t){return this.generateClass(o.default.text,t.index)},classTexts:function(t){return this.generateClass(o.default.texts,t.id)},classShape:function(t){return this.generateClass(o.default.shape,t.index)},classShapes:function(t){return this.generateClass(o.default.shapes,t.id)},classLine:function(t){return this.classShape(t)+this.generateClass(o.default.line,t.id)},classLines:function(t){return this.classShapes(t)+this.generateClass(o.default.lines,t.id)},classMarkerPoint:function(t){return this.classShape(t)+this.generateClass(o.default.markerPoint,t.index)},classMarkerPoints:function(t){return this.classShapes(t)+this.generateClass(o.default.markerPoints,t.id)},classBar:function(t){return this.classShape(t)+this.generateClass(o.default.bar,t.index)},classBars:function(t){return this.classShapes(t)+this.generateClass(o.default.bars,t.id)},classArc:function(t){return this.classShape(t.data)+this.generateClass(o.default.arc,t.data.id)},classArcs:function(t){return this.classShapes(t.data)+this.generateClass(o.default.arcs,t.data.id)},classArea:function(t){return this.classShape(t)+this.generateClass(o.default.area,t.id)},classAreas:function(t){return this.classShapes(t)+this.generateClass(o.default.areas,t.id)},classRegion:function(t,e){return this.generateClass(o.default.region,e)+" "+("class"in t?t.class:"")},classEvent:function(t){return this.generateClass(o.default.eventRect,t.index)},classTarget:function(t){var e=this.config.data_classes[t],i="";return e&&(i=" "+o.default.target+"-"+e),this.generateClass(o.default.target,t)+i},classFocus:function(t){return this.classFocused(t)+this.classDefocused(t)},classFocused:function(t){return" "+(this.focusedTargetIds.indexOf(t.id)>=0?o.default.focused:"")},classDefocused:function(t){return" "+(this.defocusedTargetIds.indexOf(t.id)>=0?o.default.defocused:"")},classChartText:function(t){return o.default.chartText+this.classTarget(t.id)},classChartLine:function(t){return o.default.chartLine+this.classTarget(t.id)},classChartBar:function(t){return o.default.chartBar+this.classTarget(t.id)},classChartArc:function(t){return o.default.chartArc+this.classTarget(t.data.id)},getTargetSelectorSuffix:function(t){return t||0===t?("-"+t).replace(/[\s?!@#$%^&*()_=+,.<>'":;\[\]\/|~`{}\\]/g,"-"):""},selectorTarget:function(t,e){return(e||"")+"."+(o.default.target+this.getTargetSelectorSuffix(t))},selectorTargets:function(t,e){var i=this,n=t||[];return n.length?n.map(function(t){return i.selectorTarget(t,e)}):null},selectorLegend:function(t){return"."+(o.default.legendItem+this.getTargetSelectorSuffix(t))},selectorLegends:function(t){var e=this;return t&&t.length?t.map(function(t){return e.selectorLegend(t)}):null},selectorLine:function(t,e){return(e||"")+"."+(o.default.line+this.getTargetSelectorSuffix(t))}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(69),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(s.default.prototype,{initRegression:function(t){var e=this,i=t||e.config.data_regressions,a=e.data.targets,r=e.mapToIds(a),o={columns:[],colors:{},type:"spline"},s=[],u=e.xs;if(e.regressions={},!(0,l.isEmpty)(i)){for(var c=r,d=Array.isArray(c),h=0,c=d?c:c[Symbol.iterator]();;){var p;if(d){if(h>=c.length)break;p=c[h++]}else{if(h=c.next(),h.done)break;p=h.value}var f=p;!function(t){var n=[],r=i[t];if(r){s=e.getArrayAsIdKeyed(a)[t];var l=e.execRegression(s,r),c=e.genRegressionName(t,r),d=s.length+r.extrapolate,h="m";if(e.regressions[t]=l,e.isTimeSeries()&&"x"!==u[0]){var p=u.length,f=u[p-1],g=u.slice(p-1),_=e.dateDiff(f,g,"d");u.unshift("x"),h=1===_?"d":_>1&&_<=7?"w":_>7&&_<=31?"m":"y";for(var m=1;m<=r.extrapolate;m++)u.push(e.dateAdd(f,h,m))}n.push(c),l.points.forEach(function(t){n.push(t[1])});for(var y,v=s.length;v<d;v++)y=l.predict(v),n.push(y[1]);e.isTimeSeries()&&o.columns.splice(0,0,u),o.columns.push(n),o.colors[c]=r.color}}(f)}e.updateDataAttributes("colors",o.colors),e.loadFromArgs(o),e.redraw({withUpdateOrgXDomain:!1,withUpdateXDomain:!1,withLegend:!1}),o.done&&o.done();for(var g=r,_=Array.isArray(g),m=0,g=_?g:g[Symbol.iterator]();;){var y;if(_){if(m>=g.length)break;y=g[m++]}else{if(m=g.next(),m.done)break;y=m.value}var f=y,v=i[f];if(v){var x=e.genRegressionName(f,v),b=(0,n.select)(e.selectorLine(x));b.classed("rb-regression-line",!0),b.transition(Math.random().toString()).style("stroke-dasharray","dotted"===v.dashStyle?"2, 6":"dashed"===v.dashStyle?"6, 2":"0, 0").style("stroke-width",v.width+"px")}}}},execRegression:function(t,e){var i={order:e.order||2,precision:e.precision||2*(e.order||2)};return"polynomial"===e.type?r.default.polynomial(t,i):"power"===e.type?r.default.power(this.mapData(t),i):"logarithmic"===e.type?r.default.logarithmic(this.mapData(t),i):"exponential"===e.type?r.default.exponential(t,i):r.default.linear(t,i)},mapData:function(t){var e=[];return t.forEach(function(t){var i=[];i.push(t[0]+1,t[1]),e.push(i)}),e},genRegressionName:function(t,e){var i="exponential"===e.type?"Expon.":"linear"===e.type?"Linear":"logarithmic"===e.type?"Log.":"power"===e.type?"Power":"Poly.";return e.label&&e.label.text?e.label.text:i+" ("+t+")"}})},function(t,e,i){var n,a,r;!function(i,o){a=[t],n=o,void 0!==(r="function"==typeof n?n.apply(e,a):n)&&(t.exports=r)}(0,function(t){"use strict";function _defineProperty(t,e,i){return e in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,i=Array(t.length);e<t.length;e++)i[e]=t[e];return i}return Array.from(t)}function determinationCoefficient(t,e){var i=[],n=[];t.forEach(function(t,a){null!==t[1]&&(n.push(t),i.push(e[a]))});var a=n.reduce(function(t,e){return t+e[1]},0),r=a/n.length,o=n.reduce(function(t,e){var i=e[1]-r;return t+i*i},0);return 1-n.reduce(function(t,e,n){var a=i[n],r=e[1]-a[1];return t+r*r},0)/o}function gaussianElimination(t,e){for(var i=t,n=t.length-1,a=[e],r=0;r<n;r++){for(var o=r,s=r+1;s<n;s++)Math.abs(i[r][s])>Math.abs(i[r][o])&&(o=s);for(var l=r;l<n+1;l++){var u=i[l][r];i[l][r]=i[l][o],i[l][o]=u}for(var c=r+1;c<n;c++)for(var d=n;d>=r;d--)i[d][c]-=i[d][r]*i[r][c]/i[r][r]}for(var h=n-1;h>=0;h--){for(var p=0,f=h+1;f<n;f++)p+=i[f][h]*a[f];a[h]=(i[n][h]-p)/i[h][h]}return a}function round(t,e){var i=Math.pow(10,e);return Math.round(t*i)/i}var e=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(t[n]=i[n])}return t},i={order:2,precision:2,period:null},n={linear:function(t,e){for(var i=[0,0,0,0,0],n=0,a=0;a<t.length;a++)null!==t[a][1]&&(n++,i[0]+=t[a][0],i[1]+=t[a][1],i[2]+=t[a][0]*t[a][0],i[3]+=t[a][0]*t[a][1],i[4]+=t[a][1]*t[a][1]);var r=n*i[2]-i[0]*i[0],o=n*i[3]-i[0]*i[1],s=0===r?0:round(o/r,e.precision),l=round(i[1]/n-s*i[0]/n,e.precision),u=function(t){return[round(t,e.precision),round(s*t+l,e.precision)]},c=t.map(function(t){return u(t[0])});return{points:c,predict:u,equation:[s,l],r2:round(determinationCoefficient(t,c),e.precision),string:0===l?"y = "+s+"x":"y = "+s+"x + "+l}},exponential:function(t,e){for(var i=[0,0,0,0,0,0],n=0;n<t.length;n++)null!==t[n][1]&&(i[0]+=t[n][0],i[1]+=t[n][1],i[2]+=t[n][0]*t[n][0]*t[n][1],i[3]+=t[n][1]*Math.log(t[n][1]),i[4]+=t[n][0]*t[n][1]*Math.log(t[n][1]),i[5]+=t[n][0]*t[n][1]);var a=i[1]*i[2]-i[5]*i[5],r=Math.exp((i[2]*i[3]-i[5]*i[4])/a),o=(i[1]*i[4]-i[5]*i[3])/a,s=round(r,e.precision),l=round(o,e.precision),u=function(t){return[round(t,e.precision),round(s*Math.exp(l*t),e.precision)]},c=t.map(function(t){return u(t[0])});return{points:c,predict:u,equation:[s,l],string:"y = "+s+"e^("+l+"x)",r2:round(determinationCoefficient(t,c),e.precision)}},logarithmic:function(t,e){for(var i=[0,0,0,0],n=t.length,a=0;a<n;a++)null!==t[a][1]&&(i[0]+=Math.log(t[a][0]),i[1]+=t[a][1]*Math.log(t[a][0]),i[2]+=t[a][1],i[3]+=Math.pow(Math.log(t[a][0]),2));var r=(n*i[1]-i[2]*i[0])/(n*i[3]-i[0]*i[0]),o=round(r,e.precision),s=round((i[2]-o*i[0])/n,e.precision),l=function(t){return[round(t,e.precision),round(round(s+o*Math.log(t),e.precision),e.precision)]},u=t.map(function(t){return l(t[0])});return{points:u,predict:l,equation:[s,o],string:"y = "+s+" + "+o+" ln(x)",r2:round(determinationCoefficient(t,u),e.precision)}},power:function(t,e){for(var i=[0,0,0,0,0],n=t.length,a=0;a<n;a++)null!==t[a][1]&&(i[0]+=Math.log(t[a][0]),i[1]+=Math.log(t[a][1])*Math.log(t[a][0]),i[2]+=Math.log(t[a][1]),i[3]+=Math.pow(Math.log(t[a][0]),2));var r=(n*i[1]-i[0]*i[2])/(n*i[3]-Math.pow(i[0],2)),o=(i[2]-r*i[0])/n,s=round(Math.exp(o),e.precision),l=round(r,e.precision),u=function(t){return[round(t,e.precision),round(round(s*Math.pow(t,l),e.precision),e.precision)]},c=t.map(function(t){return u(t[0])});return{points:c,predict:u,equation:[s,l],string:"y = "+s+"x^"+l,r2:round(determinationCoefficient(t,c),e.precision)}},polynomial:function(t,e){for(var i=[],n=[],a=0,r=0,o=t.length,s=e.order+1,l=0;l<s;l++){for(var u=0;u<o;u++)null!==t[u][1]&&(a+=Math.pow(t[u][0],l)*t[u][1]);i.push(a),a=0;for(var c=[],d=0;d<s;d++){for(var h=0;h<o;h++)null!==t[h][1]&&(r+=Math.pow(t[h][0],l+d));c.push(r),r=0}n.push(c)}n.push(i);for(var p=gaussianElimination(n,s).map(function(t){return round(t,e.precision)}),f=function(t){return[round(t,e.precision),round(p.reduce(function(e,i,n){return e+i*Math.pow(t,n)},0),e.precision)]},g=t.map(function(t){return f(t[0])}),_="y = ",m=p.length-1;m>=0;m--)_+=m>1?p[m]+"x^"+m+" + ":1===m?p[m]+"x + ":p[m];return{string:_,points:g,predict:f,equation:[].concat(_toConsumableArray(p)).reverse(),r2:round(determinationCoefficient(t,g),e.precision)}}};t.exports=function(){var t=function(t,a){return e({_round:round},t,_defineProperty({},a,function(t,r){return n[a](t,e({},i,r))}))};return Object.keys(n).reduce(t,{})}()})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(4),r=_interopRequireDefault(a),o=i(2),s=_interopRequireDefault(o);(0,i(0).extend)(r.default.prototype,{focus:function(t){var e=this.internal,i=e.mapToTargetIds(t),n=e.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e)));this.revert(),this.defocus(),n.classed(s.default.focused,!0).classed(s.default.defocused,!1),e.hasArcType()&&e.expandArc(i),e.toggleFocusLegend(i,!0),e.focusedTargetIds=i,e.defocusedTargetIds=e.defocusedTargetIds.filter(function(t){return i.indexOf(t)<0})},defocus:function(t){var e=this.internal,i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i.filter(e.isTargetToShow,e))).classed(s.default.focused,!1).classed(s.default.defocused,!0),e.hasArcType()&&e.unexpandArc(i),e.toggleFocusLegend(i,!1),e.focusedTargetIds=e.focusedTargetIds.filter(function(t){return i.indexOf(t)<0}),e.defocusedTargetIds=i},revert:function(t){var e=this.internal,i=e.mapToTargetIds(t);e.svg.selectAll(e.selectorTargets(i)).classed(s.default.focused,!1).classed(s.default.defocused,!1),e.hasArcType()&&e.unexpandArc(i),e.config.legend_show&&(e.showLegend(i.filter(e.isLegendToShow.bind(e))),e.legend.selectAll(e.selectorLegends(i)).filter(function(){return(0,n.select)(this).classed(s.default.legendItemFocused)}).classed(s.default.legendItemFocused,!1)),e.focusedTargetIds=[],e.defocusedTargetIds=[]}})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{show:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.internal,n=i.mapToTargetIds(t);i.removeHiddenTargetIds(n);var a=i.svg.selectAll(i.selectorTargets(n));a.transition().style("opacity","1","important").call(i.endall,function(){a.style("opacity",null).style("opacity","1"),i.setHiddenLayoutOverlapTarget(a,"visible")}),e.withLegend&&i.showLegend(n),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},hide:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.internal,n=i.mapToTargetIds(t);i.addHiddenTargetIds(n);var a=i.svg.selectAll(i.selectorTargets(n));a.transition().style("opacity","0","important").call(i.endall,function(){a.style("opacity",null).style("opacity","0"),i.setHiddenLayoutOverlapTarget(a,"hidden")}),e.withLegend&&i.hideLegend(n),i.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0})},toggle:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this,n=this.internal;n.mapToTargetIds(t).forEach(function(t){n.isTargetToShow(t)?i.hide(t,e):i.show(t,e)})}})},function(t,e,i){"use strict";var n=i(3),a=i(4),r=function(t){return t&&t.__esModule?t:{"default":t}}(a),o=i(0),s=function(t){var e=this.internal,i=t,a=void 0;if(i){if(e.isTimeSeries()&&(i=i.map(function(t){return e.parseDate(t)})),e.config.subchart_show){var r=e.zoomScale||e.x;e.brush.getSelection().call(e.brush.move,[r(i[0]),r(i[1])]),a=i}else{var o=e.x.originalDomain(),s=(o[1]-o[0])/(i[1]-i[0]),l=e.isTimeSeries()?0-s*e.x(i[0].getTime()):i[0]-s*e.x(i[0]);e.zoom.updateTransformScale(n.zoomIdentity.translate(l,0).scale(s)),a=e.zoomScale.domain()}e.redraw({withTransition:!0,withY:e.config.zoom_rescale,withDimension:!1}),e.config.zoom_onzoom.call(this,e.x.originalDomain())}else a=(e.zoomScale||e.x).domain();return a};s.enable=function(t){var e=this.internal;e.config.zoom_enabled=t,e.updateAndRedraw()},s.max=function(t){var e=this.internal,i=e.config;if(0!==t&&!t)return i.zoom_x_max;i.zoom_x_max=(0,n.max)([e.orgXDomain[1],t])},s.min=function(t){var e=this.internal,i=e.config;if(0!==t&&!t)return i.zoom_x_min;i.zoom_x_min=(0,n.min)([e.orgXDomain[0],t])},s.range=function(t){if(!arguments.length)return{max:this.domain.max(),min:this.domain.min()};(0,o.isDefined)(t.max)&&this.domain.max(t.max),(0,o.isDefined)(t.min)&&this.domain.min(t.min)},(0,o.extend)(r.default.prototype,{zoom:s,unzoom:function(){var t=this.internal;t.config.subchart_show?t.brush.getSelection().call(t.brush.move,null):t.zoom.updateTransformScale(n.zoomIdentity),t.redraw({withTransition:!0,withY:t.config.zoom_rescale})}})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{load:function(t){var e=this.internal,i=e.config;return t.xs&&e.addXs(t.xs),"names"in t&&this.data.names(t.names),"classes"in t&&Object.keys(t.classes).forEach(function(e){i.data_classes[e]=t.classes[e]}),"categories"in t&&e.isCategorized()&&(i.axis_x_categories=t.categories),"axes"in t&&Object.keys(t.axes).forEach(function(e){i.data_axes[e]=t.axes[e]}),"colors"in t&&Object.keys(t.colors).forEach(function(e){i.data_colors[e]=t.colors[e]}),"cacheIds"in t&&e.hasCaches(t.cacheIds)?void e.load(e.getCaches(t.cacheIds),t.done):void("unload"in t?e.unload(e.mapToTargetIds("boolean"==typeof t.unload&&t.unload?null:t.unload),function(){return e.loadFromArgs(t)}):e.loadFromArgs(t))},unload:function(t){var e=this.internal,i=t||{};i instanceof Array?i={ids:i}:"string"==typeof i&&(i={ids:[i]}),e.unload(e.mapToTargetIds(i.ids),function(){e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0,withLegend:!0}),i.done&&i.done()})}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(4),r=_interopRequireDefault(a),o=i(1),s=_interopRequireDefault(o),l=i(0),u=i(2),c=_interopRequireDefault(u);(0,l.extend)(r.default.prototype,{flow:function(t){var e=this.internal,i=[],n=e.getMaxDataCount(),a=void 0,r=void 0,o=0,s=0,u=void 0,c=void 0;if(t.json)a=e.convertJsonToData(t.json,t.keys);else if(t.rows)a=e.convertRowsToData(t.rows);else{if(!t.columns)return;a=e.convertColumnsToData(t.columns)}var d=e.convertDataToTargets(a,!0);e.data.targets.forEach(function(t){var n=!1,a=void 0,r=void 0;for(a=0;a<d.length;a++)if(t.id===d[a].id){for(n=!0,t.values[t.values.length-1]&&(s=t.values[t.values.length-1].index+1),o=d[a].values.length,r=0;r<o;r++)d[a].values[r].index=s+r,e.isTimeSeries()||(d[a].values[r].x=s+r);t.values=t.values.concat(d[a].values),d.splice(a,1);break}n||i.push(t.id)}),e.data.targets.forEach(function(t){var n=void 0,a=void 0;for(n=0;n<i.length;n++)if(t.id===i[n])for(s=t.values[t.values.length-1].index+1,a=0;a<o;a++)t.values.push({id:t.id,index:s+a,x:e.isTimeSeries()?e.getOtherTargetX(s+a):s+a,value:null})}),e.data.targets.length&&d.forEach(function(t){var i=void 0,n=[];for(i=e.data.targets[0].values[0].index;i<s;i++)n.push({id:t.id,index:i,x:e.isTimeSeries()?e.getOtherTargetX(i):i,value:null});t.values.forEach(function(t){t.index+=s,e.isTimeSeries()||(t.x+=s)}),t.values=n.concat(t.values)}),e.data.targets=e.data.targets.concat(d);var h=e.data.targets[0],p=h.values[0];(0,l.isDefined)(t.to)?(o=0,c=e.isTimeSeries()?e.parseDate(t.to):t.to,h.values.forEach(function(t){t.x<c&&o++})):(0,l.isDefined)(t.length)&&(o=t.length),n?1===n&&e.isTimeSeries()&&(u=(h.values[h.values.length-1].x-p.x)/2,r=[new Date(+p.x-u),new Date(+p.x+u)],e.updateXDomain(null,!0,!0,!1,r)):(u=e.isTimeSeries()?h.values.length>1?h.values[h.values.length-1].x-p.x:p.x-e.getXDomain(e.data.targets)[0]:1,r=[p.x-u,p.x],e.updateXDomain(null,!0,!0,!1,r)),e.updateTargets(e.data.targets),e.redraw({flow:{index:p.index,length:o,duration:(0,l.isValue)(t.duration)?t.duration:e.config.transition_duration,done:t.done,orgDataCount:n},withLegend:!0,withTransition:n>1,withTrimXDomain:!1,withUpdateXAxis:!0})}}),(0,l.extend)(s.default.prototype,{generateFlow:function(t){var e=this,i=e.config;return function(){var a=t.targets,r=t.flow,o=t.drawBar,s=t.drawLine,u=t.drawArea,d=t.cx,h=t.cy,p=t.xv,f=t.xForText,g=t.yForText,_=t.duration,m=void 0,y=1,v=r.index,x=r.length,b=e.getValueOnIndex(e.data.targets[0].values,v),w=e.getValueOnIndex(e.data.targets[0].values,v+x),L=e.x.domain(),T=r.duration||_,k=r.done||function(){},C=e.generateWait(),A=e.xgrid||(0,n.selectAll)([]),P=e.xgridLines||(0,n.selectAll)([]),M=e.mainRegion||(0,n.selectAll)([]),S=e.mainText||(0,n.selectAll)([]),E=e.mainBar||(0,n.selectAll)([]),B=e.mainLine||(0,n.selectAll)([]),D=e.mainArea||(0,n.selectAll)([]),I=e.mainMarkerPoint||(0,n.selectAll)([]);e.flowing=!0,e.data.targets.forEach(function(t){t.values.splice(0,x)});var z=e.updateXDomain(a,!0,!0);e.updateXGrid&&e.updateXGrid(!0),r.orgDataCount?m=1===r.orgDataCount||(b&&b.x)===(w&&w.x)?e.x(L[0])-e.x(z[0]):e.isTimeSeries()?e.x(L[0])-e.x(z[0]):e.x(b.x)-e.x(w.x):1===e.data.targets[0].values.length?e.isTimeSeries()?(b=e.getValueOnIndex(e.data.targets[0].values,0),w=e.getValueOnIndex(e.data.targets[0].values,e.data.targets[0].values.length-1),m=e.x(b.x)-e.x(w.x)):m=(0,l.diffDomain)(z)/2:m=e.x(L[0])-e.x(z[0]),y=(0,l.diffDomain)(L)/(0,l.diffDomain)(z);var R="translate("+m+",0) scale("+y+",1)";e.hideXGridFocus();var O=(0,n.transition)().ease(n.easeLinear).duration(T);C.add([e.axes.x.transition(O).call(e.xAxis.setTransition(O)),E.transition(O).attr("transform",R),B.transition(O).attr("transform",R),D.transition(O).attr("transform",R),I.transition(O).attr("transform",function(t){return"translate("+(d(t)-Math.ceil(e.marketPointCalculator(this,"width")))+","+(h(t)-Math.ceil(e.marketPointCalculator(this,"height")))+")"}),S.transition(O).attr("transform",R),M.filter(e.isRegionOnX).transition(O).attr("transform",R),A.transition(O).attr("transform",R),P.transition(O).attr("transform",R)]),O.call(C,function(){var t=void 0,n=[],a=[],r=[];if(x){for(t=0;t<x;t++)n.push("."+c.default.shape+"-"+(v+t)),a.push("."+c.default.text+"-"+(v+t)),r.push("."+c.default.eventRect+"-"+(v+t));e.svg.selectAll("."+c.default.shapes).selectAll(n).remove(),e.svg.selectAll("."+c.default.texts).selectAll(a).remove(),e.svg.selectAll("."+c.default.eventRects).selectAll(r).remove(),e.svg.select("."+c.default.xgrid).remove()}A.size()&&A.attr("transform",null).attr(e.xgridAttr),P.attr("transform",null),P.select("line").attr("x1",i.axis_rotated?0:p).attr("x2",i.axis_rotated?e.width:p),P.select("text").attr("x",i.axis_rotated?e.width:0).attr("y",p),E.attr("transform",null).attr("d",o),B.attr("transform",null).attr("d",s),D.attr("transform",null).attr("d",u),I.attr("transform",function(t){return"translate("+(d(t)-Math.ceil(e.marketPointCalculator(this,"width")))+","+(h(t)-Math.ceil(e.marketPointCalculator(this,"height")))+")"}),S.attr("transform",null).attr("x",f).attr("y",g).style("fill-opacity",e.opacityForText.bind(e)),M.attr("transform",null),M.select("rect").filter(e.isRegionOnX).attr("x",e.regionX.bind(e)).attr("width",e.regionWidth.bind(e)),i.interaction_enabled&&e.redrawEventRect(),k(),e.flowing=!1})}}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(3),a=i(4),r=_interopRequireDefault(a),o=i(0),s=i(2),l=_interopRequireDefault(s);(0,o.extend)(r.default.prototype,{selected:function(t){var e=this.internal,i=[];return e.main.selectAll("."+(l.default.shapes+e.getTargetSelectorSuffix(t))).selectAll("."+l.default.shape).filter(function(){return(0,n.select)(this).classed(l.default.SELECTED)}).each(function(t){return i.push(t)}),i},select:function(t,e,i){var a=this.internal,r=a.config;r.data_selection_enabled&&a.main.selectAll("."+l.default.shapes).selectAll("."+l.default.shape).each(function(s,u){var c=(0,n.select)(this),d=s.data?s.data.id:s.id,h=a.getToggle(this,s).bind(a),p=r.data_selection_grouped||!t||t.indexOf(d)>=0,f=!e||e.indexOf(u)>=0,g=c.classed(l.default.SELECTED);c.classed(l.default.line)||c.classed(l.default.area)||(p&&f?r.data_selection_isselectable(s)&&!g&&h(!0,c.classed(l.default.SELECTED,!0),s,u):(0,o.isDefined)(i)&&i&&g&&h(!1,c.classed(l.default.SELECTED,!1),s,u))})},unselect:function(t,e){var i=this.internal,a=i.config;a.data_selection_enabled&&i.main.selectAll("."+l.default.shapes).selectAll("."+l.default.shape).each(function(r,o){var s=(0,n.select)(this),u=r.data?r.data.id:r.id,c=i.getToggle(this,r).bind(i),d=a.data_selection_grouped||!t||t.indexOf(u)>=0,h=!e||e.indexOf(o)>=0,p=s.classed(l.default.SELECTED);s.classed(l.default.line)||s.classed(l.default.area)||d&&h&&a.data_selection_isselectable(r)&&p&&c(!1,s.classed(l.default.SELECTED,!1),r,o)})}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(4),a=_interopRequireDefault(n),r=i(1),o=_interopRequireDefault(r),s=i(0);(0,s.extend)(a.default.prototype,{transform:function(t,e){var i=this.internal,n=["pie","donut"].indexOf(t)>=0?{withTransform:!0}:null;i.transformTo(e,t,n)}}),(0,s.extend)(o.default.prototype,{transformTo:function(t,e,i){var n=this,a=!n.hasArcType(),r=i||{withTransitionForAxis:a};r.withTransitionForTransform=!1,n.transiting=!1,n.setTargetType(t,e),n.updateTargets(n.data.targets),n.updateAndRedraw(r)}})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=i(0);(0,r.extend)(a.default.prototype,{groups:function(t){var e=this.internal,i=e.config;return(0,r.isUndefined)(t)?i.data_groups:(i.data_groups=t,e.redraw(),i.data_groups)}})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=i(0),o=function(t){var e=this.internal,i=e.config;return t?(i.grid_x_lines=t,e.redrawWithoutRescale(),i.grid_x_lines):i.grid_x_lines};o.add=function(t){return this.xgrids(this.internal.config.grid_x_lines.concat(t||[]))},o.remove=function(t){this.internal.removeGridLines(t,!0)};var s=function(t){var e=this.internal,i=e.config;return t?(i.grid_y_lines=t,e.redrawWithoutRescale(),i.grid_y_lines):i.grid_y_lines};s.add=function(t){return this.ygrids(this.internal.config.grid_y_lines.concat(t||[]))},s.remove=function(t){this.internal.removeGridLines(t,!1)},(0,r.extend)(a.default.prototype,{xgrids:o,ygrids:s})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(4),a=_interopRequireDefault(n),r=i(2),o=_interopRequireDefault(r),s=i(0),l=function(t){var e=this.internal,i=e.config;return t?(i.regions=t,e.redrawWithoutRescale(),i.regions):i.regions};l.add=function(t){var e=this.internal,i=e.config;return t?(i.regions=i.regions.concat(t),e.redrawWithoutRescale(),i.regions):i.regions},l.remove=function(t){var e=this.internal,i=e.config,n=t||{},a=e.getOption(n,"duration",i.transition_duration),r=e.getOption(n,"classes",[o.default.region]),s=e.main.select("."+o.default.regions).selectAll(r.map(function(t){return"."+t}));return(a?s.transition().duration(a):s).style("opacity","0").remove(),i.regions=i.regions.filter(function(t){var e=!1;return!t.class||(t.class.split(" ").forEach(function(t){r.indexOf(t)>=0&&(e=!0)}),!e)}),i.regions},(0,s.extend)(a.default.prototype,{regions:l})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=i(0),o=function(t){var e=this.internal.data.targets;return void 0===t?e:e.filter(function(e){return t.indexOf(e.id)>=0})};o.shown=function(t){return this.internal.filterTargetsToShow(this.data(t))},o.values=function(t){var e=null;if(t){var i=this.data(t);i&&i[0]&&(e=i[0].values.map(function(t){return t.value}))}return e},o.names=function(t){return this.internal.clearLegendItemTextBoxCache(),this.internal.updateDataAttributes("names",t)},o.colors=function(t){return this.internal.updateDataAttributes("colors",t)},o.axes=function(t){return this.internal.updateDataAttributes("axes",t)},(0,r.extend)(a.default.prototype,{data:o})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{category:function(t,e){var i=this.internal,n=i.config;return arguments.length>1&&(n.axis_x_categories[t]=e,i.redraw()),n.axis_x_categories[t]},categories:function(t){var e=this.internal,i=e.config;return arguments.length?(i.axis_x_categories=t,e.redraw(),i.axis_x_categories):i.axis_x_categories}})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{color:function(t){return this.internal.color(t)}})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{x:function(t){var e=this.internal;return arguments.length&&(e.updateTargetX(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs},xs:function(t){var e=this.internal;return arguments.length&&(e.updateTargetXs(e.data.targets,t),e.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})),e.data.xs}})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(5),a=_interopRequireDefault(n),r=i(4),o=_interopRequireDefault(r),s=i(0),l=function(t,e,i){var n=t.config,r="axis_y_"+e,o="axis_y2_"+e;return void(void 0!==i&&("object"===(void 0===i?"undefined":(0,a.default)(i))?((0,s.isValue)(i.x)&&(n["axis_x_"+e]=i.x),(0,s.isValue)(i.y)&&(n[r]=i.y),(0,s.isValue)(i.y2)&&(n[o]=i.y2)):(n[r]=i,n[o]=i),t.redraw({withUpdateOrgXDomain:!0,withUpdateXDomain:!0})))},u=function(t,e){var i=t.config;return{x:i["axis_x_"+e],y:i["axis_y_"+e],y2:i["axis_y2_"+e]}},c=function(){};c.labels=function(t){var e=this.internal;arguments.length&&(Object.keys(t).forEach(function(i){e.axis.setLabelText(i,t[i])}),e.axis.updateLabels())},c.min=function(t){return arguments.length?l(this.internal,"min",t):u(this.internal,"min")},c.max=function(t){return arguments.length?l(this.internal,"max",t):u(this.internal,"max")},c.range=function(t){if(!arguments.length)return{max:this.axis.max(),min:this.axis.min()};(0,s.isDefined)(t.max)&&this.axis.max(t.max),(0,s.isDefined)(t.min)&&this.axis.min(t.min)},(0,s.extend)(o.default.prototype,{axis:c})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=i(0),o=function(){};o.show=function(t){var e=this.internal;e.showLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},o.hide=function(t){var e=this.internal;e.hideLegend(e.mapToTargetIds(t)),e.updateAndRedraw({withLegend:!0})},(0,r.extend)(a.default.prototype,{legend:o})},function(t,e,i){"use strict";function _interopRequireDefault(t){return t&&t.__esModule?t:{"default":t}}var n=i(4),a=_interopRequireDefault(n),r=i(87),o=i(2),s=_interopRequireDefault(o),l=i(0);(0,l.extend)(a.default.prototype,{resize:function(t){var e=this.internal.config;e.size_width=t?t.width:null,e.size_height=t?t.height:null,this.flush()},flush:function(){this.internal.updateAndRedraw({withLegend:!0,withTransition:!1,withTransitionForTransform:!1})},destroy:function(){var t=this.internal;return r.window.clearInterval(t.intervalForObserveInserted),void 0!==t.resizeTimeout&&r.window.clearTimeout(t.resizeTimeout),(0,l.removeEvent)(r.window,"resize",t.resizeFunction),t.selectChart.classed("rb",!1).html(""),Object.keys(t).forEach(function(e){t[e]=null}),null},regression:function(t){this.internal.initRegression(t)},showTooltipByIndex:function(t){var e=this.internal,i=e.filterTargetsToShow(e.data.targets).map(function(i){return e.addName(e.getValueOnIndex(i.values,t))}),n=e.main.select("."+s.default.eventRect+"-"+t);e.showTooltipApi(i,n.node()),e.showXGridFocus(i)}})},function(t,e,i){"use strict";e.__esModule=!0;var n="undefined"!=typeof window&&window.Math===Math?window:"undefined"!=typeof self&&self.Math===Math?self:Function("return this")();e.window=n;e.document=n.document},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=i(0),o=function(){};o.show=function(t){var e=this.internal,i=void 0,n=void 0;t.mouse&&(n=t.mouse),t.data?e.isMultipleX()?(n=[e.x(t.data.x),e.getYScale(t.data.id)(t.data.value)],i=null):i=(0,r.isValue)(t.data.index)?t.data.index:e.getIndexByX(t.data.x):void 0===t.x?void 0!==t.index&&(i=t.index):i=e.getIndexByX(t.x),e.dispatchEvent("mouseover",i,n),e.dispatchEvent("mousemove",i,n),e.config.tooltip_onshow.call(e,t.data)},o.hide=function(){this.internal.dispatchEvent("mouseout",0),this.internal.config.tooltip_onhide.call(this)},(0,r.extend)(a.default.prototype,{tooltip:o})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n),r=i(0);(0,r.extend)(a.default.prototype,{setLabelColor:function(t){var e=this.internal,i=e.config;(0,r.notEmpty)(t)&&(0,r.isString)(t)&&(i.data_labels_color=t),(0,r.notEmpty)(t)&&(0,r.isObject)(t)&&(i.data_labels_colors=t),e.setLabelColor()},getLabelColor:function(t){var e=this.internal,i=e.config;return(0,r.notEmpty)(i.data_labels_colors)?(0,r.notEmpty)(t)?i.data_labels_colors[t]:i.data_labels_colors:i.data_labels_color}})},function(t,e,i){"use strict";var n=i(4),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);i(9),(0,i(0).extend)(a.default.prototype,{exporting:function(t){this.internal.chartExport(t)}})},function(t,e,i){"use strict";var n=i(1),a=function(t){return t&&t.__esModule?t:{"default":t}}(n);(0,i(0).extend)(a.default.prototype,{isSafari:function(){var t=window.navigator.userAgent;return t.indexOf("Safari")>=0&&t.indexOf("Chrome")<0},isChrome:function(){return window.navigator.userAgent.indexOf("Chrome")>=0}})}])});
//# sourceMappingURL=rainbow.min.js.map